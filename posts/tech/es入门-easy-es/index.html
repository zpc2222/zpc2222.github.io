<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Eså…¥é—¨-easy-es | æˆ‘çš„ä¸ªäººå°ç«™</title><meta name=keywords content="IO,ç½‘ç»œç¼–ç¨‹"><meta name=description content="ElasticSearchå…¥é—¨ä½¿ç”¨"><meta name=author content="
ä½œè€…:&nbsp;è—é”‹"><link rel=canonical href=https://zpc2222.github.io/posts/tech/es%E5%85%A5%E9%97%A8-easy-es/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://zpc2222.github.io/img/Q.gif><link rel=icon type=image/png sizes=16x16 href=https://zpc2222.github.io/img/Q.gif><link rel=icon type=image/png sizes=32x32 href=https://zpc2222.github.io/img/Q.gif><link rel=apple-touch-icon href=https://zpc2222.github.io/img/Q.gif><link rel=mask-icon href=https://zpc2222.github.io/img/Q.gif><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><meta property="og:title" content="Eså…¥é—¨-easy-es"><meta property="og:description" content="ElasticSearchå…¥é—¨ä½¿ç”¨"><meta property="og:type" content="article"><meta property="og:url" content="https://zpc2222.github.io/posts/tech/es%E5%85%A5%E9%97%A8-easy-es/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-11-29T00:00:00+08:00"><meta property="article:modified_time" content="2022-11-29T00:00:00+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Eså…¥é—¨-easy-es"><meta name=twitter:description content="ElasticSearchå…¥é—¨ä½¿ç”¨"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"ğŸ“šæ–‡ç« ","item":"https://zpc2222.github.io/posts/"},{"@type":"ListItem","position":3,"name":"ğŸ‘¨ğŸ»â€ğŸ’» æŠ€æœ¯","item":"https://zpc2222.github.io/posts/tech/"},{"@type":"ListItem","position":4,"name":"Eså…¥é—¨-easy-es","item":"https://zpc2222.github.io/posts/tech/es%E5%85%A5%E9%97%A8-easy-es/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Eså…¥é—¨-easy-es","name":"Eså…¥é—¨-easy-es","description":"ElasticSearchå…¥é—¨ä½¿ç”¨","keywords":["IO","ç½‘ç»œç¼–ç¨‹"],"articleBody":"ç®€ä»‹ å®˜ç½‘åœ°å€ï¼š\u003e https://www.easy-es.cn\né€‰æ‹©ç†ç”±ï¼šçœå¿ƒï¼ŒçœåŠ›ï¼Œçœä»£ç ã€‚ç®€å•å¥½ç”¨ï¼Œå°‘æ“å¿ƒ\nå¼•ç”¨ pomä¾èµ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 cn.easy-es easy-es-boot-starter 1.1.0 org.elasticsearch.client elasticsearch-rest-high-level-client 7.14.0 org.elasticsearch elasticsearch 7.14.0 é…ç½® å¦‚æœæ˜¯propertiesï¼Œä¹Ÿå·®è·ä¸å¤§\n1 2 3 4 5 6 7 8 9 10 easy-es: # æ˜¯å¦å¼€å¯EEè‡ªåŠ¨é…ç½®,è‹¥ä¸ºfalseæ—¶,åˆ™è®¤ä¸ºä¸å¯ç”¨æœ¬æ¡†æ¶ enable: true # ESè¿æ¥åœ°å€+ç«¯å£ address: 127.0.0.1:9200 # å…³é—­è‡ªå¸¦banner banner: false schema: http username: elastic #æœ‰è®¾ç½®æ‰å¡«å†™,éå¿…é¡» password: elastic æ‹“å±•é…ç½®\nå¯ç¼ºçœ,ä¸å½±å“é¡¹ç›®å¯åŠ¨,ä¸ºäº†æé«˜ç”Ÿäº§ç¯å¢ƒæ€§èƒ½,å»ºè®®æŒ‰éœ€é…ç½®\n1 2 3 4 5 6 7 8 easy-es: keep-alive-millis: 18000 # å¿ƒè·³ç­–ç•¥æ—¶é—´ å•ä½:ms connectTimeout: 5000 # è¿æ¥è¶…æ—¶æ—¶é—´ å•ä½:ms socketTimeout: 5000 # é€šä¿¡è¶…æ—¶æ—¶é—´ å•ä½:ms requestTimeout: 5000 # è¯·æ±‚è¶…æ—¶æ—¶é—´ å•ä½:ms connectionRequestTimeout: 5000 # è¿æ¥è¯·æ±‚è¶…æ—¶æ—¶é—´ å•ä½:ms maxConnTotal: 100 # æœ€å¤§è¿æ¥æ•° å•ä½:ä¸ª maxConnPerRoute: 100 # æœ€å¤§è¿æ¥è·¯ç”±æ•° å•ä½:ä¸ª å…¨å±€é…ç½®ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 easy-es: banner: false # é»˜è®¤ä¸ºtrue æ‰“å°banner è‹¥æ‚¨ä¸æœŸæœ›æ‰“å°banner,å¯é…ç½®ä¸ºfalse global-config: process_index_mode: smoothly #ç´¢å¼•å¤„ç†æ¨¡å¼,smoothly:å¹³æ»‘æ¨¡å¼,é»˜è®¤å¼€å¯æ­¤æ¨¡å¼, not_smoothly:éå¹³æ»‘æ¨¡å¼, manual:æ‰‹åŠ¨æ¨¡å¼ print-dsl: true # å¼€å¯æ§åˆ¶å°æ‰“å°é€šè¿‡æœ¬æ¡†æ¶ç”Ÿæˆçš„DSLè¯­å¥,é»˜è®¤ä¸ºå¼€å¯,æµ‹è¯•ç¨³å®šåçš„ç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­,ä»¥æå‡å°‘é‡æ€§èƒ½ distributed: false # å½“å‰é¡¹ç›®æ˜¯å¦åˆ†å¸ƒå¼é¡¹ç›®,é»˜è®¤ä¸ºtrue,åœ¨éæ‰‹åŠ¨æ‰˜ç®¡ç´¢å¼•æ¨¡å¼ä¸‹,è‹¥ä¸ºåˆ†å¸ƒå¼é¡¹ç›®åˆ™ä¼šè·å–åˆ†å¸ƒå¼é”,éåˆ†å¸ƒå¼é¡¹ç›®åªéœ€synchronizedé”. asyncProcessIndexBlocking: true # å¼‚æ­¥å¤„ç†ç´¢å¼•æ˜¯å¦é˜»å¡ä¸»çº¿ç¨‹ é»˜è®¤é˜»å¡ æ•°æ®é‡è¿‡å¤§æ—¶è°ƒæ•´ä¸ºéé˜»å¡å¼‚æ­¥è¿›è¡Œ é¡¹ç›®å¯åŠ¨æ›´å¿« activeReleaseIndexMaxRetry: 60 # åˆ†å¸ƒå¼ç¯å¢ƒä¸‹,å¹³æ»‘æ¨¡å¼,å½“å‰å®¢æˆ·ç«¯æ¿€æ´»æœ€æ–°ç´¢å¼•æœ€å¤§é‡è¯•æ¬¡æ•°è‹¥æ•°æ®é‡è¿‡å¤§,é‡å»ºç´¢å¼•æ•°æ®è¿ç§»æ—¶é—´è¶…è¿‡60*(180/60)=180åˆ†é’Ÿæ—¶,å¯è°ƒå¤§æ­¤å‚æ•°å€¼,æ­¤å‚æ•°å€¼å†³å®šæœ€å¤§é‡è¯•æ¬¡æ•°,è¶…å‡ºæ­¤æ¬¡æ•°åä»æœªæˆåŠŸ,åˆ™ç»ˆæ­¢é‡è¯•å¹¶è®°å½•å¼‚å¸¸æ—¥å¿— activeReleaseIndexFixedDelay: 180 # åˆ†å¸ƒå¼ç¯å¢ƒä¸‹,å¹³æ»‘æ¨¡å¼,å½“å‰å®¢æˆ·ç«¯æ¿€æ´»æœ€æ–°ç´¢å¼•æœ€å¤§é‡è¯•æ¬¡æ•° è‹¥æ•°æ®é‡è¿‡å¤§,é‡å»ºç´¢å¼•æ•°æ®è¿ç§»æ—¶é—´è¶…è¿‡60*(180/60)=180åˆ†é’Ÿæ—¶,å¯è°ƒå¤§æ­¤å‚æ•°å€¼ æ­¤å‚æ•°å€¼å†³å®šå¤šä¹…é‡è¯•ä¸€æ¬¡ å•ä½:ç§’ db-config: map-underscore-to-camel-case: false # æ˜¯å¦å¼€å¯ä¸‹åˆ’çº¿è½¬é©¼å³° é»˜è®¤ä¸ºfalse table-prefix: daily_ # ç´¢å¼•å‰ç¼€,å¯ç”¨äºåŒºåˆ†ç¯å¢ƒ é»˜è®¤ä¸ºç©º ç”¨æ³•å’ŒMPä¸€æ · id-type: customize # idç”Ÿæˆç­–ç•¥ customizeä¸ºè‡ªå®šä¹‰,idå€¼ç”±ç”¨æˆ·ç”Ÿæˆ,æ¯”å¦‚å–MySQLä¸­çš„æ•°æ®id,å¦‚ç¼ºçœæ­¤é¡¹é…ç½®,åˆ™idé»˜è®¤ç­–ç•¥ä¸ºesè‡ªåŠ¨ç”Ÿæˆ field-strategy: not_empty # å­—æ®µæ›´æ–°ç­–ç•¥ é»˜è®¤ä¸ºnot_null enable-track-total-hits: true # é»˜è®¤å¼€å¯,æŸ¥è¯¢è‹¥æŒ‡å®šäº†sizeè¶…è¿‡1wæ¡æ—¶ä¹Ÿä¼šè‡ªåŠ¨å¼€å¯,å¼€å¯åæŸ¥è¯¢æ‰€æœ‰åŒ¹é…æ•°æ®,è‹¥ä¸å¼€å¯,ä¼šå¯¼è‡´æ— æ³•è·å–æ•°æ®æ€»æ¡æ•°,å…¶å®ƒåŠŸèƒ½ä¸å—å½±å“. refresh-policy: immediate # æ•°æ®åˆ·æ–°ç­–ç•¥,é»˜è®¤ä¸ºä¸åˆ·æ–° enable-must2-filter: false # æ˜¯å¦å…¨å±€å¼€å¯mustæŸ¥è¯¢ç±»å‹è½¬æ¢ä¸ºfilteræŸ¥è¯¢ç±»å‹ é»˜è®¤ä¸ºfalseä¸è½¬æ¢ ä»£ç  æ•°æ®æ¨¡å‹ï¼ˆç›¸å½“äºMPçš„entityï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 /** * es æ•°æ®æ¨¡å‹ * **/ @Data @Accessors(chain = true) @IndexName(value = \"es_document\", shardsNum = 3, replicasNum = 2, keepGlobalPrefix = true, maxResultWindow = 100) public class Document { /** * esä¸­çš„å”¯ä¸€id,å¦‚æœä½ æƒ³è‡ªå®šä¹‰esä¸­çš„idä¸ºä½ æä¾›çš„id,æ¯”å¦‚MySQLä¸­çš„id,è¯·å°†æ³¨è§£ä¸­çš„typeæŒ‡å®šä¸ºcustomizeæˆ–ç›´æ¥åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š,å¦‚æ­¤idä¾¿æ”¯æŒä»»æ„æ•°æ®ç±»å‹) */ @IndexId(type = IdType.CUSTOMIZE) private String id; /** * æ–‡æ¡£æ ‡é¢˜,ä¸æŒ‡å®šç±»å‹é»˜è®¤è¢«åˆ›å»ºä¸ºkeywordç±»å‹,å¯è¿›è¡Œç²¾ç¡®æŸ¥è¯¢ */ private String title; /** * æ–‡æ¡£å†…å®¹,æŒ‡å®šäº†ç±»å‹åŠå­˜å‚¨/æŸ¥è¯¢åˆ†è¯å™¨ */ @HighLight(mappingField = \"highlightContent\") @IndexField(fieldType = FieldType.TEXT, analyzer = Analyzer.IK_SMART) private String content; /** * ä½œè€… åŠ @TableFieldæ³¨è§£,å¹¶æŒ‡æ˜strategy = FieldStrategy.NOT_EMPTY è¡¨ç¤ºæ›´æ–°çš„æ—¶å€™çš„ç­–ç•¥ä¸º åˆ›å»ºè€…ä¸ä¸ºç©ºå­—ç¬¦ä¸²æ—¶æ‰æ›´æ–° */ @IndexField(strategy = FieldStrategy.NOT_EMPTY) private String creator; /** * åˆ›å»ºæ—¶é—´ */ @IndexField(fieldType = FieldType.DATE, dateFormat = \"yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis\") private String gmtCreate; /** * esä¸­å®é™…ä¸å­˜åœ¨çš„å­—æ®µ,ä½†æ¨¡å‹ä¸­åŠ äº†,ä¸ºäº†ä¸å’Œesæ˜ å°„,å¯ä»¥åœ¨æ­¤ç±»å‹å­—æ®µä¸ŠåŠ ä¸Š æ³¨è§£@TableField,å¹¶æŒ‡æ˜exist=false */ @IndexField(exist = false) private String notExistsField; /** * åœ°ç†ä½ç½®ç»çº¬åº¦åæ ‡ ä¾‹å¦‚: \"40.13933715136454,116.63441990026217\" */ @IndexField(fieldType = FieldType.GEO_POINT) private String location; /** * å›¾å½¢(ä¾‹å¦‚åœ†å¿ƒ,çŸ©å½¢) */ @IndexField(fieldType = FieldType.GEO_SHAPE) private String geoLocation; /** * è‡ªå®šä¹‰å­—æ®µåç§° */ @IndexField(value = \"wu-la\", fieldType = FieldType.TEXT, analyzer = Analyzer.IK_SMART, searchAnalyzer = Analyzer.IK_SMART, fieldData = true) private String customField; /** * é«˜äº®è¿”å›å€¼è¢«æ˜ å°„çš„å­—æ®µ */ private String highlightContent; /** * æ–‡æ¡£ç‚¹èµæ•° */ private Integer starNum; } mapper 1 2 3 4 5 6 /** * mapper ç›¸å½“äºMybatis-plusçš„mapper * **/ public interface DocumentMapper extends BaseEsMapper\u003cDocument\u003e { } controller è°ƒç”¨æ¥å£ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 @RestController @RequestMapping(\"/es\") @Tag(name = \"esæ¡ˆä¾‹\") @RequiredArgsConstructor @Slf4j public class EsController { private final DocumentMapper documentMapper; /** * åˆå§‹åŒ–æ’å…¥æ•°æ®,é»˜è®¤å¼€å¯è‡ªåŠ¨æŒ¡,è‡ªåŠ¨æŒ¡æ¨¡å¼ä¸‹,ç´¢å¼•ä¼šè‡ªåŠ¨åˆ›å»ºåŠæ›´æ–°. è‹¥æœªå¼€å¯è‡ªåŠ¨æŒ¡,åˆ™åœ¨æ­¤æ­¥éª¤å‰éœ€å…ˆè°ƒç”¨åˆ›å»ºç´¢å¼•APIå®Œæˆç´¢å¼•åˆ›å»º * * @return */ @Operation(summary = \"æ·»åŠ æ–‡æ¡£\") @PostMapping(\"insert\") public Integer insert(@RequestBody Document document) { document.setGmtCreate(LocalDateTime.now().format(DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss\"))); return documentMapper.insert(document); } @Operation(summary = \"æ‰¹é‡æ·»åŠ æµ‹è¯•\") @PostMapping(\"batchInsert\") public void testBatchInsert() { List documentList = new ArrayList\u003c\u003e(); for (int i = 2; i \u003c 23; i++) { Document document = new Document(); document.setId(Integer.toString(i)); document.setTitle(\"æµ‹è¯•æ–‡æ¡£\" + i); document.setContent(\"æµ‹è¯•å†…å®¹\" + i); document.setCreator(\"è€æ±‰\" + i); document.setGmtCreate(LocalDateTime.now().format(DateTimeFormatter.ofPattern(\"yyyy-MM-dd HH:mm:ss\"))); document.setCustomField(\"è‡ªå®šä¹‰å­—æ®µ\" + i); Point point = new Point(13.400544 + i, 52.530286 + i); document.setGeoLocation(point.toString()); document.setStarNum(i); if (i == 2) { document.setLocation(\"40.17836693398477,116.64002551005981\"); document.setStarNum(1); } else if (i == 3) { document.setLocation(\"40.19103839805197,116.5624013764374\"); } else if (i == 4) { document.setLocation(\"40.13933715136454,116.63441990026217\"); } documentList.add(document); } int count = documentMapper.insertBatch(documentList); Assert.equals(documentList.size(), count); } /** * æ¼”ç¤ºæ ¹æ®æ ‡é¢˜ç²¾ç¡®æŸ¥è¯¢æ–‡ç«  * ä¾‹å¦‚titleä¼ å€¼ä¸º æˆ‘çœŸå¸…,é‚£ä¹ˆåœ¨å½“å‰é…ç½®çš„ç´¢å¼•ä¸‹,æ‰€æœ‰æ ‡é¢˜ä¸º'æˆ‘çœŸå¸…'çš„æ–‡ç« éƒ½ä¼šè¢«æŸ¥è¯¢å‡ºæ¥ * å…¶å®ƒå„ç§åœºæ™¯çš„æŸ¥è¯¢ä½¿ç”¨,è¯·ç§»æ­¥è‡³testæ¨¡å— * * @param title * @return */ @Operation(summary = \"æ ¹æ®æ ‡é¢˜ç²¾ç¡®æŸ¥è¯¢æ–‡ç« \") @GetMapping(\"/listDocumentByTitle\") public List listDocumentByTitle(@RequestParam String title) { // å®é™…å¼€å‘ä¸­ä¼šæŠŠè¿™äº›é€»è¾‘å†™è¿›serviceå±‚ è¿™é‡Œä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿å°±ä¸åˆ›å»ºserviceå±‚äº† LambdaEsQueryWrapper wrapper = new LambdaEsQueryWrapper\u003c\u003e(); wrapper.eq(Document::getTitle, title); return documentMapper.selectList(wrapper); } @Operation(summary = \"æŸ¥è¯¢idæ˜¯1,2,3çš„\") @GetMapping(\"/queryConditionIn\") public List testConditionIn() { LambdaEsQueryWrapper wrapper = new LambdaEsQueryWrapper\u003c\u003e(); wrapper.in(Document::getId, \"1\", \"2\", \"3\"); List documents = documentMapper.selectList(wrapper); return documents; } /** * æ¼”ç¤ºæ ¹æ®titleåˆ é™¤æ–‡ç« ï¼ŒåŒæ—¶ä¼šè¢« DeleteInterceptor æ‹¦æˆªï¼Œæ‰§è¡Œé€»è¾‘åˆ é™¤ * * @param title * @return */ @Operation(summary = \"æ ¹æ®titleåˆ é™¤æ–‡ç« \") @GetMapping(\"/deleteDocumentByTitle\") public Integer deleteDocumentByTitle(@RequestParam String title) { // å®é™…å¼€å‘ä¸­ä¼šæŠŠè¿™äº›é€»è¾‘å†™è¿›serviceå±‚ è¿™é‡Œä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿å°±ä¸åˆ›å»ºserviceå±‚äº† LambdaEsQueryWrapper wrapper = new LambdaEsQueryWrapper\u003c\u003e(); wrapper.eq(Document::getTitle, title); return documentMapper.delete(wrapper); } /** * è‡ªå®šä¹‰æ³¨è§£æŒ‡å®šé«˜äº®è¿”å›å­—æ®µ,é«˜äº®æŸ¥è¯¢æµ‹è¯• * * @param content * @return */ @Operation(summary = \"é«˜äº®æŸ¥è¯¢æµ‹è¯•\") @GetMapping(\"/highlightSearch\") public List highlightSearch(@RequestParam String content) { // å®é™…å¼€å‘ä¸­ä¼šæŠŠè¿™äº›é€»è¾‘å†™è¿›serviceå±‚ è¿™é‡Œä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿å°±ä¸åˆ›å»ºserviceå±‚äº† LambdaEsQueryWrapper wrapper = new LambdaEsQueryWrapper\u003c\u003e(); wrapper.match(Document::getContent, content); return documentMapper.selectList(wrapper); } æ³¨è§£ å¯åŠ¨ç±»æ·»åŠ  1 å¯åŠ¨ç±»æ·»åŠ @EsMapperScan(\"com.xxx.mapper\") mapperæ‰«ææ³¨è§£,åŠŸèƒ½ä¸MPçš„@MapperScanä¸€è‡´\n@IndexName ç´¢å¼•åæ³¨è§£ï¼Œæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„ç´¢å¼• å¯¹åº”MPçš„@TableNameæ³¨è§£\n@IndexId ESä¸»é”®æ³¨è§£\n@IndexField ESå­—æ®µæ³¨è§£\nå¯åŠ¨æˆåŠŸï¼Œæ‰“å°ï¼šCongratulations auto process index by Easy-Es is don\nå…·ä½“ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒä»£ç é‡Œé¢çš„testå·¥ç¨‹ï¼Œå·¥ç¨‹åï¼šeasy-es-test è·¯å¾„ï¼šcn.easyes.test\nä¸è¶³ eeæºç ä½¿ç”¨çš„æ˜¯1.8ç‰ˆæœ¬JDKï¼Œå®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé¡¹ç›®æ˜¯Java17ï¼ˆ22å¹´ï¼ŒJava19éƒ½å‘å¸ƒäº†ï¼‰ï¼Œä¼šå‘ç°ä¸å…¼å®¹ï¼Œ ç›®å‰æš‚æ— è§£å†³ç‰ˆæœ¬ï¼Œå·²æissueï¼Œç»™çš„ç»“è®ºæ˜¯:ç›®å‰è¿˜ä¸æ”¯æŒjdk 17\n","wordCount":"2948","inLanguage":"en","datePublished":"2022-11-29T00:00:00+08:00","dateModified":"2022-11-29T00:00:00+08:00","author":[{"@type":"Person","name":"è—é”‹"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://zpc2222.github.io/posts/tech/es%E5%85%A5%E9%97%A8-easy-es/"},"publisher":{"@type":"Organization","name":"æˆ‘çš„ä¸ªäººå°ç«™","logo":{"@type":"ImageObject","url":"https://zpc2222.github.io/img/Q.gif"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><script async src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script><header class=header><nav class=nav><div class=logo><a href=https://zpc2222.github.io accesskey=h title="æˆ‘çš„ä¸ªäººå°ç«™ (Alt + H)"><img src=https://zpc2222.github.io/img/Q.gif alt=logo aria-label=logo height=35>æˆ‘çš„ä¸ªäººå°ç«™</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://zpc2222.github.io/search title="ğŸ” æœç´¢ (Alt + /)" accesskey=/><span>ğŸ” æœç´¢</span></a></li><li><a href=https://zpc2222.github.io/ title="ğŸ  ä¸»é¡µ"><span>ğŸ  ä¸»é¡µ</span></a></li><li><a href=https://zpc2222.github.io/posts title="ğŸ“š æ–‡ç« "><span>ğŸ“š æ–‡ç« </span></a></li><li><a href=https://zpc2222.github.io/tags title="ğŸ§© æ ‡ç­¾"><span>ğŸ§© æ ‡ç­¾</span></a></li><li><a href=https://zpc2222.github.io/archives/ title="â± æ—¶é—´è½´"><span>â± æ—¶é—´è½´</span></a></li><li><a href=https://zpc2222.github.io/music title="ğŸµ å¬å¬æ­Œ"><span>ğŸµ å¬å¬æ­Œ</span></a></li><li><a href=https://zpc2222.github.io/about title="ğŸ™‹ğŸ»â€â™‚ï¸ å…³äº"><span>ğŸ™‹ğŸ»â€â™‚ï¸ å…³äº</span></a></li><li><a href=https://zpc2222.github.io/links title="ğŸ¤ å‹é“¾"><span>ğŸ¤ å‹é“¾</span></a></li></ul></nav></header><main class="main page"><article class=post-single><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://zpc2222.github.io>ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href=https://zpc2222.github.io/posts/>ğŸ“šæ–‡ç« </a>&nbsp;Â»&nbsp;<a href=https://zpc2222.github.io/posts/tech/>ğŸ‘¨ğŸ»â€ğŸ’» æŠ€æœ¯</a></div><h1 class=post-title>Eså…¥é—¨-easy-es</h1><div class=post-description>ElasticSearchå…¥é—¨ä½¿ç”¨</div><div class=post-meta>åˆ›å»º:&nbsp;<span title='2022-11-29 00:00:00 +0800 +0800'>2022-11-29</span>&nbsp;|&nbsp;æ›´æ–°:&nbsp;2022-11-29&nbsp;|&nbsp;å­—æ•°:&nbsp;2948å­—&nbsp;|&nbsp;æ—¶é•¿:&nbsp;6åˆ†é’Ÿ&nbsp;|&nbsp;
ä½œè€…:&nbsp;è—é”‹
&nbsp;|&nbsp;æ ‡ç­¾: &nbsp;<ul class=post-tags-meta><a href=https://zpc2222.github.io/tags/elasticsearch/>ElasticSearch</a>
<a href=https://zpc2222.github.io/tags/java/>ã€java</a></ul><span id=busuanzi_container_page_pv>&nbsp;| è®¿é—®: <span id=busuanzi_value_page_pv></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>æ–‡ç« ç›®å½•</span></summary><div class=inner><ul><li><a href=#%e7%ae%80%e4%bb%8b aria-label=ç®€ä»‹>ç®€ä»‹</a></li><li><a href=#%e5%bc%95%e7%94%a8 aria-label=å¼•ç”¨>å¼•ç”¨</a><ul><li><a href=#pom%e4%be%9d%e8%b5%96 aria-label=pomä¾èµ–>pomä¾èµ–</a></li><li><a href=#%e9%85%8d%e7%bd%ae aria-label=é…ç½®>é…ç½®</a></li></ul></li><li><a href=#%e4%bb%a3%e7%a0%81 aria-label=ä»£ç >ä»£ç </a><ul><li><a href=#%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%9e%8b%e7%9b%b8%e5%bd%93%e4%ba%8emp%e7%9a%84entity aria-label=æ•°æ®æ¨¡å‹ï¼ˆç›¸å½“äºMPçš„entityï¼‰>æ•°æ®æ¨¡å‹ï¼ˆç›¸å½“äºMPçš„entityï¼‰</a></li><li><a href=#mapper aria-label=mapper>mapper</a></li><li><a href=#controller-%e8%b0%83%e7%94%a8%e6%8e%a5%e5%8f%a3 aria-label="controller è°ƒç”¨æ¥å£">controller è°ƒç”¨æ¥å£</a></li><li><a href=#%e6%b3%a8%e8%a7%a3 aria-label=æ³¨è§£>æ³¨è§£</a></li></ul></li><li><a href=#%e4%b8%8d%e8%b6%b3 aria-label=ä¸è¶³>ä¸è¶³</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h2 id=ç®€ä»‹>ç®€ä»‹<a hidden class=anchor aria-hidden=true href=#ç®€ä»‹>#</a></h2><p>å®˜ç½‘åœ°å€ï¼š> <a href=https://www.easy-es.cn>https://www.easy-es.cn</a></p><p>é€‰æ‹©ç†ç”±ï¼šçœå¿ƒï¼ŒçœåŠ›ï¼Œçœä»£ç ã€‚ç®€å•å¥½ç”¨ï¼Œå°‘æ“å¿ƒ</p><h2 id=å¼•ç”¨>å¼•ç”¨<a hidden class=anchor aria-hidden=true href=#å¼•ç”¨>#</a></h2><h3 id=pomä¾èµ–>pomä¾èµ–<a hidden class=anchor aria-hidden=true href=#pomä¾èµ–>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>cn.easy-es<span style=color:#f92672>&lt;/groupId&gt;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>easy-es-boot-starter<span style=color:#f92672>&lt;/artifactId&gt;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;version&gt;</span>1.1.0<span style=color:#f92672>&lt;/version&gt;</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>  
</span></span><span style=display:flex><span><span style=color:#75715e>&lt;!--ESçš„ç›¸å…³ä¾èµ–ç‰ˆæœ¬éœ€è¦ç»Ÿä¸€ä¸‹,å»ºè®®ä¸æœåŠ¡ç«¯ç‰ˆæœ¬ç»Ÿä¸€--&gt;</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>org.elasticsearch.client<span style=color:#f92672>&lt;/groupId&gt;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>elasticsearch-rest-high-level-client<span style=color:#f92672>&lt;/artifactId&gt;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;version&gt;</span>7.14.0<span style=color:#f92672>&lt;/version&gt;</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;dependency&gt;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;groupId&gt;</span>org.elasticsearch<span style=color:#f92672>&lt;/groupId&gt;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;artifactId&gt;</span>elasticsearch<span style=color:#f92672>&lt;/artifactId&gt;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>&lt;version&gt;</span>7.14.0<span style=color:#f92672>&lt;/version&gt;</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>&lt;/dependency&gt;</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=é…ç½®>é…ç½®<a hidden class=anchor aria-hidden=true href=#é…ç½®>#</a></h3><p>å¦‚æœæ˜¯propertiesï¼Œä¹Ÿå·®è·ä¸å¤§</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>easy-es</span>:  
</span></span><span style=display:flex><span>  <span style=color:#75715e># æ˜¯å¦å¼€å¯EEè‡ªåŠ¨é…ç½®,è‹¥ä¸ºfalseæ—¶,åˆ™è®¤ä¸ºä¸å¯ç”¨æœ¬æ¡†æ¶ </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>enable</span>: <span style=color:#66d9ef>true</span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e># ESè¿æ¥åœ°å€+ç«¯å£  </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>address</span>:  <span style=color:#ae81ff>127.0.0.1</span>:<span style=color:#ae81ff>9200</span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e># å…³é—­è‡ªå¸¦banner  </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>banner</span>: <span style=color:#66d9ef>false</span>  
</span></span><span style=display:flex><span>  <span style=color:#f92672>schema</span>: <span style=color:#ae81ff>http  </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>username</span>: <span style=color:#ae81ff>elastic  </span> <span style=color:#75715e>#æœ‰è®¾ç½®æ‰å¡«å†™,éå¿…é¡»</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>password</span>: <span style=color:#ae81ff>elastic</span>
</span></span></code></pre></td></tr></table></div></div><p><strong>æ‹“å±•é…ç½®</strong></p><p>å¯ç¼ºçœ,ä¸å½±å“é¡¹ç›®å¯åŠ¨,ä¸ºäº†æé«˜ç”Ÿäº§ç¯å¢ƒæ€§èƒ½,å»ºè®®æŒ‰éœ€é…ç½®</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>easy-es</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>keep-alive-millis</span>: <span style=color:#ae81ff>18000</span> <span style=color:#75715e># å¿ƒè·³ç­–ç•¥æ—¶é—´ å•ä½:ms</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>connectTimeout</span>: <span style=color:#ae81ff>5000</span> <span style=color:#75715e># è¿æ¥è¶…æ—¶æ—¶é—´ å•ä½:ms</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>socketTimeout</span>: <span style=color:#ae81ff>5000</span> <span style=color:#75715e># é€šä¿¡è¶…æ—¶æ—¶é—´ å•ä½:ms </span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>requestTimeout</span>: <span style=color:#ae81ff>5000</span> <span style=color:#75715e># è¯·æ±‚è¶…æ—¶æ—¶é—´ å•ä½:ms</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>connectionRequestTimeout</span>: <span style=color:#ae81ff>5000</span> <span style=color:#75715e># è¿æ¥è¯·æ±‚è¶…æ—¶æ—¶é—´ å•ä½:ms</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>maxConnTotal</span>: <span style=color:#ae81ff>100</span> <span style=color:#75715e># æœ€å¤§è¿æ¥æ•° å•ä½:ä¸ª</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>maxConnPerRoute</span>: <span style=color:#ae81ff>100</span> <span style=color:#75715e># æœ€å¤§è¿æ¥è·¯ç”±æ•° å•ä½:ä¸ª</span>
</span></span></code></pre></td></tr></table></div></div><p>å…¨å±€é…ç½®ï¼š</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml><span style=display:flex><span><span style=color:#f92672>easy-es</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>banner</span>: <span style=color:#66d9ef>false</span> <span style=color:#75715e># é»˜è®¤ä¸ºtrue æ‰“å°banner è‹¥æ‚¨ä¸æœŸæœ›æ‰“å°banner,å¯é…ç½®ä¸ºfalse</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>global-config</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>process_index_mode</span>: <span style=color:#ae81ff>smoothly</span> <span style=color:#75715e>#ç´¢å¼•å¤„ç†æ¨¡å¼,smoothly:å¹³æ»‘æ¨¡å¼,é»˜è®¤å¼€å¯æ­¤æ¨¡å¼, not_smoothly:éå¹³æ»‘æ¨¡å¼, manual:æ‰‹åŠ¨æ¨¡å¼</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>print-dsl</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e># å¼€å¯æ§åˆ¶å°æ‰“å°é€šè¿‡æœ¬æ¡†æ¶ç”Ÿæˆçš„DSLè¯­å¥,é»˜è®¤ä¸ºå¼€å¯,æµ‹è¯•ç¨³å®šåçš„ç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­,ä»¥æå‡å°‘é‡æ€§èƒ½</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>distributed</span>: <span style=color:#66d9ef>false</span> <span style=color:#75715e># å½“å‰é¡¹ç›®æ˜¯å¦åˆ†å¸ƒå¼é¡¹ç›®,é»˜è®¤ä¸ºtrue,åœ¨éæ‰‹åŠ¨æ‰˜ç®¡ç´¢å¼•æ¨¡å¼ä¸‹,è‹¥ä¸ºåˆ†å¸ƒå¼é¡¹ç›®åˆ™ä¼šè·å–åˆ†å¸ƒå¼é”,éåˆ†å¸ƒå¼é¡¹ç›®åªéœ€synchronizedé”.</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>asyncProcessIndexBlocking</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e># å¼‚æ­¥å¤„ç†ç´¢å¼•æ˜¯å¦é˜»å¡ä¸»çº¿ç¨‹ é»˜è®¤é˜»å¡ æ•°æ®é‡è¿‡å¤§æ—¶è°ƒæ•´ä¸ºéé˜»å¡å¼‚æ­¥è¿›è¡Œ é¡¹ç›®å¯åŠ¨æ›´å¿«</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>activeReleaseIndexMaxRetry</span>: <span style=color:#ae81ff>60</span> <span style=color:#75715e># åˆ†å¸ƒå¼ç¯å¢ƒä¸‹,å¹³æ»‘æ¨¡å¼,å½“å‰å®¢æˆ·ç«¯æ¿€æ´»æœ€æ–°ç´¢å¼•æœ€å¤§é‡è¯•æ¬¡æ•°è‹¥æ•°æ®é‡è¿‡å¤§,é‡å»ºç´¢å¼•æ•°æ®è¿ç§»æ—¶é—´è¶…è¿‡60*(180/60)=180åˆ†é’Ÿæ—¶,å¯è°ƒå¤§æ­¤å‚æ•°å€¼,æ­¤å‚æ•°å€¼å†³å®šæœ€å¤§é‡è¯•æ¬¡æ•°,è¶…å‡ºæ­¤æ¬¡æ•°åä»æœªæˆåŠŸ,åˆ™ç»ˆæ­¢é‡è¯•å¹¶è®°å½•å¼‚å¸¸æ—¥å¿—</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>activeReleaseIndexFixedDelay</span>: <span style=color:#ae81ff>180</span> <span style=color:#75715e># åˆ†å¸ƒå¼ç¯å¢ƒä¸‹,å¹³æ»‘æ¨¡å¼,å½“å‰å®¢æˆ·ç«¯æ¿€æ´»æœ€æ–°ç´¢å¼•æœ€å¤§é‡è¯•æ¬¡æ•° è‹¥æ•°æ®é‡è¿‡å¤§,é‡å»ºç´¢å¼•æ•°æ®è¿ç§»æ—¶é—´è¶…è¿‡60*(180/60)=180åˆ†é’Ÿæ—¶,å¯è°ƒå¤§æ­¤å‚æ•°å€¼ æ­¤å‚æ•°å€¼å†³å®šå¤šä¹…é‡è¯•ä¸€æ¬¡ å•ä½:ç§’</span>
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#f92672>db-config</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>map-underscore-to-camel-case</span>: <span style=color:#66d9ef>false</span> <span style=color:#75715e># æ˜¯å¦å¼€å¯ä¸‹åˆ’çº¿è½¬é©¼å³° é»˜è®¤ä¸ºfalse</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>table-prefix</span>: <span style=color:#ae81ff>daily_</span> <span style=color:#75715e># ç´¢å¼•å‰ç¼€,å¯ç”¨äºåŒºåˆ†ç¯å¢ƒ  é»˜è®¤ä¸ºç©º ç”¨æ³•å’ŒMPä¸€æ ·</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>id-type</span>: <span style=color:#ae81ff>customize</span> <span style=color:#75715e># idç”Ÿæˆç­–ç•¥ customizeä¸ºè‡ªå®šä¹‰,idå€¼ç”±ç”¨æˆ·ç”Ÿæˆ,æ¯”å¦‚å–MySQLä¸­çš„æ•°æ®id,å¦‚ç¼ºçœæ­¤é¡¹é…ç½®,åˆ™idé»˜è®¤ç­–ç•¥ä¸ºesè‡ªåŠ¨ç”Ÿæˆ</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>field-strategy</span>: <span style=color:#ae81ff>not_empty</span> <span style=color:#75715e># å­—æ®µæ›´æ–°ç­–ç•¥ é»˜è®¤ä¸ºnot_null</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>enable-track-total-hits</span>: <span style=color:#66d9ef>true</span> <span style=color:#75715e># é»˜è®¤å¼€å¯,æŸ¥è¯¢è‹¥æŒ‡å®šäº†sizeè¶…è¿‡1wæ¡æ—¶ä¹Ÿä¼šè‡ªåŠ¨å¼€å¯,å¼€å¯åæŸ¥è¯¢æ‰€æœ‰åŒ¹é…æ•°æ®,è‹¥ä¸å¼€å¯,ä¼šå¯¼è‡´æ— æ³•è·å–æ•°æ®æ€»æ¡æ•°,å…¶å®ƒåŠŸèƒ½ä¸å—å½±å“.</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>refresh-policy</span>: <span style=color:#ae81ff>immediate</span> <span style=color:#75715e># æ•°æ®åˆ·æ–°ç­–ç•¥,é»˜è®¤ä¸ºä¸åˆ·æ–°</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>enable-must2-filter</span>: <span style=color:#66d9ef>false</span> <span style=color:#75715e># æ˜¯å¦å…¨å±€å¼€å¯mustæŸ¥è¯¢ç±»å‹è½¬æ¢ä¸ºfilteræŸ¥è¯¢ç±»å‹ é»˜è®¤ä¸ºfalseä¸è½¬æ¢</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=ä»£ç >ä»£ç <a hidden class=anchor aria-hidden=true href=#ä»£ç >#</a></h2><h3 id=æ•°æ®æ¨¡å‹ç›¸å½“äºmpçš„entity>æ•°æ®æ¨¡å‹ï¼ˆç›¸å½“äºMPçš„entityï¼‰<a hidden class=anchor aria-hidden=true href=#æ•°æ®æ¨¡å‹ç›¸å½“äºmpçš„entity>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">59
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">60
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e> * es æ•°æ®æ¨¡å‹  
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;p&gt;  
</span></span></span><span style=display:flex><span><span style=color:#75715e> **/</span>  
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Data</span>  
</span></span><span style=display:flex><span><span style=color:#a6e22e>@Accessors</span><span style=color:#f92672>(</span>chain <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span><span style=color:#a6e22e>@IndexName</span><span style=color:#f92672>(</span>value <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;es_document&#34;</span><span style=color:#f92672>,</span> shardsNum <span style=color:#f92672>=</span> 3<span style=color:#f92672>,</span> replicasNum <span style=color:#f92672>=</span> 2<span style=color:#f92672>,</span> keepGlobalPrefix <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>,</span> maxResultWindow <span style=color:#f92672>=</span> 100<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Document</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * esä¸­çš„å”¯ä¸€id,å¦‚æœä½ æƒ³è‡ªå®šä¹‰esä¸­çš„idä¸ºä½ æä¾›çš„id,æ¯”å¦‚MySQLä¸­çš„id,è¯·å°†æ³¨è§£ä¸­çš„typeæŒ‡å®šä¸ºcustomizeæˆ–ç›´æ¥åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š,å¦‚æ­¤idä¾¿æ”¯æŒä»»æ„æ•°æ®ç±»å‹)  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>    <span style=color:#a6e22e>@IndexId</span><span style=color:#f92672>(</span>type <span style=color:#f92672>=</span> IdType<span style=color:#f92672>.</span><span style=color:#a6e22e>CUSTOMIZE</span><span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String id<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * æ–‡æ¡£æ ‡é¢˜,ä¸æŒ‡å®šç±»å‹é»˜è®¤è¢«åˆ›å»ºä¸ºkeywordç±»å‹,å¯è¿›è¡Œç²¾ç¡®æŸ¥è¯¢  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String title<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * æ–‡æ¡£å†…å®¹,æŒ‡å®šäº†ç±»å‹åŠå­˜å‚¨/æŸ¥è¯¢åˆ†è¯å™¨  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@HighLight</span><span style=color:#f92672>(</span>mappingField <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;highlightContent&#34;</span><span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@IndexField</span><span style=color:#f92672>(</span>fieldType <span style=color:#f92672>=</span> FieldType<span style=color:#f92672>.</span><span style=color:#a6e22e>TEXT</span><span style=color:#f92672>,</span> analyzer <span style=color:#f92672>=</span> Analyzer<span style=color:#f92672>.</span><span style=color:#a6e22e>IK_SMART</span><span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String content<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * ä½œè€… åŠ @TableFieldæ³¨è§£,å¹¶æŒ‡æ˜strategy = FieldStrategy.NOT_EMPTY è¡¨ç¤ºæ›´æ–°çš„æ—¶å€™çš„ç­–ç•¥ä¸º åˆ›å»ºè€…ä¸ä¸ºç©ºå­—ç¬¦ä¸²æ—¶æ‰æ›´æ–°  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@IndexField</span><span style=color:#f92672>(</span>strategy <span style=color:#f92672>=</span> FieldStrategy<span style=color:#f92672>.</span><span style=color:#a6e22e>NOT_EMPTY</span><span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String creator<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * åˆ›å»ºæ—¶é—´  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@IndexField</span><span style=color:#f92672>(</span>fieldType <span style=color:#f92672>=</span> FieldType<span style=color:#f92672>.</span><span style=color:#a6e22e>DATE</span><span style=color:#f92672>,</span> dateFormat <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis&#34;</span><span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String gmtCreate<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * esä¸­å®é™…ä¸å­˜åœ¨çš„å­—æ®µ,ä½†æ¨¡å‹ä¸­åŠ äº†,ä¸ºäº†ä¸å’Œesæ˜ å°„,å¯ä»¥åœ¨æ­¤ç±»å‹å­—æ®µä¸ŠåŠ ä¸Š æ³¨è§£@TableField,å¹¶æŒ‡æ˜exist=false  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>    <span style=color:#a6e22e>@IndexField</span><span style=color:#f92672>(</span>exist <span style=color:#f92672>=</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String notExistsField<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * åœ°ç†ä½ç½®ç»çº¬åº¦åæ ‡ ä¾‹å¦‚: &#34;40.13933715136454,116.63441990026217&#34;  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>    <span style=color:#a6e22e>@IndexField</span><span style=color:#f92672>(</span>fieldType <span style=color:#f92672>=</span> FieldType<span style=color:#f92672>.</span><span style=color:#a6e22e>GEO_POINT</span><span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String location<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * å›¾å½¢(ä¾‹å¦‚åœ†å¿ƒ,çŸ©å½¢)  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>    <span style=color:#a6e22e>@IndexField</span><span style=color:#f92672>(</span>fieldType <span style=color:#f92672>=</span> FieldType<span style=color:#f92672>.</span><span style=color:#a6e22e>GEO_SHAPE</span><span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String geoLocation<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * è‡ªå®šä¹‰å­—æ®µåç§°  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>  
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>@IndexField</span><span style=color:#f92672>(</span>value <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;wu-la&#34;</span><span style=color:#f92672>,</span> fieldType <span style=color:#f92672>=</span> FieldType<span style=color:#f92672>.</span><span style=color:#a6e22e>TEXT</span><span style=color:#f92672>,</span> analyzer <span style=color:#f92672>=</span> Analyzer<span style=color:#f92672>.</span><span style=color:#a6e22e>IK_SMART</span><span style=color:#f92672>,</span> searchAnalyzer <span style=color:#f92672>=</span> Analyzer<span style=color:#f92672>.</span><span style=color:#a6e22e>IK_SMART</span><span style=color:#f92672>,</span> fieldData <span style=color:#f92672>=</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String customField<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * é«˜äº®è¿”å›å€¼è¢«æ˜ å°„çš„å­—æ®µ  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> String highlightContent<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * æ–‡æ¡£ç‚¹èµæ•°  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> Integer starNum<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=mapper>mapper<a hidden class=anchor aria-hidden=true href=#mapper>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e> * mapper ç›¸å½“äºMybatis-plusçš„mapper  
</span></span></span><span style=display:flex><span><span style=color:#75715e> * &lt;p&gt;  
</span></span></span><span style=display:flex><span><span style=color:#75715e> **/</span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>interface</span> <span style=color:#a6e22e>DocumentMapper</span> <span style=color:#66d9ef>extends</span> BaseEsMapper<span style=color:#f92672>&lt;</span>Document<span style=color:#f92672>&gt;</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=controller-è°ƒç”¨æ¥å£>controller è°ƒç”¨æ¥å£<a hidden class=anchor aria-hidden=true href=#controller-è°ƒç”¨æ¥å£>#</a></h3><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">100
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">101
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">102
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">103
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">104
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">105
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>@RestController  
</span></span><span style=display:flex><span>@RequestMapping(&#34;/es&#34;)  
</span></span><span style=display:flex><span>@Tag(name = &#34;esæ¡ˆä¾‹&#34;)  
</span></span><span style=display:flex><span>@RequiredArgsConstructor  
</span></span><span style=display:flex><span>@Slf4j  
</span></span><span style=display:flex><span>public class EsController {  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    private final DocumentMapper documentMapper;  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    /**  
</span></span><span style=display:flex><span>     * åˆå§‹åŒ–æ’å…¥æ•°æ®,é»˜è®¤å¼€å¯è‡ªåŠ¨æŒ¡,è‡ªåŠ¨æŒ¡æ¨¡å¼ä¸‹,ç´¢å¼•ä¼šè‡ªåŠ¨åˆ›å»ºåŠæ›´æ–°. è‹¥æœªå¼€å¯è‡ªåŠ¨æŒ¡,åˆ™åœ¨æ­¤æ­¥éª¤å‰éœ€å…ˆè°ƒç”¨åˆ›å»ºç´¢å¼•APIå®Œæˆç´¢å¼•åˆ›å»º  
</span></span><span style=display:flex><span>     *  
</span></span><span style=display:flex><span>     * @return  
</span></span><span style=display:flex><span>     */  
</span></span><span style=display:flex><span>    @Operation(summary = &#34;æ·»åŠ æ–‡æ¡£&#34;)  
</span></span><span style=display:flex><span>    @PostMapping(&#34;insert&#34;)  
</span></span><span style=display:flex><span>    public Integer insert(@RequestBody Document document) {  
</span></span><span style=display:flex><span>        document.setGmtCreate(LocalDateTime.now().format(DateTimeFormatter.ofPattern(&#34;yyyy-MM-dd HH:mm:ss&#34;)));  
</span></span><span style=display:flex><span>        return documentMapper.insert(document);  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    @Operation(summary = &#34;æ‰¹é‡æ·»åŠ æµ‹è¯•&#34;)  
</span></span><span style=display:flex><span>    @PostMapping(&#34;batchInsert&#34;)  
</span></span><span style=display:flex><span>    public void testBatchInsert() {  
</span></span><span style=display:flex><span>        List&lt;Document&gt; documentList = new ArrayList&lt;&gt;();  
</span></span><span style=display:flex><span>        for (int i = 2; i &lt; 23; i++) {  
</span></span><span style=display:flex><span>            Document document = new Document();  
</span></span><span style=display:flex><span>            document.setId(Integer.toString(i));  
</span></span><span style=display:flex><span>            document.setTitle(&#34;æµ‹è¯•æ–‡æ¡£&#34; + i);  
</span></span><span style=display:flex><span>            document.setContent(&#34;æµ‹è¯•å†…å®¹&#34; + i);  
</span></span><span style=display:flex><span>            document.setCreator(&#34;è€æ±‰&#34; + i);  
</span></span><span style=display:flex><span>            document.setGmtCreate(LocalDateTime.now().format(DateTimeFormatter.ofPattern(&#34;yyyy-MM-dd HH:mm:ss&#34;)));  
</span></span><span style=display:flex><span>            document.setCustomField(&#34;è‡ªå®šä¹‰å­—æ®µ&#34; + i);  
</span></span><span style=display:flex><span>            Point point = new Point(13.400544 + i, 52.530286 + i);  
</span></span><span style=display:flex><span>            document.setGeoLocation(point.toString());  
</span></span><span style=display:flex><span>            document.setStarNum(i);  
</span></span><span style=display:flex><span>            if (i == 2) {  
</span></span><span style=display:flex><span>                document.setLocation(&#34;40.17836693398477,116.64002551005981&#34;);  
</span></span><span style=display:flex><span>                document.setStarNum(1);  
</span></span><span style=display:flex><span>            } else if (i == 3) {  
</span></span><span style=display:flex><span>                document.setLocation(&#34;40.19103839805197,116.5624013764374&#34;);  
</span></span><span style=display:flex><span>            } else if (i == 4) {  
</span></span><span style=display:flex><span>                document.setLocation(&#34;40.13933715136454,116.63441990026217&#34;);  
</span></span><span style=display:flex><span>            }  
</span></span><span style=display:flex><span>            documentList.add(document);  
</span></span><span style=display:flex><span>        }  
</span></span><span style=display:flex><span>        int count = documentMapper.insertBatch(documentList);  
</span></span><span style=display:flex><span>        Assert.equals(documentList.size(), count);  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    /**  
</span></span><span style=display:flex><span>     * æ¼”ç¤ºæ ¹æ®æ ‡é¢˜ç²¾ç¡®æŸ¥è¯¢æ–‡ç«   
</span></span><span style=display:flex><span>     * ä¾‹å¦‚titleä¼ å€¼ä¸º æˆ‘çœŸå¸…,é‚£ä¹ˆåœ¨å½“å‰é…ç½®çš„ç´¢å¼•ä¸‹,æ‰€æœ‰æ ‡é¢˜ä¸º&#39;æˆ‘çœŸå¸…&#39;çš„æ–‡ç« éƒ½ä¼šè¢«æŸ¥è¯¢å‡ºæ¥  
</span></span><span style=display:flex><span>     * å…¶å®ƒå„ç§åœºæ™¯çš„æŸ¥è¯¢ä½¿ç”¨,è¯·ç§»æ­¥è‡³testæ¨¡å—  
</span></span><span style=display:flex><span>     *  
</span></span><span style=display:flex><span>     * @param title  
</span></span><span style=display:flex><span>     * @return  
</span></span><span style=display:flex><span>     */  
</span></span><span style=display:flex><span>    @Operation(summary = &#34;æ ¹æ®æ ‡é¢˜ç²¾ç¡®æŸ¥è¯¢æ–‡ç« &#34;)  
</span></span><span style=display:flex><span>    @GetMapping(&#34;/listDocumentByTitle&#34;)  
</span></span><span style=display:flex><span>    public List&lt;Document&gt; listDocumentByTitle(@RequestParam String title) {  
</span></span><span style=display:flex><span>        // å®é™…å¼€å‘ä¸­ä¼šæŠŠè¿™äº›é€»è¾‘å†™è¿›serviceå±‚ è¿™é‡Œä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿å°±ä¸åˆ›å»ºserviceå±‚äº†  
</span></span><span style=display:flex><span>        LambdaEsQueryWrapper&lt;Document&gt; wrapper = new LambdaEsQueryWrapper&lt;&gt;();  
</span></span><span style=display:flex><span>        wrapper.eq(Document::getTitle, title);  
</span></span><span style=display:flex><span>        return documentMapper.selectList(wrapper);  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    @Operation(summary = &#34;æŸ¥è¯¢idæ˜¯1,2,3çš„&#34;)  
</span></span><span style=display:flex><span>    @GetMapping(&#34;/queryConditionIn&#34;)  
</span></span><span style=display:flex><span>    public List&lt;Document&gt; testConditionIn() {  
</span></span><span style=display:flex><span>        LambdaEsQueryWrapper&lt;Document&gt; wrapper = new LambdaEsQueryWrapper&lt;&gt;();  
</span></span><span style=display:flex><span>        wrapper.in(Document::getId, &#34;1&#34;, &#34;2&#34;, &#34;3&#34;);  
</span></span><span style=display:flex><span>        List&lt;Document&gt; documents = documentMapper.selectList(wrapper);  
</span></span><span style=display:flex><span>        return documents;  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    /**  
</span></span><span style=display:flex><span>     * æ¼”ç¤ºæ ¹æ®titleåˆ é™¤æ–‡ç« ï¼ŒåŒæ—¶ä¼šè¢« DeleteInterceptor æ‹¦æˆªï¼Œæ‰§è¡Œé€»è¾‘åˆ é™¤  
</span></span><span style=display:flex><span>     *  
</span></span><span style=display:flex><span>     * @param title  
</span></span><span style=display:flex><span>     * @return  
</span></span><span style=display:flex><span>     */  
</span></span><span style=display:flex><span>    @Operation(summary = &#34;æ ¹æ®titleåˆ é™¤æ–‡ç« &#34;)  
</span></span><span style=display:flex><span>    @GetMapping(&#34;/deleteDocumentByTitle&#34;)  
</span></span><span style=display:flex><span>    public Integer deleteDocumentByTitle(@RequestParam String title) {  
</span></span><span style=display:flex><span>        // å®é™…å¼€å‘ä¸­ä¼šæŠŠè¿™äº›é€»è¾‘å†™è¿›serviceå±‚ è¿™é‡Œä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿å°±ä¸åˆ›å»ºserviceå±‚äº†  
</span></span><span style=display:flex><span>        LambdaEsQueryWrapper&lt;Document&gt; wrapper = new LambdaEsQueryWrapper&lt;&gt;();  
</span></span><span style=display:flex><span>        wrapper.eq(Document::getTitle, title);  
</span></span><span style=display:flex><span>        return documentMapper.delete(wrapper);  
</span></span><span style=display:flex><span>    }  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    /**  
</span></span><span style=display:flex><span>     * è‡ªå®šä¹‰æ³¨è§£æŒ‡å®šé«˜äº®è¿”å›å­—æ®µ,é«˜äº®æŸ¥è¯¢æµ‹è¯•  
</span></span><span style=display:flex><span>     *  
</span></span><span style=display:flex><span>     * @param content  
</span></span><span style=display:flex><span>     * @return  
</span></span><span style=display:flex><span>     */  
</span></span><span style=display:flex><span>    @Operation(summary = &#34;é«˜äº®æŸ¥è¯¢æµ‹è¯•&#34;)  
</span></span><span style=display:flex><span>    @GetMapping(&#34;/highlightSearch&#34;)  
</span></span><span style=display:flex><span>    public List&lt;Document&gt; highlightSearch(@RequestParam String content) {  
</span></span><span style=display:flex><span>        // å®é™…å¼€å‘ä¸­ä¼šæŠŠè¿™äº›é€»è¾‘å†™è¿›serviceå±‚ è¿™é‡Œä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿å°±ä¸åˆ›å»ºserviceå±‚äº†  
</span></span><span style=display:flex><span>        LambdaEsQueryWrapper&lt;Document&gt; wrapper = new LambdaEsQueryWrapper&lt;&gt;();  
</span></span><span style=display:flex><span>        wrapper.match(Document::getContent, content);  
</span></span><span style=display:flex><span>        return documentMapper.selectList(wrapper);  
</span></span><span style=display:flex><span>    }
</span></span></code></pre></td></tr></table></div></div><h3 id=æ³¨è§£>æ³¨è§£<a hidden class=anchor aria-hidden=true href=#æ³¨è§£>#</a></h3><ol><li>å¯åŠ¨ç±»æ·»åŠ </li></ol><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>å¯åŠ¨ç±»æ·»åŠ @EsMapperScan(&#34;com.xxx.mapper&#34;)
</span></span></code></pre></td></tr></table></div></div><p>mapperæ‰«ææ³¨è§£,åŠŸèƒ½ä¸MPçš„@MapperScanä¸€è‡´</p><ol start=2><li><p>@IndexName ç´¢å¼•åæ³¨è§£ï¼Œæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„ç´¢å¼• å¯¹åº”MPçš„@TableNameæ³¨è§£</p></li><li><p>@IndexId ESä¸»é”®æ³¨è§£</p></li><li><p>@IndexField ESå­—æ®µæ³¨è§£</p></li></ol><p>å¯åŠ¨æˆåŠŸï¼Œæ‰“å°ï¼šCongratulations auto process index by Easy-Es is don</p><p>å…·ä½“ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒä»£ç é‡Œé¢çš„testå·¥ç¨‹ï¼Œå·¥ç¨‹åï¼šeasy-es-test è·¯å¾„ï¼šcn.easyes.test</p><h2 id=ä¸è¶³>ä¸è¶³<a hidden class=anchor aria-hidden=true href=#ä¸è¶³>#</a></h2><p>eeæºç ä½¿ç”¨çš„æ˜¯1.8ç‰ˆæœ¬JDKï¼Œå®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé¡¹ç›®æ˜¯Java17ï¼ˆ22å¹´ï¼ŒJava19éƒ½å‘å¸ƒäº†ï¼‰ï¼Œä¼šå‘ç°ä¸å…¼å®¹ï¼Œ
ç›®å‰æš‚æ— è§£å†³ç‰ˆæœ¬ï¼Œå·²æissueï¼Œç»™çš„ç»“è®ºæ˜¯:ç›®å‰è¿˜ä¸æ”¯æŒjdk 17</p></div><div style="padding:10px 0;margin:20px auto;width:100%;font-size:16px;text-align:center">â˜• è¯·æˆ‘å–æ¯å’–å•¡å§ ãƒ¾(^â–½^*)))
<button id=rewardButton disable=enable onclick='var qr=document.getElementById("QR");qr.style.display==="none"?qr.style.display="block":qr.style.display="none"'>
<span>æ‰“èµ</span></button><div id=QR style=display:none><div id=wechat style=display:inline-block><a class=fancybox rel=group><img id=wechat_qr src=https://zpc2222.github.io/img/wechat-pay.jpg alt="WeChat Pay" style=width:280px;height:280px></a><p>å¾®ä¿¡</p></div><div id=alipay style=display:inline-block><a class=fancybox rel=group><img id=alipay_qr src=https://zpc2222.github.io/img/ali-pay.jpg alt=Alipay style=width:280px;height:280px></a><p>æ”¯ä»˜å®</p></div></div></div><footer class=post-footer><nav class=paginav><a class=prev href=https://zpc2222.github.io/posts/life/web-plugin/><span class=title>Â« ä¸Šä¸€é¡µ</span><br><span>ç½‘é¡µæ’ä»¶</span></a>
<a class=next href=https://zpc2222.github.io/posts/tech/java/java-common/><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>Javaå¸¸ç”¨é€Ÿè®°</span></a></nav></footer></div><div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>ğŸ’¬è¯„è®º</span><hr></div><div id=tcomment></div><script src=https://cdn.staticfile.org/twikoo/1.6.7/twikoo.all.min.js></script><script>twikoo.init({envId:"https://vercel-zpc2222.vercel.app",el:"#tcomment",lang:"zh-CN",region:null,path:window.TWIKOO_MAGIC_PATH||window.location.pathname})</script></div></article></main><script async src=https://unpkg.com/mermaid@8.8.1/dist/mermaid.min.js></script>
<script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><footer class=footer><span>Copyright
&copy;
2022-2023
<a href=https://zpc2222.github.io style=color:#939393>æˆ‘çš„ä¸ªäººå°ç«™</a>
All Rights Reserved</span>
<span id=busuanzi_container><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css>æ€»è®¿å®¢æ•°: <i class="fa fa-user"></i><span id=busuanzi_value_site_uv></span>
æ€»è®¿é—®é‡: <i class="fa fa-eye"></i><span id=busuanzi_value_site_pv></span></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg><span id=read_progress></span></span></a>
<script>document.addEventListener("scroll",function(){const t=document.getElementById("read_progress"),n=document.documentElement.scrollHeight,s=document.documentElement.clientHeight,o=document.documentElement.scrollTop||document.body.scrollTop;t.innerText=((o/(n-s)).toFixed(2)*100).toFixed(0)})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>400||document.documentElement.scrollTop>400?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.body.addEventListener("copy",function(e){if(window.getSelection().toString()&&window.getSelection().toString().length>50){let t=e.clipboardData||window.clipboardData;if(t){e.preventDefault();let n=window.getSelection().toString()+`

â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€Œæˆ‘çš„ä¸ªäººå°ç«™ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚
åŸæ–‡é“¾æ¥ï¼š`+location.href,s=window.getSelection().toString()+`

â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€Œæˆ‘çš„ä¸ªäººå°ç«™ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚
åŸæ–‡é“¾æ¥ï¼š`+location.href;t.setData("text/html",n),t.setData("text/plain",s)}}})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="ğŸ“„å¤åˆ¶";function s(){t.innerText="ğŸ‘ŒğŸ»å·²å¤åˆ¶!",setTimeout(()=>{t.innerText="ğŸ“„å¤åˆ¶"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){let t=e.textContent+`
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€Œæˆ‘çš„ä¸ªäººå°ç«™ã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚
åŸæ–‡é“¾æ¥ï¼š`+location.href;navigator.clipboard.writeText(t),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>