[{"content":"èƒŒæ™¯å’Œä½¿ç”¨ æ—¥å¸¸å®ç°å„ç§æœåŠ¡ç«¯ç³»ç»Ÿæ—¶ï¼Œæˆ‘ä»¬ä¸€å®šä¼šæœ‰ä¸€äº›å®šæ—¶ä»»åŠ¡çš„éœ€æ±‚ã€‚æ¯”å¦‚ä¼šè®®æå‰åŠå°æ—¶è‡ªåŠ¨æé†’ï¼Œå¼‚æ­¥ä»»åŠ¡å®šæ—¶/å‘¨æœŸæ‰§è¡Œç­‰ã€‚é‚£ä¹ˆå¦‚ä½•å»å®ç°è¿™æ ·çš„ä¸€ä¸ªå®šæ—¶ä»»åŠ¡ç³»ç»Ÿå‘¢ï¼Ÿ Java JDKæä¾›çš„Timerç±»å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å·¥å…·ï¼Œé€šè¿‡ç®€å•çš„APIè°ƒç”¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥å®ç°å®šæ—¶ä»»åŠ¡ã€‚ java.util.Timeræ˜¯å¦‚ä½•å®ç°è¿™æ ·çš„å®šæ—¶åŠŸèƒ½çš„ã€‚ 1 2 3 4 5 6 7 8 9 10 11 12 Timer timer = new Timer(); TimerTask task = new TimerTask() { public void run() { System.out.println(\u0026#34;executing now!\u0026#34;); } }; // å»¶è¿Ÿ 1s æ‰“å°ä¸€æ¬¡ timer.schedule(task, 1000) // å»¶è¿Ÿ 1s å›ºå®šæ—¶å»¶æ¯éš” 1s å‘¨æœŸæ‰“å°ä¸€æ¬¡ timer.schedule(task, 1000, 1000); // å»¶è¿Ÿ 1s å›ºå®šé€Ÿç‡æ¯éš” 1s å‘¨æœŸæ‰“å°ä¸€æ¬¡ timer.scheduleAtFixRate(task, 1000, 1000) åŸºæœ¬çš„ä½¿ç”¨æ–¹æ³•ï¼š 1. åˆ›å»ºä¸€ä¸ªTimerå¯¹è±¡ 2. åˆ›å»ºä¸€ä¸ªTimerTaskå¯¹è±¡ï¼Œåœ¨è¿™é‡Œå®ç°runæ–¹æ³• 3. å°†TimerTaskå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œä¼ å…¥åˆ°Timerå¯¹è±¡çš„scheuleæ–¹æ³•ä¸­ï¼Œè¿›è¡Œè°ƒåº¦æ‰§è¡Œã€‚ åŠ å…¥ä»»åŠ¡çš„API â€¢ ä¸€æ¬¡æ€§ä»»åŠ¡çš„API // æŒ‡å®šæ—¶å»¶åè¿è¡Œ // é»˜è®¤fixed-delayæ¨¡å¼ï¼Œå‘¨æœŸæ—¶é—´æŒ‰ä¸Šä¸€æ¬¡æ‰§è¡Œç»“æŸæ—¶é—´è®¡ç®—\n1 2 3 4 5 6 7 8 9 10 public void schedule(TimerTask task, long delay) { if (delay \u0026lt; 0) throw new IllegalArgumentException(\u0026#34;Negative delay.\u0026#34;); sched(task, System.currentTimeMillis()+delay, 0); } // æŒ‡å®šæ—¶é—´ç‚¹è¿è¡Œ public void schedule(TimerTask task, Date time) { sched(task, time.getTime(), 0); } å‘¨æœŸä»»åŠ¡çš„APi // æŒ‡å®šæ—¶å»¶åè¿è¡Œï¼Œä¹‹åä»¥æŒ‡å®šå‘¨æœŸè¿è¡Œ\n1 2 3 4 5 6 7 public void schedule(TimerTask task, long delay, long period) { if (delay \u0026lt; 0) throw new IllegalArgumentException(\u0026#34;Negative delay.\u0026#34;); if (period \u0026lt;= 0) throw new IllegalArgumentException(\u0026#34;Non-positive period.\u0026#34;); sched(task, System.currentTimeMillis()+delay, -period); } // æŒ‡å®šæ—¶é—´ç‚¹è¿è¡Œï¼Œä¹‹åä»¥æŒ‡å®šå‘¨æœŸè¿è¡Œ 1 2 3 4 5 public void schedule(TimerTask task, Date firstTime, long period) { if (period \u0026lt;= 0) throw new IllegalArgumentException(\u0026#34;Non-positive period.\u0026#34;); sched(task, firstTime.getTime(), -period); } // æŒ‡å®šæ—¶å»¶åè¿è¡Œï¼Œä¹‹åä»¥æŒ‡å®šå‘¨æœŸè¿è¡Œ // é»˜è®¤fixedRateæ¨¡å¼ï¼Œå‘¨æœŸæ—¶é—´æŒ‰ä»»åŠ¡æ‰§è¡Œå¼€å§‹æ—¶é—´è®¡ç®—\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 public void scheduleAtFixedRate(TimerTask task, long delay, long period) { if (delay \u0026lt; 0) throw new IllegalArgumentException(\u0026#34;Negative delay.\u0026#34;); if (period \u0026lt;= 0) throw new IllegalArgumentException(\u0026#34;Non-positive period.\u0026#34;); sched(task, System.currentTimeMillis()+delay, period); } public void scheduleAtFixedRate(TimerTask task, Date firstTime, long period) { if (period \u0026lt;= 0) throw new IllegalArgumentException(\u0026#34;Non-positive period.\u0026#34;); sched(task, firstTime.getTime(), period); } å¯ä»¥çœ‹åˆ°APIæ–¹æ³•å†…éƒ¨éƒ½æ˜¯è°ƒç”¨schedæ–¹æ³•ï¼Œå…¶ä¸­timeå‚æ•°ä¸‹ä¸€æ¬¡ä»»åŠ¡æ‰§è¡Œæ—¶é—´ç‚¹ï¼Œæ˜¯é€šè¿‡è®¡ç®—å¾—åˆ°ã€‚periodå‚æ•°ä¸º0çš„è¯åˆ™è¡¨ç¤ºä¸ºä¸€æ¬¡æ€§ä»»åŠ¡ã€‚\nå†…éƒ¨åŸç† å…ˆçœ‹ä¸€ä¸‹Timerçš„ç»„æˆéƒ¨åˆ†ï¼š public class Timer {\n// ä»»åŠ¡é˜Ÿåˆ— private final TaskQueue queue = new TaskQueue(); // å·¥ä½œçº¿ç¨‹ï¼Œå¾ªç¯å–ä»»åŠ¡ private final TimerThread thread = new TimerThread(queue); private final Object threadReaper = new Object() { protected void finalize() throws Throwable { synchronized(queue) { thread.newTasksMayBeScheduled = false; queue.notify(); // In case queue is empty. } } }; // Timerçš„åºåˆ—å·ï¼Œå‘½åå·¥ä½œçº¿ç¨‹ï¼ˆé™æ€å˜é‡ï¼Œåœ¨å¯åŠ¨å¤šä¸ªTimerçš„æƒ…å†µå¯ä»¥ç”¨äºåŒºåˆ†å¯¹åº”çš„å·¥ä½œçº¿ç¨‹ï¼‰ private final static AtomicInteger nextSerialNumber = new AtomicInteger(0); }\nTimeræœ‰3ä¸ªé‡è¦çš„æ¨¡å—ï¼Œåˆ†åˆ«æ˜¯ TimerTask, TaskQueue, TimerThread â€¢ TimerTaskï¼Œå³å¾…æ‰§è¡Œçš„ä»»åŠ¡ â€¢ TaskQueueï¼Œä»»åŠ¡é˜Ÿåˆ—ï¼ŒTimerTaskåŠ å…¥åä¼šæŒ‰æ‰§è¡Œæ—¶é—´è‡ªåŠ¨æ’åº â€¢ TimerThreadï¼Œå·¥ä½œçº¿ç¨‹ï¼ŒçœŸæ­£å¾ªç¯æ‰§è¡ŒTimerTaskçš„çº¿ç¨‹ é‚£ä¹ˆï¼Œåœ¨åŠ å…¥ä»»åŠ¡ä¹‹åï¼Œæ•´ä¸ªTimeræ˜¯æ€ä¹ˆæ ·è¿è¡Œçš„å‘¢ï¼Ÿå¯ä»¥çœ‹ä¸‹é¢çš„ç¤ºæ„å›¾ï¼š\nå¤šä¸ªä»»åŠ¡åŠ å…¥åˆ°TaskQueueä¸­ï¼Œä¼šè‡ªåŠ¨æ’åºï¼Œé˜Ÿé¦–ä»»åŠ¡ä¸€å®šæ˜¯å½“å‰æ‰§è¡Œæ—¶é—´æœ€æ—©çš„ä»»åŠ¡ã€‚TimerThreadä¼šæœ‰ä¸€ä¸ªä¸€ç›´æ‰§è¡Œçš„å¾ªç¯ï¼Œä»TaskQueueå–é˜Ÿé¦–ä»»åŠ¡ï¼Œåˆ¤æ–­å½“å‰æ—¶é—´æ˜¯å¦å·²ç»åˆ°äº†ä»»åŠ¡æ‰§è¡Œæ—¶é—´ç‚¹ï¼Œå¦‚æœæ˜¯åˆ™æ‰§è¡Œä»»åŠ¡ã€‚\nå·¥ä½œçº¿ç¨‹ 1 2 3 4 5 6 1. åˆ›å»ºä»»åŠ¡ï¼Œè°ƒç”¨scheuleæ–¹æ³• public void schedule(TimerTask task, Date firstTime, long period) { if (period \u0026lt;= 0) throw new IllegalArgumentException(\u0026#34;Non-positive period.\u0026#34;); sched(task, firstTime.getTime(), -period); } 1. å†…éƒ¨è°ƒç”¨schedæ–¹æ³• // schedæ–¹æ³•çš„å…¥å‚æ˜¯taskä»»åŠ¡ï¼Œæ‰§è¡Œçš„æ—¶é—´ï¼Œä»¥åŠæ‰§è¡Œå‘¨æœŸ private void sched(TimerTask task, long time, long period) { if (time \u0026lt; 0) throw new IllegalArgumentException(\u0026ldquo;Illegal execution time.\u0026rdquo;); // é˜²æ­¢æº¢å‡º if (Math.abs(period) \u0026gt; (Long.MAX_VALUE \u0026raquo; 1)) period \u0026raquo;= 1;\n// å¯¹queueåŠ é”ï¼Œé¿å…å¹¶å‘å…¥é˜Ÿ synchronized(queue) { if (!thread.newTasksMayBeScheduled) throw new IllegalStateException(\u0026quot;Timer already cancelled.\u0026quot;); // å¯¹taskåŠ é”ï¼Œé¿å…å¹¶å‘ä¿®æ”¹ synchronized(task.lock) { if (task.state != TimerTask.VIRGIN) throw new IllegalStateException( \u0026quot;Task already scheduled or cancelled\u0026quot;); task.nextExecutionTime = time; task.period = period; task.state = TimerTask.SCHEDULED; } // ä»»åŠ¡å…¥é˜Ÿ queue.add(task); /* å¦‚æœä»»åŠ¡æ˜¯é˜Ÿåˆ—å½“å‰ç¬¬ä¸€ä¸ªä»»åŠ¡ï¼Œåˆ™å”¤é†’å·¥ä½œçº¿ç¨‹ è¿™é‡Œæ˜¯å› ä¸ºå·¥ä½œçº¿ç¨‹å¤„ç†å®Œä¸Šä¸€ä¸ªä»»åŠ¡ä¹‹åï¼Œä¼š sleep åˆ°ä¸‹ä¸€ä¸ª task çš„æ‰§è¡Œæ—¶é—´ç‚¹ã€‚ å¦‚æœæœ‰ nextExecutionTime æ›´æ—©çš„ task æ’é˜Ÿåˆ°å‰é¢ï¼Œåˆ™éœ€è¦é©¬ä¸Šå”¤é†’å·¥ä½œçº¿ç¨‹è¿›è¡Œæ£€æŸ¥ é¿å… task å»¶è¿Ÿæ‰§è¡Œ */ if (queue.getMin() == task) queue.notify(); } }\næµç¨‹ä¸­åŠ äº†ä¸€äº›é”ï¼Œç”¨æ¥é¿å…åŒæ—¶åŠ å…¥TimerTaskçš„å¹¶å‘é—®é¢˜ã€‚å¯ä»¥çœ‹åˆ°schedæ–¹æ³•çš„é€»è¾‘æ¯”è¾ƒç®€å•ï¼Œtaskèµ‹å€¼ä¹‹åå…¥é˜Ÿï¼Œé˜Ÿåˆ—ä¼šè‡ªåŠ¨æŒ‰ç…§nextExecutionTimeæ’åºï¼ˆå‡åºï¼Œæ’åºçš„å®ç°åŸç†åé¢ä¼šæåˆ°ï¼‰ã€‚ 1. å·¥ä½œçº¿ç¨‹çš„mainLoop public void run() { try { mainLoop(); } finally { synchronized(queue) { newTasksMayBeScheduled = false; queue.clear(); } } }\n/**\nå·¥ä½œçº¿ç¨‹ä¸»é€»è¾‘ï¼Œå¾ªç¯æ‰§è¡Œ */ private void mainLoop() { while (true) { try { TimerTask task; boolean taskFired; // æ ‡è®°ä»»åŠ¡æ˜¯å¦åº”è¯¥æ‰§è¡Œ synchronized(queue) { // å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œä¸”newTasksMayBeScheduledä¸ºtrueï¼Œæ­¤æ—¶ç­‰å¾…ä»»åŠ¡åŠ å…¥ while (queue.isEmpty() \u0026amp;\u0026amp; newTasksMayBeScheduled) queue.wait();\n// å¦‚æœé˜Ÿåˆ—ä¸ºç©ºï¼Œä¸”newTasksMayBeScheduledä¸ºfalseï¼Œè¯´æ˜æ­¤æ—¶çº¿ç¨‹åº”è¯¥é€€å‡º if (queue.isEmpty()) break; // é˜Ÿåˆ—ä¸ä¸ºç©ºï¼Œå°è¯•ä»é˜Ÿåˆ—ä¸­å–taskï¼ˆç›®æ ‡æ‰§è¡Œæ—¶é—´æœ€æ—©çš„taskï¼‰ long currentTime, executionTime; task = queue.getMin(); synchronized(task.lock) { // æ ¡éªŒtaskçŠ¶æ€ if (task.state == TimerTask.CANCELLED) { queue.removeMin(); continue; } currentTime = System.currentTimeMillis(); executionTime = task.nextExecutionTime; // å½“å‰æ—¶é—´ \u0026gt;= ç›®æ ‡æ‰§è¡Œæ—¶é—´ï¼Œè¯´æ˜ä»»åŠ¡å¯æ‰§è¡Œï¼Œè®¾ç½®taskFired = true if (taskFired = (executionTime\u0026lt;=currentTime)) { if (task.period == 0) { // period == 0 è¯´æ˜æ˜¯éå‘¨æœŸä»»åŠ¡ï¼Œå…ˆä»é˜Ÿåˆ—ç§»é™¤ queue.removeMin(); task.state = TimerTask.EXECUTED; } else { // å‘¨æœŸä»»åŠ¡ï¼Œä¼šæ ¹æ®periodé‡è®¾æ‰§è¡Œæ—¶é—´ï¼Œå†åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­ queue.rescheduleMin( task.period\u0026lt;0 ? currentTime - task.period : executionTime + task.period); } } } if (!taskFired) // ä»»åŠ¡ä¸ºä¸éœ€æ‰§è¡ŒçŠ¶æ€ï¼Œåˆ™ç­‰å¾… queue.wait(executionTime - currentTime); } if (taskFired) // ä»»åŠ¡éœ€è¦æ‰§è¡Œï¼Œåˆ™è°ƒç”¨taskçš„runæ–¹æ³•æ‰§è¡Œï¼Œè¿™é‡Œæ‰§è¡Œçš„å…¶å®å°±æ˜¯è°ƒç”¨æ–¹åˆ›å»ºtaskæ—¶å€™runæ–¹æ³•çš„é€»è¾‘ task.run(); } catch(InterruptedException e) { } } }\nä» mainLoopçš„æºç ä¸­å¯ä»¥çœ‹å‡ºï¼ŒåŸºæœ¬çš„æµç¨‹å¦‚ä¸‹æ‰€ç¤º å½“å‘ç°æ˜¯å‘¨æœŸä»»åŠ¡æ—¶ï¼Œä¼šè®¡ç®—ä¸‹ä¸€æ¬¡ä»»åŠ¡æ‰§è¡Œçš„æ—¶é—´ï¼Œè¿™ä¸ªæ—¶å€™æœ‰ä¸¤ç§è®¡ç®—æ–¹å¼ï¼Œå³å‰é¢APIä¸­çš„ â€¢ scheduleï¼šperiodä¸ºè´Ÿå€¼ï¼Œä¸‹æ¬¡æ‰§è¡Œæ—¶é—´ â€¢ scheduleAtFixedRateï¼šperiodä¸ºæ­£å€¼ queue.rescheduleMin( task.period\u0026lt;0 ? currentTime - task.period : executionTime + task.period);\nä¼˜å…ˆé˜Ÿåˆ— å½“ä»é˜Ÿåˆ—ä¸­ç§»é™¤ä»»åŠ¡ï¼Œæˆ–è€…æ˜¯ä¿®æ”¹ä»»åŠ¡æ‰§è¡Œæ—¶é—´ä¹‹åï¼Œé˜Ÿåˆ—ä¼šè‡ªåŠ¨æ’åºã€‚å§‹ç»ˆä¿æŒæ‰§è¡Œæ—¶é—´æœ€æ—©çš„ä»»åŠ¡åœ¨é˜Ÿé¦–ã€‚ é‚£ä¹ˆè¿™æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ çœ‹ä¸€ä¸‹TaskQueueçš„æºç å°±æ¸…æ¥šäº† class TaskQueue {\nprivate TimerTask[] queue = new TimerTask[128]; private int size = 0; int size() { return size; } void add(TimerTask task) { if (size + 1 == queue.length) queue = Arrays.copyOf(queue, 2*queue.length); queue[++size] = task; fixUp(size); } TimerTask getMin() { return queue[1]; } TimerTask get(int i) { return queue[i]; } void removeMin() { queue[1] = queue[size]; queue[size--] = null; // Drop extra reference to prevent memory leak fixDown(1); } void quickRemove(int i) { assert i \u0026lt;= size; queue[i] = queue[size]; queue[size--] = null; // Drop extra ref to prevent memory leak } void rescheduleMin(long newTime) { queue[1].nextExecutionTime = newTime; fixDown(1); } boolean isEmpty() { return size==0; } void clear() { for (int i=1; i\u0026lt;=size; i++) queue[i] = null; size = 0; } private void fixUp(int k) { while (k \u0026gt; 1) { int j = k \u0026gt;\u0026gt; 1; if (queue[j].nextExecutionTime \u0026lt;= queue[k].nextExecutionTime) break; TimerTask tmp = queue[j]; queue[j] = queue[k]; queue[k] = tmp; k = j; } } private void fixDown(int k) { int j; while ((j = k \u0026lt;\u0026lt; 1) \u0026lt;= size \u0026amp;\u0026amp; j \u0026gt; 0) { if (j \u0026lt; size \u0026amp;\u0026amp; queue[j].nextExecutionTime \u0026gt; queue[j+1].nextExecutionTime) j++; // j indexes smallest kid if (queue[k].nextExecutionTime \u0026lt;= queue[j].nextExecutionTime) break; TimerTask tmp = queue[j]; queue[j] = queue[k]; queue[k] = tmp; k = j; } } void heapify() { for (int i = size/2; i \u0026gt;= 1; i--) fixDown(i); } }\nå¯ä»¥çœ‹åˆ°å…¶å®TaskQueueå†…éƒ¨å°±æ˜¯åŸºäºæ•°ç»„å®ç°äº†ä¸€ä¸ªæœ€å°å † (balanced binary heap), å †ä¸­å…ƒç´ æ ¹æ® æ‰§è¡Œæ—¶é—´nextExecutionTimeæ’åºï¼Œæ‰§è¡Œæ—¶é—´æœ€æ—©çš„ä»»åŠ¡å§‹ç»ˆä¼šæ’åœ¨å †é¡¶ã€‚è¿™æ ·å·¥ä½œçº¿ç¨‹æ¯æ¬¡æ£€æŸ¥çš„ä»»åŠ¡å°±æ˜¯å½“å‰æœ€æ—©éœ€è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚å †çš„åˆå§‹å¤§å°ä¸º128ï¼Œæœ‰ç®€å•çš„å€å¢æ‰©å®¹æœºåˆ¶ã€‚ å…¶ä»–æ–¹æ³• TimerTask ä»»åŠ¡æœ‰å››ç§çŠ¶æ€ï¼š â€¢ VIRGINï¼š ä»»åŠ¡åˆšåˆšåˆ›å»ºï¼Œè¿˜æ²¡æœ‰schedule â€¢ SCHEDULEDï¼šä»»åŠ¡å·²ç»scheduleï¼Œè¿›å…¥åˆ°é˜Ÿåˆ—ä¸­ â€¢ EXECUTEDï¼š ä»»åŠ¡å·²æ‰§è¡Œ/æ‰§è¡Œä¸­ â€¢ CANCELLEDï¼šä»»åŠ¡å·²å–æ¶ˆ Timer è¿˜æä¾›äº†cancelå’Œpurgeæ–¹æ³• â€¢ cancelï¼Œæ¸…é™¤é˜Ÿåˆ—ä¸­æ‰€æœ‰ä»»åŠ¡ï¼Œå·¥ä½œçº¿ç¨‹é€€å‡ºã€‚ â€¢ purgeï¼Œæ¸…é™¤é˜Ÿåˆ—ä¸­æ‰€æœ‰çŠ¶æ€ç½®ä¸ºå–æ¶ˆçš„ä»»åŠ¡ã€‚ å¸¸è§åº”ç”¨ Javaçš„Timerå¹¿æ³›è¢«ç”¨äºå®ç°å¼‚æ­¥ä»»åŠ¡ç³»ç»Ÿï¼Œåœ¨ä¸€äº›å¼€æºé¡¹ç›®ä¸­ä¹Ÿå¾ˆå¸¸è§ï¼Œ ä¾‹å¦‚æ¶ˆæ¯é˜Ÿåˆ—RocketMQçš„ å»¶æ—¶æ¶ˆæ¯/æ¶ˆè´¹é‡è¯• ä¸­çš„å¼‚æ­¥é€»è¾‘ã€‚ public void start() { if (started.compareAndSet(false, true)) { super.load(); // æ–°å»ºäº†ä¸€ä¸ªtimer this.timer = new Timer(\u0026ldquo;ScheduleMessageTimerThread\u0026rdquo;, true); for (Map.Entry\u0026lt;Integer, Long\u0026gt; entry : this.delayLevelTable.entrySet()) { // \u0026hellip; }\n// è°ƒç”¨äº†Timerçš„scheduleAtFixedRateæ–¹æ³• this.timer.scheduleAtFixedRate(new TimerTask() { @Override public void run() { try { if (started.get()) { ScheduleMessageService.this.persist(); } } catch (Throwable e) { log.error(\u0026quot;scheduleAtFixedRate flush exception\u0026quot;, e); } } }, 10000, this.defaultMessageStore.getMessageStoreConfig().getFlushDelayOffsetInterval()); } }\nä¸Šé¢è¿™æ®µä»£ç æ˜¯RocketMQçš„å»¶æ—¶æ¶ˆæ¯æŠ•é€’ä»»åŠ¡ ScheduleMessageService çš„æ ¸å¿ƒé€»è¾‘ï¼Œå°±æ˜¯ä½¿ç”¨äº†Timerå®ç°çš„å¼‚æ­¥å®šæ—¶ä»»åŠ¡ã€‚\næ€»ç»“ ä¸ç®¡æ˜¯å®ç°ç®€å•çš„å¼‚æ­¥é€»è¾‘ï¼Œè¿˜æ˜¯æ„å»ºå¤æ‚çš„ä»»åŠ¡ç³»ç»Ÿï¼ŒJavaçš„Timerç¡®å®æ˜¯ä¸€ä¸ªæ–¹ä¾¿å®ç”¨ï¼Œè€Œä¸”åˆç¨³å®šçš„å·¥å…·ç±»ã€‚ä»Timerçš„å®ç°åŸç†ï¼Œ æˆ‘ä»¬ä¹Ÿå¯ä»¥çª¥è§å®šæ—¶ç³»ç»Ÿçš„ä¸€ä¸ªåŸºç¡€å®ç°ï¼šçº¿ç¨‹å¾ªç¯ + ä¼˜å…ˆé˜Ÿåˆ—ã€‚è¿™å¯¹äºæˆ‘ä»¬è‡ªå·±å»è®¾è®¡ç›¸å…³çš„ç³»ç»Ÿï¼Œä¹Ÿä¼šæœ‰ä¸€å®šçš„å¯å‘ã€‚ ","permalink":"https://zpc2222.github.io/posts/tech/java/java-timer/","summary":"èƒŒæ™¯å’Œä½¿ç”¨ æ—¥å¸¸å®ç°å„ç§æœåŠ¡ç«¯ç³»ç»Ÿæ—¶ï¼Œæˆ‘ä»¬ä¸€å®šä¼šæœ‰ä¸€äº›å®šæ—¶ä»»åŠ¡çš„éœ€æ±‚ã€‚æ¯”å¦‚ä¼šè®®æå‰åŠå°æ—¶è‡ªåŠ¨æé†’ï¼Œå¼‚æ­¥ä»»åŠ¡å®šæ—¶/å‘¨æœŸæ‰§è¡Œç­‰ã€‚é‚£ä¹ˆå¦‚ä½•å»å®ç°è¿™æ ·","title":"å®šæ—¶ä»»åŠ¡ç”¨æ³•"},{"content":"å¸¸ç”¨è¯­æ³• æ–‡ä»¶æ·»åŠ åŠæäº¤ 1 2 3 $ git add test.txt\t//æ·»åŠ  $ git commit -m \u0026#34;wrote a test file\u0026#34;\t//æäº¤ $ git commit -m \u0026#34;add 3 files.\u0026#34;\t//ä¸€æ¬¡æ€§æäº¤å¤šä¸ªæ–‡ä»¶ æ”¹æ—¥å¿— 1 2 3 4 5 git rebase -i git commit --amend -ã€‹ä¿®æ”¹é‡Œé¢æ—¥å¿—ä¿¡æ¯ï¼Œvimä¿®æ”¹ git rebase --continue git push origin HEAD:refs/for/dev git remote prune origin ä¿®æ”¹å·²æäº¤æ–‡ä»¶ devåˆ†æ”¯ 1 2 3 4 5 6 git rebase -i dev~1 git rebase -i HEAD~3 è¡¨ç¤ºè¦ä¿®æ”¹å½“å‰ç‰ˆæœ¬çš„å€’æ•°ç¬¬ä¸‰æ¬¡çŠ¶æ€,å¦‚æœä½ è¦ä¿®æ”¹å“ªä¸ªï¼Œå°±æŠŠé‚£è¡Œçš„pickæ”¹æˆedit pickä¿®æ”¹ä¸ºedit ï¼Œä¿å­˜ git add . git rebase --continue git push origin HEAD:refs/for/dev 1 2 3 4 5 6 7 8 9 10 11 12 (1) git reset --soft commitid3 (2) git status å¯ä»¥çœ‹åˆ°ç»¿è‰²çš„å·²ç»addè¿‡çš„æ–‡ä»¶ï¼ˆå³commitid1å’Œcommitid2çš„æ”¹åŠ¨ï¼‰ (3) git commit -s #æ·»åŠ è¯„è®ºï¼Œä¿å­˜é€€å‡ºåä¼šç”Ÿæˆchange_id (4) git log å¯ä»¥çœ‹åˆ°å·²ç»æœ‰äº†change_id (5) git push origin HEAD:refs/for/dev å·¥ä½œåˆ†æ”¯ git stash å¯ç”¨æ¥æš‚å­˜å½“å‰æ­£åœ¨è¿›è¡Œçš„å·¥ä½œï¼Œ æ¯”å¦‚æƒ³pull æœ€æ–°ä»£ç ï¼Œ åˆä¸æƒ³åŠ æ–°commitï¼Œ æˆ–è€…å¦å¤–ä¸€ç§æƒ…å†µï¼Œä¸ºäº†fix ä¸€ä¸ªç´§æ€¥çš„bug, å…ˆstash, ä½¿è¿”å›åˆ°è‡ªå·±ä¸Šä¸€ä¸ªcommit, æ”¹å®Œbugä¹‹åå†stash pop, ç»§ç»­åŸæ¥çš„å·¥ä½œã€‚ git stash pop gitå¼ºåˆ¶è¦†ç›–æœ¬åœ°ä»“åº“ æ‹‰å–æ‰€æœ‰æ›´æ–°ï¼Œä¸åŒæ­¥ï¼›\ngit fetch \u0026ndash;all\næœ¬åœ°ä»£ç åŒæ­¥çº¿ä¸Šæœ€æ–°ç‰ˆæœ¬(ä¼šè¦†ç›–æœ¬åœ°æ‰€æœ‰ä¸è¿œç¨‹ä»“åº“ä¸ŠåŒåçš„æ–‡ä»¶)ï¼›`\ngit reset \u0026ndash;hard origin/master\nå†æ›´æ–°ä¸€æ¬¡ï¼ˆå…¶å®ä¹Ÿå¯ä»¥ä¸ç”¨ï¼Œç¬¬äºŒæ­¥å‘½ä»¤åšè¿‡äº†å…¶å®ï¼‰`\ngit pull\ngit fetch \u0026ndash;all \u0026amp;\u0026amp; git reset \u0026ndash;hard origin/master \u0026amp;\u0026amp; git pull\nç»‘å®šæœ¬åœ°åˆ†æ”¯ä¸è¿œç«¯çš„åˆ†æ”¯ï¼Œç›´æ¥pull 1 git branch --set-upstream-to=origin/work work å®‰è£…åŠé…ç½® æŒ‡å®šåç§°å’Œé‚®ç®± 1 2 3 $ git config --global user.name \u0026#34;Your Name\u0026#34; $ git config --global user.email \u0026#34;email@example.com\u0026#34; å¦‚æœç”¨äº†\u0026ndash;globalé€‰é¡¹ï¼Œé‚£ä¹ˆæ›´æ”¹çš„é…ç½®æ–‡ä»¶å°±æ˜¯ä½äºä½ ç”¨æˆ·ä¸»ç›®å½•çš„é‚£ä¸ªï¼Œä»¥åä½ æ‰€æœ‰çš„é¡¹ç›®éƒ½ä¼šé»˜è®¤ä½¿ç”¨è¿™é‡Œé…ç½®çš„ç”¨æˆ·ä¿¡æ¯ã€‚å¦‚æœè¦åœ¨æŸä¸ªç‰¹å®šçš„é¡¹ç›®ä¸­ä½¿ç”¨å…¶ä»–åå­—æˆ–è€…ç”µé‚®ï¼Œåªè¦å»æ‰\u0026ndash;globalé€‰é¡¹é‡æ–°é…ç½®å³å¯ï¼Œæ–°çš„è®¾å®šä¿å­˜åœ¨å½“å‰é¡¹ç›®çš„./git/configæ–‡ä»¶é‡Œ\nå…‹éš†ä»“åº“ 1 2 3 4 5 git clone git://github.com/schacon/grit.git å¦‚æœå¸Œæœ›åœ¨å…‹éš†çš„æ—¶å€™ï¼Œè‡ªå·±å®šä¹‰è¦æ–°å»ºçš„é¡¹ç›®ç›®å½•åç§°ï¼Œå¯ä»¥åœ¨ä¸Šé¢çš„å‘½ä»¤æœ€åæŒ‡å®šï¼š $ git clone git://github.com/schacon/grit.git myGit å”¯ä¸€çš„å·®åˆ«å°±æ˜¯ï¼Œç°åœ¨æ–°å»ºçš„ç›®å½•æˆäº†mygritï¼Œå…¶å®ƒçš„éƒ½å’Œä¸Šè¾¹çš„ä¸€æ ·ã€‚ æ£€æŸ¥å½“å‰æ–‡ä»¶çŠ¶æ€ï¼š 1 $ git status å¿½ç•¥æŸäº›æ–‡ä»¶ï¼šå¯ä»¥åˆ›å»ºä¸€ä¸ªåä¸º.gitignoreçš„æ–‡ä»¶ï¼Œåˆ—å‡ºè¦å¿½ç•¥çš„æ–‡ä»¶æ¨¡å¼ã€‚\nè¦æŸ¥çœ‹æ–‡ä»¶æ›´æ–°å“ªäº›éƒ¨åˆ† ä¸åŠ å‚æ•°ç›´æ¥è¾“å…¥ï¼š\n1 $ git diff ç‰ˆæœ¬æ§åˆ¶ 1 2 3 4 5 6 7 8 $ git log\t//æŸ¥çœ‹æäº¤å†å²è®°å½•ï¼Œä»æœ€è¿‘åˆ°æœ€è¿œï¼Œå¯ä»¥çœ‹åˆ°3æ¬¡ $ git log --pretty=oneline\t//åŠ å‚ï¼Œç®€æ´æŸ¥çœ‹ $ git reflog\t//æŸ¥çœ‹æ¯ä¸€æ¬¡ä¿®æ”¹å†å² $ cat test.txt\t//æŸ¥çœ‹æ–‡ä»¶å†…å®¹ $ git status\t//æŸ¥çœ‹å·¥ä½œåŒºä¸­æ–‡ä»¶å½“å‰çŠ¶æ€ $ git reset --hard HEAD^ï¼ˆHEAD~100ï¼‰ï¼ˆcommit idï¼‰\t//å›é€€ç‰ˆæœ¬ $ git checkout -- test.txt\t//ä¸¢å¼ƒå·¥ä½œåŒºçš„ä¿®æ”¹ï¼Œå³æ’¤é”€ä¿®æ”¹ $ git reset HEAD test.txt\t//ä¸¢å¼ƒæš‚å­˜åŒºçš„ä¿®æ”¹ï¼ˆè‹¥å·²æäº¤ï¼Œåˆ™å›é€€ï¼‰ åˆ é™¤æ–‡ä»¶ 1 2 3 4 5 6 $ rm test.txt //ç›´æ¥åˆ é™¤ $ git rm test.txt $ git commit -m \u0026#34;remove test.txt\u0026#34; //åˆ é”™äº†ï¼Œæ¢å¤ $ git checkout -- test.txt ä¸å¸¸ç”¨å‘½ä»¤ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 $ git tag v1.0\t//æ‰“æ ‡ç­¾ $ git tag -a v0.1 -m \u0026#34;version 0.1 released\u0026#34; 1094adb //æŒ‡å®šæ ‡ç­¾åå’Œè¯´æ˜æ–‡å­— $ git tag\t//æŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾ //è‹¥æ˜¯å¿˜è®°æ‰“ï¼Œåˆ™æŸ¥æ‰¾å†å²æäº¤commit id ï¼Œå†æ‰“ä¸Š $ git log --pretty=oneline --abbrev-commit $ git tag v0.9 f52c633 $ git show v0.9\t//æŸ¥çœ‹æ ‡ç­¾è¯¦ç»†ä¿¡æ¯ $ git tag -d v0.1\t//åˆ é™¤æ ‡ç­¾ $ git push origin v1.0\t//æ¨é€æ ‡ç­¾åˆ°è¿œç¨‹ $ git push origin â€“tags\t//ä¸€æ¬¡æ€§æ¨é€å…¨éƒ¨æœ¬åœ°æ ‡ç­¾ //åˆ é™¤æ ‡ç­¾ï¼Œï¼ˆè‹¥å·²æ¨é€åˆ°è¿œç¨‹ï¼Œå…ˆä»æœ¬åœ°åˆ é™¤ï¼Œä»è¿œç¨‹åˆ é™¤ï¼‰ $ git tag -d v0.9 $ git push origin :refs/tags/v0.9 $ git config --global alias.st status\t//é…ç½®åˆ«å $ git config --global alias.unstage \u0026#39;reset HEAD\u0026#39; //é…ç½®æ“ä½œåˆ«å $ git config --global alias.last \u0026#39;log -1\u0026#39;\t//æ˜¾ç¤ºæœ€åä¸€æ¬¡æäº¤ä¿¡æ¯ $ git last\t//æ˜¾ç¤ºæœ€è¿‘ä¸€æ¬¡çš„æäº¤ $git config --global alias.lg \u0026#34;log --color --graph --pretty=format:\u0026#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)\u0026lt;%an\u0026gt;%Creset\u0026#39; --abbrev-commit\u0026#34; //é¢œè‰² $ cat .git/config //æŸ¥çœ‹æ¯ä¸ªä»“åº“çš„gité…ç½®æ–‡ä»¶ $ cat .gitconfig //æŸ¥çœ‹å½“å‰ç”¨æˆ·çš„gité…ç½®æ–‡ä»¶ $ git checkout -- test.txt å–æ¶ˆå¯¹æ–‡ä»¶çš„ä¿®æ”¹ Tips å…¨å±€é…ç½®æ–‡ä»¶åŠcommitæ¨¡æ¿æŒ‡å®š git config \u0026ndash;global \u0026ndash;edit\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 [alias] s = status br = branch co = checkout df = diff amend = commit --amend --no-edit cs = commit -s u = add -u pub = \u0026#34;!f() { git push origin HEAD:refs/for/$(git rev-parse --abbrev-ref HEAD); }; f\u0026#34; sub = \u0026#34;!f() { git pull --rebase origin $(git rev-parse --abbrev-ref HEAD); }; f\u0026#34; draft = \u0026#34;!f() { git push origin HEAD:refs/drafts/$(git rev-parse --abbrev-ref HEAD); }; f\u0026#34; [user] name=Zpc email=zpc@test.com [core] editor=vi autocrlf=false safecrlf=false [commit] template=D:\\\\xxx.template [gui] encoding=utf-8 git githubåœ¨å†…ç½‘ç¯å¢ƒè®¾ç½®ä»£ç†è®¿é—®æŠ¥é”™ï¼š fatal: unable to access \u0026lsquo;https://github.com/XXX': Could not resolve host: github.com Unable to fetch in submodule path â€˜XXX\u0026rsquo;\nè§£å†³ï¼š\n1 2 $ git config --global http.proxy 127.0.0.1:10809 $ git config --global https.proxy https://10.xxx.xxx.xxx:1234 é…ç½®ä¸ºä»£ç†ï¼Œå³å¯\nUnable to negotiate with xxx.xxx.xxx.xxx port XX: no matching host key type found. Their offer: ssh-rsa,ssh-dss fatal: Could not read from remote repository. å‰æï¼š åœ¨æ’é™¤æ²¡æœ‰é…ç½®å…¬é’¥çš„æƒ…å†µä¸‹ã€‚\nåœ¨Gitçš„å®‰è£…ç›®å½•ä¸‹ Git \u0026gt; etc \u0026gt; ssh æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ° ssh_config æ–‡ä»¶ ã€‚ åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ä¸€ä¸‹ä»£ç ã€‚ 1 2 3 4 5 # æ³¨æ„è¿™é‡Œçš„ xxx.com æ˜¯æ²¡æœ‰ https:// çš„ # å¦‚ https://github.com/ï¼Œ å¡«å†™ github.com å³å¯ï¼ˆæœ€åçš„æ–œæ†ä¹Ÿä¸èƒ½è¦ï¼‰ã€‚ Host xxx.com HostkeyAlgorithms +ssh-rsa PubkeyAcceptedAlgorithms +ssh-rsa ","permalink":"https://zpc2222.github.io/posts/tools/git-common/","summary":"å¸¸ç”¨è¯­æ³• æ–‡ä»¶æ·»åŠ åŠæäº¤ 1 2 3 $ git add test.txt //æ·»åŠ  $ git commit -m \u0026#34;wrote a test file\u0026#34; //æäº¤ $ git commit -m \u0026#34;add 3 files.\u0026#34; //ä¸€æ¬¡æ€§æäº¤å¤šä¸ªæ–‡ä»¶ æ”¹æ—¥å¿— 1 2 3 4 5 git rebase -i git commit --amend -ã€‹ä¿®æ”¹","title":"Gitä½¿ç”¨"},{"content":"ä»€ä¹ˆæ˜¯MybatisPlus MybatisPluså¯ä»¥èŠ‚çœå¤§é‡æ—¶é—´ï¼Œæ‰€æœ‰çš„CRUDä»£ç éƒ½å¯ä»¥è‡ªåŠ¨åŒ–å®Œæˆ MyBatis-Plusæ˜¯ä¸€ä¸ªMyBatisçš„å¢å¼ºå·¥å…·ï¼Œåœ¨ MyBatis çš„åŸºç¡€ä¸Šåªåšå¢å¼ºä¸åšæ”¹å˜ï¼Œä¸ºç®€åŒ–å¼€å‘ã€æé«˜æ•ˆç‡è€Œç”Ÿã€‚ å®˜ç½‘ï¼šhttps://baomidou.com/ ä½¿ç”¨ é…ç½® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 server: port: 8082 servlet: context-path: /oc-app spring: jackson: time-zone: GMT+8 datasource: dynamic: primary: db1 datasource: db1: # æ•°æ®åº“çš„JDBCé“¾æ¥ url: jdbc:mysql://127.0.0.1:3306/test?createDatabaseIfNotExist=true\u0026amp;useUnicode=true\u0026amp;characterEncoding=utf8\u0026amp;useSSL=false\u0026amp;useLegacyDatetimeCode=false\u0026amp;\u0026amp;serverTimezone=Asia/Shanghai # æ•°æ®åº“ç”¨æˆ·å username: root # æ•°æ®åº“å¯†ç  password: 123456 db2: # æ•°æ®åº“çš„JDBCé“¾æ¥ url: jdbc:mysql://127.0.0.1:3306/admin?createDatabaseIfNotExist=true\u0026amp;useUnicode=true\u0026amp;characterEncoding=utf8\u0026amp;useSSL=false\u0026amp;useLegacyDatetimeCode=false\u0026amp;\u0026amp;serverTimezone=Asia/Shanghai # æ•°æ®åº“ç”¨æˆ·å username: root # æ•°æ®åº“å¯†ç  password: 654321 flyway: # æ˜¯å¦å¯ç”¨flyway enabled: true # ç¼–ç æ ¼å¼ï¼Œé»˜è®¤UTF-8 encoding: UTF-8 # è¿ç§»sqlè„šæœ¬æ–‡ä»¶å­˜æ”¾è·¯å¾„ï¼Œé»˜è®¤db/migration locations: classpath:db/migration # è¿ç§»sqlè„šæœ¬æ–‡ä»¶åç§°çš„å‰ç¼€ï¼Œé»˜è®¤V sql-migration-prefix: V # è¿ç§»sqlè„šæœ¬æ–‡ä»¶åç§°çš„åˆ†éš”ç¬¦ï¼Œé»˜è®¤2ä¸ªä¸‹åˆ’çº¿__ sql-migration-separator: __ # è¿ç§»sqlè„šæœ¬æ–‡ä»¶åç§°çš„åç¼€ sql-migration-suffixes: .sql # è¿ç§»æ—¶æ˜¯å¦è¿›è¡Œæ ¡éªŒï¼Œé»˜è®¤true validate-on-migrate: true # å½“è¿ç§»å‘ç°æ•°æ®åº“éç©ºä¸”å­˜åœ¨æ²¡æœ‰å…ƒæ•°æ®çš„è¡¨æ—¶ï¼Œè‡ªåŠ¨æ‰§è¡ŒåŸºå‡†è¿ç§»ï¼Œæ–°å»ºschema_versionè¡¨ baseline-on-migrate: true redis: host: 192.168.1.1 port: 6379 password: admin@123! cache: type: REDIS redis: time-to-live: 120 mvc: pathmatch: matching-strategy: ant_path_matcher main: allow-bean-definition-overriding: true # mybatis plus é…ç½® mybatis-plus: configuration: # ä¸‹åˆ’çº¿è½¬é©¼å³° map-underscore-to-camel-case: true #æ—¥å¿—æ‰“å° log-impl: org.apache.ibatis.logging.stdout.StdOutImpl # æ‰«æ xml æ–‡ä»¶ä½ç½® mapper-locations: classpath:mapper/*Mapper.xml global-config: db-config: # ä½¿ç”¨é›ªèŠ±ç®—æ³•ä¸»é”®å¡«å……ç­–ç•¥ id-type: assign_id åœ¨ Spring Boot å¯åŠ¨ç±»ä¸­æ·»åŠ Â @MapperScanÂ æ³¨è§£ï¼Œæ‰«æ Mapper æ–‡ä»¶å¤¹ï¼š\n1 2 3 4 5 6 7 @SpringBootApplication @MapperScan(\u0026#34;com.xx.mapper\u0026#34;) public class Application { public static void main(String[] args) { SpringApplication.run(Application.class, args); } } å®ç° å®ä½“ç±»\n1 2 3 4 5 6 7 @Data public class User { private Long id; private String name; private Integer age; private String email; } ç¼–å†™ Mapper åŒ…ä¸‹çš„Â UserMapperæ¥å£\n1 2 3 public interface UserMapper extends BaseMapper\u0026lt;User\u0026gt; { } serviceå±‚åŠå®ç°ç±»\n1 2 3 4 5 6 7 public interface UserService extends IService\u0026lt;User\u0026gt; { } @Service public class UserServiceImpl extends ServiceImpl\u0026lt;UserMapper, User\u0026gt; implements UserService { } æ³¨è§£ @TableId(value = \u0026ldquo;user_id\u0026rdquo;, type = IdType.ASSIGN_ID)\nprivate Long userId; åˆ†é… ID(ä¸»é”®ç±»å‹ä¸º Number(Long å’Œ Integer)æˆ– String)(since 3.3.0),ä½¿ç”¨æ¥å£IdentifierGeneratorçš„æ–¹æ³•nextId(é»˜è®¤å®ç°ç±»ä¸ºDefaultIdentifierGeneratoré›ªèŠ±ç®—æ³•) å¦‚ä¸Šä½¿ç”¨çš„idä¸ºé›ªèŠ±ç®—æ³•ç”Ÿæˆçš„ï¼Œæ¯”è¾ƒé•¿ï¼Œå»ºè®®ä½¿ç”¨è‡ªå¢AUTOï¼Œæ•°æ®åº“ä¸è¿›è¡Œç‰©ç†åˆ é™¤ï¼Œè€Œæ˜¯é€»è¾‘åˆ é™¤\nè¡¨è¾¾å¼ä¸sqlå¯¹æ¯” 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 eq == equal ç­‰äº ne == not equal ä¸ç­‰äº gt == greater than å¤§äº lt == less than å°äº ge == greater than or equal å¤§äºç­‰äº le == less than or equal å°äºç­‰äº in == in åŒ…å«ï¼ˆæ•°ç»„ï¼‰ isNull == ç­‰äºnull isNotNull == ä¸ç­‰äºnull orderByDesc == å€’åºæ’åº orderByAsc == å‡åºæ’åº or == æˆ–è€… and == å¹¶ä¸” between == åœ¨2ä¸ªæ¡ä»¶ä¹‹é—´(åŒ…æ‹¬è¾¹ç•Œå€¼) like == æ¨¡ç³ŠæŸ¥è¯¢ clear == æ¸…é™¤ apply == æ‹¼æ¥sql lambda == ä½¿ç”¨lambdaè¡¨è¾¾å¼ exists == ä¸´æ—¶è¡¨ å¸¸ç”¨æ³¨è§£ å®ä½“ç±»ä¸­åˆ›å»ºæ—¶é—´ä»¥åŠä¿®æ”¹æ—¶é—´å¯ä»¥åŠ å…¥\n1 2 3 4 5 6 7 8 9 10 11 12 13 /** * åˆ›å»ºæ—¶é—´ */ @JsonFormat(pattern = \u0026#34;yyyy-MM-dd HH:mm:ss\u0026#34;) @TableField(fill = FieldFill.INSERT) private LocalDateTime createTime; /** * æ›´æ–°æ—¶é—´ */ @JsonFormat(pattern = \u0026#34;yyyy-MM-dd HH:mm:ss\u0026#34;) @TableField(fill = FieldFill.INSERT_UPDATE) private LocalDateTime updateTime; ç¼–å†™å¤„ç†å™¨æ¥å¤„ç†è¿™ä¸ªæ³¨é‡Šå°±ä¼šåœ¨å†™æ“ä½œæ—¶å€™è‡ªåŠ¨ç”Ÿæˆå½“å‰æ—¶é—´\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 /** * å®ç°è‡ªåŠ¨åŒ–æ“ä½œåˆ›å»ºæ—¶é—´å’Œä¿®æ”¹æ—¶é—´ */ @Component public class DateTimeFillConfig implements MetaObjectHandler { @Override public void insertFill(MetaObject metaObject) { //è®¾ç½®å±æ€§å€¼ this.setFieldValByName(\u0026#34;createdTime\u0026#34;, LocalDateTime.now(),metaObject); this.setFieldValByName(\u0026#34;updatedTime\u0026#34;,LocalDateTime.now(),metaObject); } @Override public void updateFill(MetaObject metaObject) { this.setFieldValByName(\u0026#34;updatedTime\u0026#34;,LocalDateTime.now(),metaObject); } } å¤æ‚æŸ¥è¯¢æ¡ˆä¾‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 //å°è£…æŸ¥è¯¢æ¡ä»¶ QueryWrapper\u0026lt;User\u0026gt; queryWrapper = new QueryWrapper\u0026lt;\u0026gt;(); //æ¨¡ç³ŠæŸ¥è¯¢ queryWrapper.like(\u0026#34;a.nick_name\u0026#34;, vo.getName()); // æ‰‹æœºå·/ç”¨æˆ·åç§°æŸ¥è¯¢,å½“ç”¨æˆ·åä¸ºä¸€ä¸²æ•°å­—æ—¶é»˜è®¤ä½¿ç”¨æ‰‹æœºå·æŸ¥è¯¢ if (StringUtils.isNotBlank(vo.getNameOrMobile())) { if (NumberUtils.isDigits(vo.getNameOrMobile())) { queryWrapper.and(wq-\u0026gt;wq.like(\u0026#34;b.mobile\u0026#34;, vo.getNameOrMobile()) .or().like(\u0026#34;b.nick_name\u0026#34;,vo.getNameOrMobile())); } else { queryWrapper.like(\u0026#34;b.nick_name\u0026#34;, vo.getNameOrMobile()); } } // æ—¶é—´èŒƒå›´æŸ¥è¯¢ if (StringUtils.isNotBlank(vo.getStartTime())) { queryWrapper.ge(\u0026#34;a.created_time\u0026#34;, vo.getStartTime()); } if (StringUtils.isNotBlank(vo.getEndTime())) { queryWrapper.le(\u0026#34;a.created_time\u0026#34;, vo.getEndTime()); } // ç²¾å‡†æŸ¥è¯¢ if (StringUtils.isNotBlank(vo.getId())) { queryWrapper.eq(\u0026#34;a.id\u0026#34;, vo.getId()); } //çŠ¶æ€ä¸åœ¨å…¶ä¸­çš„ if (StringUtils.isBlank(vo.getStatus()) \u0026amp;\u0026amp; \u0026#34;2\u0026#34;.equals(vo.getType())) { queryWrapper.notIn(\u0026#34;a.status\u0026#34;, List.of(1, 2, 3)); } queryWrapper.notIn(\u0026#34;a.status\u0026#34;, List.of(1,2,3)); // æ—¶é—´è¿›è¡Œæ’åº // whereè¯­å¥åé¢ä¸èƒ½ç›´æ¥å¢åŠ æ’åºï¼Œå¯¼è‡´sqlè§£æå¼‚å¸¸ if (!queryWrapper.isEmptyOfWhere()) { queryWrapper.orderByDesc(\u0026#34;a.created_time\u0026#34;); } IPage\u0026lt;User\u0026gt; pages = getBaseMapper().getPageList(pager, queryWrapper); ","permalink":"https://zpc2222.github.io/posts/tech/mybatisplus/","summary":"ä»€ä¹ˆæ˜¯MybatisPlus MybatisPluså¯ä»¥èŠ‚çœå¤§é‡æ—¶é—´ï¼Œæ‰€æœ‰çš„CRUDä»£ç éƒ½å¯ä»¥è‡ªåŠ¨åŒ–å®Œæˆ MyBatis-Plusæ˜¯ä¸€ä¸ªMyBa","title":"MybatisPluså¸¸ç”¨"},{"content":"Javaå†™å…¥MySQL ä¸»é”®å·²å­˜åœ¨ï¼Œåˆ™å¿½ç•¥ï¼Œä¸å­˜åœ¨åˆ™æ’å…¥\n1 2 3 INSERT INTO `global_config`(`id`,`name`,`description`,`value`,`status`) SELECT 3,\u0026#34;order_auto_cancel_time\u0026#34;,\u0026#34;è®¢å•è¶…æ—¶è‡ªåŠ¨å–æ¶ˆæ—¶é—´:åˆ†é’Ÿ\u0026#34;,\u0026#34;20\u0026#34;,1 WHERE NOT EXISTS(SELECT * FROM global_config WHERE `name` = \u0026#39;order_auto_cancel_time\u0026#39;); å¯¼å…¥å¯¼å‡º å¯¼å‡ºæŒ‡å®šçš„è¡¨\n1 mysqldump -uroot -p -t fdb --tables t_role_resource t_interface_resource\u0026gt; /docker-entrypoint-initdb.d/data_table.sql mysql8å¯†ç ä¸å…¼å®¹é—®é¢˜ 1 2 3 4 5 docker exec -it mysql bash mysql -uroot -p use mysql ALTER USER \u0026#39;root\u0026#39;@\u0026#39;%\u0026#39; IDENTIFIED WITH mysql_native_password BY \u0026#39;12!@QWqw\u0026#39;; flush privileges; å†…å­˜æº¢å‡º 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 å‰ç«¯é¡µé¢é•¿æ—¶é—´æ— å“åº”ï¼Œåå°æŸ¥çœ‹erroræ—¥å¿—å‘ç°æŠ¥é”™ï¼š Out of sort memory, consider increasing server sort buffer sizeã€‚ å­—é¢æ„æ€å°±æ˜¯ sortå†…å­˜æº¢å‡ºï¼Œè€ƒè™‘å¢åŠ æœåŠ¡å™¨çš„æ’åºç¼“å†²åŒº(sort_buffer_size)å¤§å°ã€‚ è¿›å…¥dockerçš„MySQLæœåŠ¡å†…ï¼š docker exec -it mysql mysql -uroot -p mysql\u0026gt; show variables like \u0026#39;%sort_buffer_size%\u0026#39;; +-------------------------+---------+ | Variable_name | Value | +-------------------------+---------+ | innodb_sort_buffer_size | 1048576 | | myisam_sort_buffer_size | 8388608 | | sort_buffer_size | 262144 | +-------------------------+---------+ 3 rows in set (0.01 sec) è¿™é‡Œçš„sort_buffer_size=262144 ï¼Œ262144/1024=256,156kæ¯”è¾ƒå°ï¼Œéœ€è¦æ‰©å¤§ç‚¹ï¼Œåˆ°2Mï¼ˆ16Gå†…å­˜å¯ä»¥æ‰©è¿™ä¹ˆå¤§ï¼‰ mysql\u0026gt; SET GLOBAL sort_buffer_size = 210241024; Query OK, 0 rows affected (0.00 sec) mysql\u0026gt; exit ","permalink":"https://zpc2222.github.io/posts/tech/mysql/","summary":"Javaå†™å…¥MySQL ä¸»é”®å·²å­˜åœ¨ï¼Œåˆ™å¿½ç•¥ï¼Œä¸å­˜åœ¨åˆ™æ’å…¥ 1 2 3 INSERT INTO `global_config`(`id`,`name`,`description`,`value`,`status`) SELECT 3,\u0026#34;order_auto_cancel_time\u0026#34;,\u0026","title":"MySQLä½¿ç”¨"},{"content":"ä¸€äº›å°æ’ä»¶ å€’è®¡æ—¶ ","permalink":"https://zpc2222.github.io/posts/life/web-plugin/","summary":"ä¸€äº›å°æ’ä»¶ å€’è®¡æ—¶","title":"ç½‘é¡µæ’ä»¶"},{"content":"ç®€ä»‹ å®˜ç½‘åœ°å€ï¼š\u0026gt; https://www.easy-es.cn\né€‰æ‹©ç†ç”±ï¼šçœå¿ƒï¼ŒçœåŠ›ï¼Œçœä»£ç ã€‚ç®€å•å¥½ç”¨ï¼Œå°‘æ“å¿ƒ\nå¼•ç”¨ pomä¾èµ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;cn.easy-es\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;easy-es-boot-starter\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.1.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!--ESçš„ç›¸å…³ä¾èµ–ç‰ˆæœ¬éœ€è¦ç»Ÿä¸€ä¸‹,å»ºè®®ä¸æœåŠ¡ç«¯ç‰ˆæœ¬ç»Ÿä¸€--\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.elasticsearch.client\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;elasticsearch-rest-high-level-client\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;7.14.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;org.elasticsearch\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;elasticsearch\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;7.14.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; é…ç½® å¦‚æœæ˜¯propertiesï¼Œä¹Ÿå·®è·ä¸å¤§\n1 2 3 4 5 6 7 8 9 10 easy-es: # æ˜¯å¦å¼€å¯EEè‡ªåŠ¨é…ç½®,è‹¥ä¸ºfalseæ—¶,åˆ™è®¤ä¸ºä¸å¯ç”¨æœ¬æ¡†æ¶ enable: true # ESè¿æ¥åœ°å€+ç«¯å£ address: 127.0.0.1:9200 # å…³é—­è‡ªå¸¦banner banner: false schema: http username: elastic #æœ‰è®¾ç½®æ‰å¡«å†™,éå¿…é¡» password: elastic æ‹“å±•é…ç½®\nå¯ç¼ºçœ,ä¸å½±å“é¡¹ç›®å¯åŠ¨,ä¸ºäº†æé«˜ç”Ÿäº§ç¯å¢ƒæ€§èƒ½,å»ºè®®æŒ‰éœ€é…ç½®\n1 2 3 4 5 6 7 8 easy-es: keep-alive-millis: 18000 # å¿ƒè·³ç­–ç•¥æ—¶é—´ å•ä½:ms connectTimeout: 5000 # è¿æ¥è¶…æ—¶æ—¶é—´ å•ä½:ms socketTimeout: 5000 # é€šä¿¡è¶…æ—¶æ—¶é—´ å•ä½:ms requestTimeout: 5000 # è¯·æ±‚è¶…æ—¶æ—¶é—´ å•ä½:ms connectionRequestTimeout: 5000 # è¿æ¥è¯·æ±‚è¶…æ—¶æ—¶é—´ å•ä½:ms maxConnTotal: 100 # æœ€å¤§è¿æ¥æ•° å•ä½:ä¸ª maxConnPerRoute: 100 # æœ€å¤§è¿æ¥è·¯ç”±æ•° å•ä½:ä¸ª å…¨å±€é…ç½®ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 easy-es: banner: false # é»˜è®¤ä¸ºtrue æ‰“å°banner è‹¥æ‚¨ä¸æœŸæœ›æ‰“å°banner,å¯é…ç½®ä¸ºfalse global-config: process_index_mode: smoothly #ç´¢å¼•å¤„ç†æ¨¡å¼,smoothly:å¹³æ»‘æ¨¡å¼,é»˜è®¤å¼€å¯æ­¤æ¨¡å¼, not_smoothly:éå¹³æ»‘æ¨¡å¼, manual:æ‰‹åŠ¨æ¨¡å¼ print-dsl: true # å¼€å¯æ§åˆ¶å°æ‰“å°é€šè¿‡æœ¬æ¡†æ¶ç”Ÿæˆçš„DSLè¯­å¥,é»˜è®¤ä¸ºå¼€å¯,æµ‹è¯•ç¨³å®šåçš„ç”Ÿäº§ç¯å¢ƒå»ºè®®å…³é—­,ä»¥æå‡å°‘é‡æ€§èƒ½ distributed: false # å½“å‰é¡¹ç›®æ˜¯å¦åˆ†å¸ƒå¼é¡¹ç›®,é»˜è®¤ä¸ºtrue,åœ¨éæ‰‹åŠ¨æ‰˜ç®¡ç´¢å¼•æ¨¡å¼ä¸‹,è‹¥ä¸ºåˆ†å¸ƒå¼é¡¹ç›®åˆ™ä¼šè·å–åˆ†å¸ƒå¼é”,éåˆ†å¸ƒå¼é¡¹ç›®åªéœ€synchronizedé”. asyncProcessIndexBlocking: true # å¼‚æ­¥å¤„ç†ç´¢å¼•æ˜¯å¦é˜»å¡ä¸»çº¿ç¨‹ é»˜è®¤é˜»å¡ æ•°æ®é‡è¿‡å¤§æ—¶è°ƒæ•´ä¸ºéé˜»å¡å¼‚æ­¥è¿›è¡Œ é¡¹ç›®å¯åŠ¨æ›´å¿« activeReleaseIndexMaxRetry: 60 # åˆ†å¸ƒå¼ç¯å¢ƒä¸‹,å¹³æ»‘æ¨¡å¼,å½“å‰å®¢æˆ·ç«¯æ¿€æ´»æœ€æ–°ç´¢å¼•æœ€å¤§é‡è¯•æ¬¡æ•°è‹¥æ•°æ®é‡è¿‡å¤§,é‡å»ºç´¢å¼•æ•°æ®è¿ç§»æ—¶é—´è¶…è¿‡60*(180/60)=180åˆ†é’Ÿæ—¶,å¯è°ƒå¤§æ­¤å‚æ•°å€¼,æ­¤å‚æ•°å€¼å†³å®šæœ€å¤§é‡è¯•æ¬¡æ•°,è¶…å‡ºæ­¤æ¬¡æ•°åä»æœªæˆåŠŸ,åˆ™ç»ˆæ­¢é‡è¯•å¹¶è®°å½•å¼‚å¸¸æ—¥å¿— activeReleaseIndexFixedDelay: 180 # åˆ†å¸ƒå¼ç¯å¢ƒä¸‹,å¹³æ»‘æ¨¡å¼,å½“å‰å®¢æˆ·ç«¯æ¿€æ´»æœ€æ–°ç´¢å¼•æœ€å¤§é‡è¯•æ¬¡æ•° è‹¥æ•°æ®é‡è¿‡å¤§,é‡å»ºç´¢å¼•æ•°æ®è¿ç§»æ—¶é—´è¶…è¿‡60*(180/60)=180åˆ†é’Ÿæ—¶,å¯è°ƒå¤§æ­¤å‚æ•°å€¼ æ­¤å‚æ•°å€¼å†³å®šå¤šä¹…é‡è¯•ä¸€æ¬¡ å•ä½:ç§’ db-config: map-underscore-to-camel-case: false # æ˜¯å¦å¼€å¯ä¸‹åˆ’çº¿è½¬é©¼å³° é»˜è®¤ä¸ºfalse table-prefix: daily_ # ç´¢å¼•å‰ç¼€,å¯ç”¨äºåŒºåˆ†ç¯å¢ƒ é»˜è®¤ä¸ºç©º ç”¨æ³•å’ŒMPä¸€æ · id-type: customize # idç”Ÿæˆç­–ç•¥ customizeä¸ºè‡ªå®šä¹‰,idå€¼ç”±ç”¨æˆ·ç”Ÿæˆ,æ¯”å¦‚å–MySQLä¸­çš„æ•°æ®id,å¦‚ç¼ºçœæ­¤é¡¹é…ç½®,åˆ™idé»˜è®¤ç­–ç•¥ä¸ºesè‡ªåŠ¨ç”Ÿæˆ field-strategy: not_empty # å­—æ®µæ›´æ–°ç­–ç•¥ é»˜è®¤ä¸ºnot_null enable-track-total-hits: true # é»˜è®¤å¼€å¯,æŸ¥è¯¢è‹¥æŒ‡å®šäº†sizeè¶…è¿‡1wæ¡æ—¶ä¹Ÿä¼šè‡ªåŠ¨å¼€å¯,å¼€å¯åæŸ¥è¯¢æ‰€æœ‰åŒ¹é…æ•°æ®,è‹¥ä¸å¼€å¯,ä¼šå¯¼è‡´æ— æ³•è·å–æ•°æ®æ€»æ¡æ•°,å…¶å®ƒåŠŸèƒ½ä¸å—å½±å“. refresh-policy: immediate # æ•°æ®åˆ·æ–°ç­–ç•¥,é»˜è®¤ä¸ºä¸åˆ·æ–° enable-must2-filter: false # æ˜¯å¦å…¨å±€å¼€å¯mustæŸ¥è¯¢ç±»å‹è½¬æ¢ä¸ºfilteræŸ¥è¯¢ç±»å‹ é»˜è®¤ä¸ºfalseä¸è½¬æ¢ ä»£ç  æ•°æ®æ¨¡å‹ï¼ˆç›¸å½“äºMPçš„entityï¼‰ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 /** * es æ•°æ®æ¨¡å‹ * \u0026lt;p\u0026gt; **/ @Data @Accessors(chain = true) @IndexName(value = \u0026#34;es_document\u0026#34;, shardsNum = 3, replicasNum = 2, keepGlobalPrefix = true, maxResultWindow = 100) public class Document { /** * esä¸­çš„å”¯ä¸€id,å¦‚æœä½ æƒ³è‡ªå®šä¹‰esä¸­çš„idä¸ºä½ æä¾›çš„id,æ¯”å¦‚MySQLä¸­çš„id,è¯·å°†æ³¨è§£ä¸­çš„typeæŒ‡å®šä¸ºcustomizeæˆ–ç›´æ¥åœ¨å…¨å±€é…ç½®æ–‡ä»¶ä¸­æŒ‡å®š,å¦‚æ­¤idä¾¿æ”¯æŒä»»æ„æ•°æ®ç±»å‹) */ @IndexId(type = IdType.CUSTOMIZE) private String id; /** * æ–‡æ¡£æ ‡é¢˜,ä¸æŒ‡å®šç±»å‹é»˜è®¤è¢«åˆ›å»ºä¸ºkeywordç±»å‹,å¯è¿›è¡Œç²¾ç¡®æŸ¥è¯¢ */ private String title; /** * æ–‡æ¡£å†…å®¹,æŒ‡å®šäº†ç±»å‹åŠå­˜å‚¨/æŸ¥è¯¢åˆ†è¯å™¨ */ @HighLight(mappingField = \u0026#34;highlightContent\u0026#34;) @IndexField(fieldType = FieldType.TEXT, analyzer = Analyzer.IK_SMART) private String content; /** * ä½œè€… åŠ @TableFieldæ³¨è§£,å¹¶æŒ‡æ˜strategy = FieldStrategy.NOT_EMPTY è¡¨ç¤ºæ›´æ–°çš„æ—¶å€™çš„ç­–ç•¥ä¸º åˆ›å»ºè€…ä¸ä¸ºç©ºå­—ç¬¦ä¸²æ—¶æ‰æ›´æ–° */ @IndexField(strategy = FieldStrategy.NOT_EMPTY) private String creator; /** * åˆ›å»ºæ—¶é—´ */ @IndexField(fieldType = FieldType.DATE, dateFormat = \u0026#34;yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis\u0026#34;) private String gmtCreate; /** * esä¸­å®é™…ä¸å­˜åœ¨çš„å­—æ®µ,ä½†æ¨¡å‹ä¸­åŠ äº†,ä¸ºäº†ä¸å’Œesæ˜ å°„,å¯ä»¥åœ¨æ­¤ç±»å‹å­—æ®µä¸ŠåŠ ä¸Š æ³¨è§£@TableField,å¹¶æŒ‡æ˜exist=false */ @IndexField(exist = false) private String notExistsField; /** * åœ°ç†ä½ç½®ç»çº¬åº¦åæ ‡ ä¾‹å¦‚: \u0026#34;40.13933715136454,116.63441990026217\u0026#34; */ @IndexField(fieldType = FieldType.GEO_POINT) private String location; /** * å›¾å½¢(ä¾‹å¦‚åœ†å¿ƒ,çŸ©å½¢) */ @IndexField(fieldType = FieldType.GEO_SHAPE) private String geoLocation; /** * è‡ªå®šä¹‰å­—æ®µåç§° */ @IndexField(value = \u0026#34;wu-la\u0026#34;, fieldType = FieldType.TEXT, analyzer = Analyzer.IK_SMART, searchAnalyzer = Analyzer.IK_SMART, fieldData = true) private String customField; /** * é«˜äº®è¿”å›å€¼è¢«æ˜ å°„çš„å­—æ®µ */ private String highlightContent; /** * æ–‡æ¡£ç‚¹èµæ•° */ private Integer starNum; } mapper 1 2 3 4 5 6 /** * mapper ç›¸å½“äºMybatis-plusçš„mapper * \u0026lt;p\u0026gt; **/ public interface DocumentMapper extends BaseEsMapper\u0026lt;Document\u0026gt; { } controller è°ƒç”¨æ¥å£ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 @RestController @RequestMapping(\u0026#34;/es\u0026#34;) @Tag(name = \u0026#34;esæ¡ˆä¾‹\u0026#34;) @RequiredArgsConstructor @Slf4j public class EsController { private final DocumentMapper documentMapper; /** * åˆå§‹åŒ–æ’å…¥æ•°æ®,é»˜è®¤å¼€å¯è‡ªåŠ¨æŒ¡,è‡ªåŠ¨æŒ¡æ¨¡å¼ä¸‹,ç´¢å¼•ä¼šè‡ªåŠ¨åˆ›å»ºåŠæ›´æ–°. è‹¥æœªå¼€å¯è‡ªåŠ¨æŒ¡,åˆ™åœ¨æ­¤æ­¥éª¤å‰éœ€å…ˆè°ƒç”¨åˆ›å»ºç´¢å¼•APIå®Œæˆç´¢å¼•åˆ›å»º * * @return */ @Operation(summary = \u0026#34;æ·»åŠ æ–‡æ¡£\u0026#34;) @PostMapping(\u0026#34;insert\u0026#34;) public Integer insert(@RequestBody Document document) { document.setGmtCreate(LocalDateTime.now().format(DateTimeFormatter.ofPattern(\u0026#34;yyyy-MM-dd HH:mm:ss\u0026#34;))); return documentMapper.insert(document); } @Operation(summary = \u0026#34;æ‰¹é‡æ·»åŠ æµ‹è¯•\u0026#34;) @PostMapping(\u0026#34;batchInsert\u0026#34;) public void testBatchInsert() { List\u0026lt;Document\u0026gt; documentList = new ArrayList\u0026lt;\u0026gt;(); for (int i = 2; i \u0026lt; 23; i++) { Document document = new Document(); document.setId(Integer.toString(i)); document.setTitle(\u0026#34;æµ‹è¯•æ–‡æ¡£\u0026#34; + i); document.setContent(\u0026#34;æµ‹è¯•å†…å®¹\u0026#34; + i); document.setCreator(\u0026#34;è€æ±‰\u0026#34; + i); document.setGmtCreate(LocalDateTime.now().format(DateTimeFormatter.ofPattern(\u0026#34;yyyy-MM-dd HH:mm:ss\u0026#34;))); document.setCustomField(\u0026#34;è‡ªå®šä¹‰å­—æ®µ\u0026#34; + i); Point point = new Point(13.400544 + i, 52.530286 + i); document.setGeoLocation(point.toString()); document.setStarNum(i); if (i == 2) { document.setLocation(\u0026#34;40.17836693398477,116.64002551005981\u0026#34;); document.setStarNum(1); } else if (i == 3) { document.setLocation(\u0026#34;40.19103839805197,116.5624013764374\u0026#34;); } else if (i == 4) { document.setLocation(\u0026#34;40.13933715136454,116.63441990026217\u0026#34;); } documentList.add(document); } int count = documentMapper.insertBatch(documentList); Assert.equals(documentList.size(), count); } /** * æ¼”ç¤ºæ ¹æ®æ ‡é¢˜ç²¾ç¡®æŸ¥è¯¢æ–‡ç«  * ä¾‹å¦‚titleä¼ å€¼ä¸º æˆ‘çœŸå¸…,é‚£ä¹ˆåœ¨å½“å‰é…ç½®çš„ç´¢å¼•ä¸‹,æ‰€æœ‰æ ‡é¢˜ä¸º\u0026#39;æˆ‘çœŸå¸…\u0026#39;çš„æ–‡ç« éƒ½ä¼šè¢«æŸ¥è¯¢å‡ºæ¥ * å…¶å®ƒå„ç§åœºæ™¯çš„æŸ¥è¯¢ä½¿ç”¨,è¯·ç§»æ­¥è‡³testæ¨¡å— * * @param title * @return */ @Operation(summary = \u0026#34;æ ¹æ®æ ‡é¢˜ç²¾ç¡®æŸ¥è¯¢æ–‡ç« \u0026#34;) @GetMapping(\u0026#34;/listDocumentByTitle\u0026#34;) public List\u0026lt;Document\u0026gt; listDocumentByTitle(@RequestParam String title) { // å®é™…å¼€å‘ä¸­ä¼šæŠŠè¿™äº›é€»è¾‘å†™è¿›serviceå±‚ è¿™é‡Œä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿å°±ä¸åˆ›å»ºserviceå±‚äº† LambdaEsQueryWrapper\u0026lt;Document\u0026gt; wrapper = new LambdaEsQueryWrapper\u0026lt;\u0026gt;(); wrapper.eq(Document::getTitle, title); return documentMapper.selectList(wrapper); } @Operation(summary = \u0026#34;æŸ¥è¯¢idæ˜¯1,2,3çš„\u0026#34;) @GetMapping(\u0026#34;/queryConditionIn\u0026#34;) public List\u0026lt;Document\u0026gt; testConditionIn() { LambdaEsQueryWrapper\u0026lt;Document\u0026gt; wrapper = new LambdaEsQueryWrapper\u0026lt;\u0026gt;(); wrapper.in(Document::getId, \u0026#34;1\u0026#34;, \u0026#34;2\u0026#34;, \u0026#34;3\u0026#34;); List\u0026lt;Document\u0026gt; documents = documentMapper.selectList(wrapper); return documents; } /** * æ¼”ç¤ºæ ¹æ®titleåˆ é™¤æ–‡ç« ï¼ŒåŒæ—¶ä¼šè¢« DeleteInterceptor æ‹¦æˆªï¼Œæ‰§è¡Œé€»è¾‘åˆ é™¤ * * @param title * @return */ @Operation(summary = \u0026#34;æ ¹æ®titleåˆ é™¤æ–‡ç« \u0026#34;) @GetMapping(\u0026#34;/deleteDocumentByTitle\u0026#34;) public Integer deleteDocumentByTitle(@RequestParam String title) { // å®é™…å¼€å‘ä¸­ä¼šæŠŠè¿™äº›é€»è¾‘å†™è¿›serviceå±‚ è¿™é‡Œä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿å°±ä¸åˆ›å»ºserviceå±‚äº† LambdaEsQueryWrapper\u0026lt;Document\u0026gt; wrapper = new LambdaEsQueryWrapper\u0026lt;\u0026gt;(); wrapper.eq(Document::getTitle, title); return documentMapper.delete(wrapper); } /** * è‡ªå®šä¹‰æ³¨è§£æŒ‡å®šé«˜äº®è¿”å›å­—æ®µ,é«˜äº®æŸ¥è¯¢æµ‹è¯• * * @param content * @return */ @Operation(summary = \u0026#34;é«˜äº®æŸ¥è¯¢æµ‹è¯•\u0026#34;) @GetMapping(\u0026#34;/highlightSearch\u0026#34;) public List\u0026lt;Document\u0026gt; highlightSearch(@RequestParam String content) { // å®é™…å¼€å‘ä¸­ä¼šæŠŠè¿™äº›é€»è¾‘å†™è¿›serviceå±‚ è¿™é‡Œä¸ºäº†æ¼”ç¤ºæ–¹ä¾¿å°±ä¸åˆ›å»ºserviceå±‚äº† LambdaEsQueryWrapper\u0026lt;Document\u0026gt; wrapper = new LambdaEsQueryWrapper\u0026lt;\u0026gt;(); wrapper.match(Document::getContent, content); return documentMapper.selectList(wrapper); } æ³¨è§£ å¯åŠ¨ç±»æ·»åŠ  1 å¯åŠ¨ç±»æ·»åŠ @EsMapperScan(\u0026#34;com.xxx.mapper\u0026#34;) mapperæ‰«ææ³¨è§£,åŠŸèƒ½ä¸MPçš„@MapperScanä¸€è‡´\n@IndexName ç´¢å¼•åæ³¨è§£ï¼Œæ ‡è¯†å®ä½“ç±»å¯¹åº”çš„ç´¢å¼• å¯¹åº”MPçš„@TableNameæ³¨è§£\n@IndexId ESä¸»é”®æ³¨è§£\n@IndexField ESå­—æ®µæ³¨è§£\nå¯åŠ¨æˆåŠŸï¼Œæ‰“å°ï¼šCongratulations auto process index by Easy-Es is don\nå…·ä½“ä½¿ç”¨ï¼Œå¯ä»¥å‚è€ƒä»£ç é‡Œé¢çš„testå·¥ç¨‹ï¼Œå·¥ç¨‹åï¼šeasy-es-test è·¯å¾„ï¼šcn.easyes.test\nä¸è¶³ eeæºç ä½¿ç”¨çš„æ˜¯1.8ç‰ˆæœ¬JDKï¼Œå®é™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå¦‚æœé¡¹ç›®æ˜¯Java17ï¼ˆ22å¹´ï¼ŒJava19éƒ½å‘å¸ƒäº†ï¼‰ï¼Œä¼šå‘ç°ä¸å…¼å®¹ï¼Œ ç›®å‰æš‚æ— è§£å†³ç‰ˆæœ¬ï¼Œå·²æissueï¼Œç»™çš„ç»“è®ºæ˜¯:ç›®å‰è¿˜ä¸æ”¯æŒjdk 17\n","permalink":"https://zpc2222.github.io/posts/tech/es%E5%85%A5%E9%97%A8-easy-es/","summary":"ç®€ä»‹ å®˜ç½‘åœ°å€ï¼š\u0026gt; https://www.easy-es.cn é€‰æ‹©ç†ç”±ï¼šçœå¿ƒï¼ŒçœåŠ›ï¼Œçœä»£ç ã€‚ç®€å•å¥½ç”¨ï¼Œå°‘æ“å¿ƒ å¼•ç”¨ pomä¾èµ– 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;cn.easy-es\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;easy-es-boot-starter\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.1.0\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; \u0026lt;!--","title":"Eså…¥é—¨-easy-es"},{"content":"Map Listä¸­çš„å®ä½“ç±»æŒ‰ç…§æŸä¸ªå­—æ®µè¿›è¡Œåˆ†ç»„å¹¶å­˜æ”¾è‡³Mapä¸­æ“ä½œ java8ä¹‹å‰ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 public static void main(String[] args) { List\u0026lt;User\u0026gt; list = new ArrayList\u0026lt;\u0026gt;(); list.add(new User(1, 1)); list.add(new User(1, 2)); list.add(new User(2, 1)); list.add(new User(2, 3)); list.add(new User(2, 2)); list.add(new User(3, 1)); Map\u0026lt;Integer, List\u0026lt;User\u0026gt;\u0026gt; map = new HashMap\u0026lt;\u0026gt;(); for(User user : list){ if(map.containsKey(user.getId())){//mapä¸­å­˜åœ¨æ­¤idï¼Œå°†æ•°æ®å­˜æ”¾å½“å‰keyçš„mapä¸­ map.get(user.getId()).add(user); }else{//mapä¸­ä¸å­˜åœ¨ï¼Œæ–°å»ºkeyï¼Œç”¨æ¥å­˜æ”¾æ•°æ® List\u0026lt;User\u0026gt; tmpList = new ArrayList\u0026lt;\u0026gt;(); tmpList.add(user); map.put(user.getId(), tmpList); } } System.out.println(map.toString()); } Java8åï¼š\n1 Map\u0026lt;Integer, List\u0026lt;MobildUserEntity\u0026gt;\u0026gt; map = userList.stream().collect(Collectors.groupingBy(MobildUserEntity::getStatus)); æ ‘çŠ¶å›¾\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 //å°†listï¼Œæ ¹æ®çœå¸‚åŒºä¿¡æ¯åˆ†å¼€ï¼Œå±•ç¤ºä¸ºæ ‘çŠ¶å›¾ Map\u0026lt;String, List\u0026lt;Station\u0026gt;\u0026gt; lists = stations.stream().filter(x -\u0026gt; x.getProvince() != null \u0026amp;\u0026amp; x.getCity() != null).collect(Collectors.groupingBy(Station::getProvince, LinkedHashMap::new, Collectors.toCollection(ArrayList::new))); //è¿”å›æ ¼å¼ List\u0026lt;StationTreeVO\u0026gt; provinceList = new ArrayList\u0026lt;\u0026gt;(); //éå† for (Map.Entry\u0026lt;String, List\u0026lt;Station\u0026gt;\u0026gt; entry : lists.entrySet()) { StationTreeVO province = new StationTreeVO(); //è·å–listé›†åˆ List\u0026lt;Station\u0026gt; value = entry.getValue(); province.setProvince(entry.getKey()); List\u0026lt;StationTreeVO.City\u0026gt; cityList = new ArrayList\u0026lt;\u0026gt;(); //ä¿æŒåŸæœ‰é¡ºåº-ï¼ˆLinkedHashMapæŒ‰æ’æ›²é¡ºåºæ’åºï¼‰ Map\u0026lt;String, List\u0026lt;Station\u0026gt;\u0026gt; cityStreamList = value.stream().collect(Collectors.groupingBy(Station::getCity, LinkedHashMap::new, Collectors.toCollection(ArrayList::new))); for (Map.Entry\u0026lt;String, List\u0026lt;Station\u0026gt;\u0026gt; cityEntry : cityStreamList.entrySet()) { StationTreeVO.City city = new StationTreeVO.City(); List\u0026lt;StationTreeVO.CityArea\u0026gt; areaList = new ArrayList\u0026lt;\u0026gt;(); city.setCity(cityEntry.getKey()); //è·å–listé›†åˆ List\u0026lt;Station\u0026gt; areaValue = cityEntry.getValue(); Map\u0026lt;String, List\u0026lt;Station\u0026gt;\u0026gt; areaStreamList = areaValue.stream().collect(Collectors.groupingBy(Station::getArea, LinkedHashMap::new, Collectors.toCollection(ArrayList::new))); for (Map.Entry\u0026lt;String, List\u0026lt;Station\u0026gt;\u0026gt; areaEntry : areaStreamList.entrySet()) { StationTreeVO.CityArea area = new StationTreeVO.CityArea(); area.setArea(areaEntry.getKey()); List\u0026lt;Station\u0026gt; stationList = areaEntry.getValue(); area.setStationList(coverTree(stationList)); areaList.add(area); } city.setAreaList(areaList); cityList.add(city); } province.setCityList(cityList); provinceList.add(province); } å¯¹å›¾ç‰‡æ–‡ä»¶è½¬ä¸ºBase64 å›¾ç‰‡è½¬ä¸ºå­—ç¬¦ä¸²è¿›è¡Œä¿å­˜æˆ–è€…ä¼ è¾“ selectStatistics.put(\u0026ldquo;basePhoto\u0026rdquo;,\u0026ldquo;data:image/jpeg;base64,\u0026quot;+ Base64.getMimeEncoder().encodeToString(Files.readAllBytes(Paths.get(basePhotoPath))));\nåå°„è°ƒç”¨ è¿™é‡Œé€šè¿‡åå°„è°ƒç”¨æ–¹æ³•,å¸¦å…¥ScheduleConfigBOçš„å‚æ•°\n1 2 3 4 5 6 7 8 9 10 Class\u0026lt;?\u0026gt; clazz = Class.forName(config.getClassName()); String className = lowerFirstCapse(clazz.getSimpleName()); Object bean = ApplicationContextHelper.getBean(className); assert bean != null; Method methodArgs = ReflectionUtils.findMethod(bean.getClass(), EXECUTE_METHOD, TaskConfigVO.class); Method method = ReflectionUtils.findMethod(bean.getClass(), EXECUTE_METHOD); if (methodArgs != null) { log.debug(\u0026#34;invoke method [{}] with args [{}]\u0026#34;, EXECUTE_METHOD, config); ReflectionUtils.invokeMethod(methodArgs, bean, config); } æ ¹æ®å½“å‰æ—¥æœŸï¼Œè·å–åˆ°æœˆåˆï¼Œå’Œæœˆåº•æ—¶é—´ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 Public Map\u0026lt;String,Date\u0026gt;splitMonth(DateyearMonth){ Map\u0026lt;String,Date\u0026gt;map=newHashMap\u0026lt;\u0026gt;(); Calendarcale=Calendar.getInstance(); cale.setTime(yearMonth); cale.add(Calendar.MONTH,0); cale.set(Calendar.DAY_OF_MONTH,1); DatefirstDayOfMonth=cale.getTime();//å½“æœˆç¬¬ä¸€å¤©2022-03-01 Calendarca=Calendar.getInstance(); ca.set(Calendar.DAY_OF_MONTH,ca.getActualMaximum(Calendar.DAY_OF_MONTH)); //å°†å°æ—¶è‡³23 ca.set(Calendar.HOUR_OF_DAY,23); //å°†åˆ†é’Ÿè‡³59 ca.set(Calendar.MINUTE,59); //å°†ç§’è‡³59 ca.set(Calendar.SECOND,59); //å°†æ¯«ç§’è‡³999 ca.set(Calendar.MILLISECOND,999); DatelastDayOfMonth=ca.getTime(); map.put(\u0026#34;startDate\u0026#34;,firstDayOfMonth); map.put(\u0026#34;endDate\u0026#34;,lastDayOfMonth); returnmap; } privateintweekDay(Datedate){ Calendarcalendar=Calendar.getInstance(); calendar.setTime(date); returncalendar.get(Calendar.DAY_OF_WEEK); } æ ¹æ®ä¼ å…¥çš„å‚æ•°ï¼Œæ¥å¯¹æ—¥æœŸåŒºé—´è¿›è¡Œæ‹†åˆ†ï¼Œè¿”å›æ‹†åˆ†åçš„æ—¥æœŸList 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 for(inti=0;i\u0026lt;listWeek.size();i+=2){ List\u0026lt;Date\u0026gt;list=getBetweenDates(listWeek.get(i),listWeek.get(i+1)); } /** *æ ¹æ®ä¼ å…¥çš„å‚æ•°ï¼Œæ¥å¯¹æ—¥æœŸåŒºé—´è¿›è¡Œæ‹†åˆ†ï¼Œè¿”å›æ‹†åˆ†åçš„æ—¥æœŸList * *@return *@throwsParseException *@authorzhoupengcheng2022-3-10 *@editor *@editcont */ publicstaticList\u0026lt;Date\u0026gt;splitDate(DatesDate,DateeDate)throwsParseException{ List\u0026lt;Date\u0026gt;listWeekOrMonth=newArrayList\u0026lt;Date\u0026gt;(); CalendarsCalendar=Calendar.getInstance(); sCalendar.setFirstDayOfWeek(Calendar.MONDAY); sCalendar.setTime(sDate); CalendareCalendar=Calendar.getInstance(); eCalendar.setFirstDayOfWeek(Calendar.MONDAY); eCalendar.setTime(eDate); booleanbool=true; while(sCalendar.getTime().getTime()\u0026lt;eCalendar.getTime().getTime()){ if(bool||sCalendar.get(Calendar.DAY_OF_WEEK)==2||sCalendar.get(Calendar.DAY_OF_WEEK)==1){ listWeekOrMonth.add(sCalendar.getTime()); bool=false; } sCalendar.add(Calendar.DAY_OF_MONTH,1); } listWeekOrMonth.add(eCalendar.getTime()); if(listWeekOrMonth.size()%2!=0){ listWeekOrMonth.add(eCalendar.getTime()); } returnlistWeekOrMonth; } ","permalink":"https://zpc2222.github.io/posts/tech/java/java-common/","summary":"Map Listä¸­çš„å®ä½“ç±»æŒ‰ç…§æŸä¸ªå­—æ®µè¿›è¡Œåˆ†ç»„å¹¶å­˜æ”¾è‡³Mapä¸­æ“ä½œ java8ä¹‹å‰ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 public static void main(String[] args) { List\u0026lt;User\u0026gt; list = new ArrayList\u0026lt;\u0026gt;(); list.add(new","title":"Javaå¸¸ç”¨é€Ÿè®°"},{"content":"æˆ‘å–œæ¬¢çš„éŸ³ä¹\nhugoåšå®¢æ’å…¥éŸ³ä¹æ–¹æ³•ï¼Œå‚è€ƒæ–‡ç« ï¼šè§†å¬ | æˆ‘çš„ä¸ªäººå°ç«™ (zpc2222.github.io)\n","permalink":"https://zpc2222.github.io/music/","summary":"æˆ‘å–œæ¬¢çš„éŸ³ä¹ hugoåšå®¢æ’å…¥éŸ³ä¹æ–¹æ³•ï¼Œå‚è€ƒæ–‡ç« ï¼šè§†å¬ | æˆ‘çš„ä¸ªäººå°ç«™ (zpc2222.github.io)","title":"ğŸ§éŸ³ä¹"},{"content":"å¸¸ç”¨ Chrome æ‰©å±•å·¥å…·ï¼Œé“¾æ¥å¤šä¸º Chrome Web Store é¡¹ç›®é¡µé¢ã€‚\næµè§ˆå™¨ æ‰©å±•ç®¡ç†å™¨ï¼šå¿«é€Ÿç®¡ç†æ‰©å±•ï¼Œå¯¹æ‰©å±•åˆ†ç»„å¯ç”¨ã€‚\nBookmarks clean upï¼šæ¸…ç†é‡å¤ä¹¦ç­¾ã€ç©ºæ–‡ä»¶å¤¹å’Œå¤±æ•ˆé“¾æ¥ï¼Œä¹Ÿèƒ½åˆå¹¶é‡å¤æ–‡ä»¶å¤¹ã€‚\nBetter Historyï¼šæŒ‰æ—¥æœŸã€å°æ—¶ç½—åˆ—å†å²è®°å½•ï¼Œæœç´¢æ›´ä¾¿æ·ã€‚\nCookie Editorï¼šç®¡ç†ã€ä¿®æ”¹ã€å¯¼å‡º Cookieã€‚\nç½‘é¡µä¼˜åŒ– Tampermonkeyï¼šæ²¹çŒ´è„šæœ¬æ’ä»¶ï¼Œå¯ä¿®æ”¹ç½‘é¡µå¸ƒå±€ã€å¢å‡å†…å®¹ã€è‡ªåŠ¨åŒ–æ“ä½œï¼Œå¸¸ç”¨è„šæœ¬åº“ä¸º Greasy Forkã€‚\nFix Contrastï¼šè‡ªåŠ¨æ ¡æ­£ç½‘é¡µå¯¹æ¯”åº¦ï¼Œè®©ç½‘é¡µå†…å®¹æ›´æ˜“é˜…è¯»å’Œåˆ†è¾¨ã€‚\nFasterChromeï¼šæµè§ˆå™¨é¢„åŠ è½½é“¾æ¥ï¼Œæå‡ç½‘ç»œæµç•…åº¦ã€‚\nSuperCopyï¼šä¸€é”®ç ´è§£ç¦æ­¢å³é”®ã€ç ´è§£ç¦æ­¢é€‰æ‹©ã€ç ´è§£ç¦æ­¢å¤åˆ¶ã€ç ´è§£ç¦æ­¢ç²˜è´´ï¼Œå¯ç”¨å¤åˆ¶ï¼Œå¯ç”¨å³é”®ï¼Œå¯ç”¨é€‰æ‹©ï¼Œå¯ç”¨ç²˜è´´ã€‚\nAutoPagerizeï¼šè‡ªåŠ¨è¯†åˆ« next æˆ–ä¸‹ä¸€é¡µï¼Œå°†ç½‘é¡µåˆå¹¶ä¸ºåŒä¸€é¡µã€‚2014 å¹´æ›´æ–°ï¼Œå¾ˆå¤šè§„åˆ™å·²å¤±æ•ˆã€‚\npakkuï¼šåˆå¹¶ B ç«™è§†é¢‘ä¸­ç»å¤§å¤šæ•°åˆ·å±å¼¹å¹•ã€‚\nEnhanced GitHubï¼šæå‡ GitHub æ˜“ç”¨åº¦ã€‚\nSourcegraphï¼šä¼˜åŒ– GitHub ä»£ç ï¼Œæ”¯æŒé¼ æ ‡æ‚¬åœã€ä»£ç æœç´¢ã€æŸ¥çœ‹å¼•ç”¨ç­‰ã€‚\næ ‡ç­¾é¡µ Infinityï¼šè‡ªå®šä¹‰ä½ çš„æ–°æ ‡ç­¾é¡µã€‚\nzvTabsï¼šä¸€é”®å…³é—­å·¦ä¾§æ ‡ç­¾ã€‚\nGoTo Tabï¼šå…³é”®è¯æœç´¢ï¼Œå¿«é€Ÿå®šä½æ ‡ç­¾é¡µã€‚\næ‰¹é‡é“¾æ¥ Bulk URL Opener Extensionï¼šæ‰¹é‡æ‰“å¼€é“¾æ¥ï¼Œä¹Ÿå¯æ‰¹é‡è·å–å½“å‰æµè§ˆå™¨å†…æ‰€æœ‰é¡µé¢ç½‘å€é“¾æ¥ã€‚\nLink Grabberï¼šæ‰¹é‡æå–ã€ç­›é€‰ã€å¤åˆ¶ç½‘é¡µé‡Œå„ç§é“¾æ¥ã€‚\nLinkclumpï¼šæŒ‰ä½ Z é”®åï¼Œé•¿æŒ‰é¼ æ ‡å·¦é”®è¿›è¡ŒåŒºåŸŸæ¡†é€‰ï¼ŒåŒºåŸŸå†…çš„é“¾æ¥å¯ä»¥è¿›è¡Œæ‰¹é‡æ‰“å¼€ã€å¤åˆ¶ã€ä¹¦ç­¾ï¼Œæ“ä½œä¸­ä¼šåŒæ­¥æ˜¾ç¤ºåŒºåŸŸå†…çš„é“¾æ¥æ•°ã€‚\nTabCopyï¼šå¿«é€Ÿå¤åˆ¶æ ‡ç­¾é¡µé“¾æ¥ã€‚\nå›¾ç‰‡è§†é¢‘ ImageAssistantï¼šç”¨äºå—…æ¢ã€åˆ†æç½‘é¡µå›¾ç‰‡å¹¶æä¾›æ‰¹é‡ä¸‹è½½ã€‚\nFatkun å›¾ç‰‡æ‰¹é‡ä¸‹è½½ï¼šæ‰¾å‡ºå½“å‰é¡µé¢çš„æ‰€æœ‰å›¾ç‰‡ï¼Œæä¾›æŒ‰åˆ†è¾¨ç‡ã€é“¾æ¥ç­‰ç­›é€‰å›¾ç‰‡ã€‚\nFireShotï¼šæ•æ‰ç½‘é¡µæˆªå›¾ã€‚\nScreenityï¼šå±å¹•å½•åƒå·¥å…·ï¼Œå¯å¯¹å±å¹•è¿›è¡Œæ•è·ï¼Œæ³¨é‡Šï¼Œç¼–è¾‘ã€æ ‡æ³¨ç­‰ã€‚\nPicture-in-Picture Extensionï¼šè§†é¢‘ç”»ä¸­ç”»ã€‚\nVideo Speed Controllerï¼šä½¿ç”¨å¿«æ·æ–¹å¼åŠ å¿«ï¼Œå‡æ…¢ï¼Œæ¨è¿›å’Œå›æ”¾ HTML5 è§†é¢‘ã€‚\nç›‘è§†çˆ¬è™« Auto Refresh Plus | Page Monitorï¼šå®šæ—¶åˆ·æ–°é¡µé¢ï¼›é¡µé¢ç›‘è§†å™¨ï¼Œæ‰¾åˆ°æˆ–ä¸¢å¤±æŒ‡å®šæ–‡æœ¬æ—¶ï¼Œå¼¹å‡ºæç¤ºã€‚\nDistill Web Monitorï¼šç›‘æ§ç½‘é¡µæˆ–æºä»¥è·å–å˜æ›´ï¼Œå¯é‚®ä»¶ã€æ‰‹æœºæç¤ºã€‚\nCheck é…±ï¼šç½‘é¡µå†…å®¹ç›‘æ§å·¥å…·ï¼Œå¯ä»¥ç›‘æµ‹ç½‘é¡µå†…å®¹å˜åŒ–ï¼Œå¹¶å‘é€å¼‚åŠ¨åˆ°å¾®ä¿¡/é£ä¹¦ã€‚Check é…±å¯ä»¥éƒ¨ç½²åœ¨ Docker æˆ–æµè§ˆå™¨æ’ä»¶ã€‚\nWeb Scraperï¼šä»ç½‘é¡µä¸­æå–æ•°æ®çš„çˆ¬è™«ã€‚\nç½‘é¡µè‡ªåŠ¨åŒ–ï¼šUI.Vision PRA, iMacros, Automaã€‚\nå®ç”¨å·¥å…· Vimium Cï¼šå…¨é”®ç›˜æ“ä½œæµè§ˆå™¨ï¼Œå»ºè®®å¼€å¯ chrome://flags/#extensions-on-chrome-urlsã€‚\nSingleFileï¼šå®Œæ•´çš„ç½‘é¡µä¿å­˜åˆ°å•ä¸ªæ–‡ä»¶ä¸­ï¼Œå¯ä»¥å¯¹æ–‡ä»¶åã€HTML å†…å®¹ã€æ ·å¼ã€å›¾ç‰‡ã€å­—ä½“ç­‰è¿›è¡Œè°ƒæ•´ã€‚\nSelectorGadgetï¼šè½»æ¾è·å–ç½‘é¡µå…ƒç´ çš„ CSS Path æˆ– XPathã€‚\nCopy as Markdownï¼šå°†ç½‘é¡µæ–‡å­—è½¬ä¸º markdown æ ¼å¼æ–‡æœ¬ã€‚\nGet Faviconï¼šå¿«é€Ÿè·å–å½“å‰ç½‘ç«™å›¾æ ‡ã€‚\nTangoï¼šå¿«é€Ÿåˆ¶ä½œå¸¦æˆªå›¾çš„æµç¨‹æŒ‡å—ï¼Œä¸è¿‡è¾ƒä¸ºç®€å•ï¼Œå¯ä»¥åˆ†äº«ä¸ºé“¾æ¥ï¼Œåªé€‚åˆä¸´æ—¶åˆ†äº«çš„ç½‘é¡µæ“ä½œæµç¨‹ã€‚\nSimilar Sitesï¼šå‘ç°ä¸æ‚¨å½“å‰æ­£åœ¨æµè§ˆçš„ç½‘ç«™ç±»ä¼¼çš„ç½‘ç«™ã€‚\nå½©äº‘å°è¯‘ï¼šåŒè¯­å¯¹ç…§ç½‘é¡µç¿»è¯‘ï¼Œä½¿ç”¨æ›´ç®€å•ã€‚\nLink to Text Fragmentï¼šåˆ†äº«ç½‘é¡µå¹¶å°†é«˜äº®ä½ é€‰ä¸­æ–‡æœ¬ (ä»…æ”¯æŒ chrome æµè§ˆå™¨)ã€‚\n","permalink":"https://zpc2222.github.io/posts/tools/chrome/","summary":"å¸¸ç”¨ Chrome æ‰©å±•å·¥å…·ï¼Œé“¾æ¥å¤šä¸º Chrome Web Store é¡¹ç›®é¡µé¢ã€‚ æµè§ˆå™¨ æ‰©å±•ç®¡ç†å™¨ï¼šå¿«é€Ÿç®¡ç†æ‰©å±•ï¼Œå¯¹æ‰©å±•åˆ†ç»„å¯ç”¨ã€‚ Bookmarks clean upï¼šæ¸…ç†é‡å¤ä¹¦ç­¾ã€ç©ºæ–‡ä»¶å¤¹å’Œå¤±æ•ˆé“¾æ¥ï¼Œä¹Ÿèƒ½åˆå¹¶","title":"Chrome"},{"content":"GitHub Actions GitHub Actions æ˜¯ä¸€ä¸ªæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ (CI/CD) å¹³å°ï¼Œå¯ç”¨äºè‡ªåŠ¨æ‰§è¡Œæ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ç®¡é“ã€‚æ‚¨å¯ä»¥åˆ›å»ºå·¥ä½œæµç¨‹æ¥æ„å»ºå’Œæµ‹è¯•å­˜å‚¨åº“çš„æ¯ä¸ªæ‹‰å–è¯·æ±‚ï¼Œæˆ–å°†åˆå¹¶çš„æ‹‰å–è¯·æ±‚éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒã€‚å°† GitHub Actions å‘½ä»¤ä¿å­˜ä¸º main.ymlï¼Œæ”¾äº .github\\workflows ç›®å½•ä¸‹ï¼Œrepo å‘ç”ŸæŒ‡å®šè°ƒèŠ‚çš„æ”¹å˜æ—¶ï¼ŒActions ä¼šè‡ªåŠ¨è¿è¡Œã€‚^[äº†è§£ GitHub Actions]\nå¦‚æœ GitHub Actions å‘½ä»¤ä¸­æœ‰æ¶‰åŠå¯†ç ç­‰ç§å¯†ä¿¡æ¯ï¼Œåˆ™è¿›å…¥é¡¹ç›®ä»“åº“çš„ã€Œsetting - Secrets - Actionã€ï¼Œæ·»åŠ å¯†é’¥è¿›è¡ŒåŠ å¯†å¤„ç†ã€‚æ¯”å¦‚æ–°å»ºå¯†é’¥ PERSONAL_TOKENï¼ŒActions å‘½ä»¤ä¸­ä½¿ç”¨ ${{ secrets.PERSONAL_TOKEN }} æ¥æŒ‡ä»£è¯¥å¯†é’¥ã€‚\nä¸åŒä»“åº“é—´å¤åˆ¶ å¤åˆ¶æ–‡ä»¶åˆ°ç›®çš„åœ°ï¼Œæ–‡æ¡£æ²¡å˜åŒ–åˆ™ä¸ä¼šæ‰§è¡Œã€‚æ¡ˆä¾‹ä¸ºå°†å½“å‰ä»“åº“ main åˆ†æ”¯ä¸‹ docs çš„ README.md æ–‡ä»¶å¤åˆ¶åˆ°å¦ä¸€ä¸ªä»“åº“ rockbenben/LearnData/ è·¯å¾„ä¸‹ï¼Œå¦‚æœç›®æ ‡è·¯å¾„å­˜åœ¨ç›¸åŒæ–‡ä»¶ï¼Œåˆ™å°†è¦†ç›–ã€‚å¦‚æœè®© clean: true ç”Ÿæ•ˆï¼ŒActions ä¼šå°†ç›®æ ‡è·¯å¾„æƒ…å†µï¼Œç„¶åæ‰§è¡Œå¤åˆ¶ã€‚æ­¤åŠ¨ä½œéœ€æŒ‰ Creating a personal access token å»ºç«‹ ä¸ªäººè®¿é—®ä»¤ç‰Œï¼Œ\n1 2 3 4 - name: Copy file uses: andstor/copycat-action@v3 with: personal_token: ${{ secrets.PERSONAL_TOKEN }} src_path: docs/README.md dst_path: / dst_owner: rockbenben dst_repo_name: LearnData dst_branch: main src_branch: main #clean: true Actions å¤±è´¥é‡è¯• åœ¨ job å’Œ step ä¸­ä½¿ç”¨ if è¯­å¥ï¼Œåªæœ‰æ»¡è¶³æ¡ä»¶æ—¶æ‰æ‰§è¡Œå…·ä½“çš„ job æˆ– stepã€‚^[æœ€å…¨æ€»ç»“ï¼ŒGitHub Action è‡ªåŠ¨åŒ–éƒ¨ç½²]\n1 2 # ä»»åŠ¡çŠ¶æ€æ£€æŸ¥å‡½æ•° success() # å½“ä¸Šä¸€æ­¥æ‰§è¡ŒæˆåŠŸæ—¶è¿”å› truealways() # æ€»æ˜¯è¿”å› truecancelled() # å½“ workflow è¢«å–æ¶ˆæ—¶è¿”å› truefailure() # å½“ä¸Šä¸€æ­¥æ‰§è¡Œå¤±è´¥æ—¶è¿”å› true first_step ä¼šæ€»æ˜¯æ‰§è¡Œï¼Œsecond_step éœ€è¦ä¸Šä¸€æ­¥ first_step æ‰§è¡ŒæˆåŠŸæ‰ä¼šæ‰§è¡Œï¼Œthird_step åªæœ‰ä¸Šä¸€æ­¥ second_step æ‰§è¡Œå¤±è´¥æ‰æ‰§è¡Œã€‚å½“ third_step ä¸ second_step å‘½ä»¤ç›¸åŒæ—¶ï¼Œå°±å¯ä»¥è¾¾åˆ°å¤±è´¥é‡è¯•çš„æ•ˆæœäº†ã€‚\n1 2 3 4 jobs: first_job: name: My first job runs-on: ubuntu-latest steps: - name: first_step if: always() - name: second_step if: success() - name: third_step if: failure() å¸¸è§é—®é¢˜ GitHub å¿½ç•¥æŒ‡å®šæ–‡ä»¶ é¡¹ç›®è·¯å¾„æ–°å»ºä¸€ä¸ªå‘½åä¸º .gitignore çš„æ–‡ä»¶ï¼Œå°†æƒ³è¦å¿½ç•¥çš„æ–‡ä»¶å¤¹å’Œæ–‡ä»¶å†™å…¥ .gitignore æ–‡ä»¶ï¼Œæ¢è¡Œåˆ†éš”ã€‚\næ¯”å¦‚è¦å¿½ç•¥ node_modules æ–‡ä»¶å¤¹ï¼Œå°±ç›´æ¥åœ¨æ–‡ä»¶ä¸­è¾“å…¥ node_modulesã€‚\n","permalink":"https://zpc2222.github.io/posts/tools/github/","summary":"GitHub Actions GitHub Actions æ˜¯ä¸€ä¸ªæŒç»­é›†æˆå’ŒæŒç»­äº¤ä»˜ (CI/CD) å¹³å°ï¼Œå¯ç”¨äºè‡ªåŠ¨æ‰§è¡Œæ„å»ºã€æµ‹è¯•å’Œéƒ¨ç½²ç®¡é“ã€‚æ‚¨å¯ä»¥åˆ›å»ºå·¥ä½œæµç¨‹æ¥æ„å»ºå’Œæµ‹è¯•å­˜å‚¨åº“çš„æ¯ä¸ªæ‹‰å–è¯·æ±‚ï¼Œæˆ–å°†åˆå¹¶çš„æ‹‰","title":"GitHub"},{"content":" æ­£åˆ™ 30 åˆ†é’Ÿå…¥é—¨\nLEARN REGEX ä¸­æ–‡ç‰ˆ\nå®ç”¨è¡¨è¾¾å¼ {} é™å®šç¬¦ (è¡¨ç¤ºå›ºå®šä½æ•°)ã€‚æ¯”å¦‚ï¼š\\\\d{5} åŒ¹é…é•¿åº¦æœ‰ 5 ä¸ªçš„æ•°å­—ï¼Œ\\\\d{1,5} æœ€å°‘åŒ¹é… 1 ä¸ªï¼Œæœ€é•¿åŒ¹é… 5 ä¸ªæ•°å­—ã€‚\n.{30,} æŒ‡åŒ¹é…é•¿åº¦ 30 ä»¥ä¸Šçš„ä»»æ„å­—ç¬¦ä¸²ã€‚\n[aeiou] åŒ¹é…ä¸­æ‹¬å·ä¸­ä»»æ„å­—ç¬¦ã€‚\n[^aeiou] åŒ¹é…é™¤äº† aeiou è¿™å‡ ä¸ªå­—æ¯ä»¥å¤–çš„ä»»æ„å­—ç¬¦ã€‚\nHTTP é“¾æ¥åŒ¹é…ï¼šhttps?://[^\\s\u0026quot;ã€‚ï¼Ÿ,ï¼Œ?)#]+ï¼Œå¥å°¾ä¸å«ç©ºæ ¼ã€ä¸­è‹±æ–‡é€—å·ã€ä¸­æ–‡å¥å·ã€é—®å·ï¼Œä»…åŒ…å« http å’Œ https é“¾æ¥\nä¸‡èƒ½é“¾æ¥åŒ¹é…ï¼š[a-zA-Z]+://[^\\s\u0026quot;ã€‚ï¼Ÿ,ï¼Œ?)#]+ åŒ¹é…ä¸‡èƒ½å‰ç¼€ï¼Œå¦‚ ftpã€tencentã€larkã€‚\nåŒ¹é…è¡Œï¼š\n1 2 3 4 5 6 //åŒ¹é…å«æŸä¸ªå­—ç¬¦çš„è¡Œ var ZZMactch = \u0026#34;.*\u0026#34; + inputMatch.value + \u0026#34;.*\u0026#34;; //åŒ¹é…ä¸å«æŒ‡å®šå­—ç¬¦çš„è¡Œ var ZZMactch = \u0026#34;^((?!\u0026#34;+inputMatch.value+\u0026#34;).)*$\u0026#34;; //åŒ¹é…æ‰€æœ‰ä¸åŒ…æ‹¬ CSDN çš„è¡Œ ^((?!CSDN).)*$ åŒ¹é…ä¸åŒæ–‡æœ¬ç»„ï¼Œid= æˆ– contentId= åçš„å¤šä¸ªæ•°å­—ç¬¦å·\n1 2 (?\u0026lt;=id=)\\d* (?\u0026lt;=[?\u0026amp;](id|contentId)=)\\d+ ^((?!abc).)*admin((?!abc).)*$ åŒ¹é… ä¸åŒ…å« abc ä½†åŒ…å« admin çš„å­—ç¬¦ä¸²ï¼ŒåŒ¹é…æ•´è¡Œã€‚^[https://blog.csdn.net/thewindkee/article/details/52785763]\n((?!social.tmall.com)(?!ugc/detail.html).)*$ åŒ¹é…ä¸åŒ…å« social.tmall.com å’Œ ugc/detail.html çš„å­—ç¬¦ä¸²ï¼ŒåŒ¹é…æ•´è¡Œã€‚^[https://blog.csdn.net/xiiii/article/details/89450341]\n[â‚³$Â¢â‚´â‚¬â‚¤ï¿¥ï¼„ã€Š]([a-zA-Z0-9]{11})[â‚³$Â¢â‚´â‚¬â‚¤ï¿¥ï¼„ã€Š] åŒ¹é…æ·˜å£ä»¤ï¼Œ[] æŒ‡ä¸­å†…å®¹ä»»æ„åŒ¹é…ä¸€é¡¹çš†å¯ã€‚\nå‰ååŒ¹é… å‰ååŒ¹é…ï¼Œå‰åå…ƒç´ åªèƒ½å‡ºç°ä¸€æ¬¡ï¼Œå¦åˆ™å®¹æ˜“è¦†ç›–è¿‡å¤šã€‚\n1 2 3 4 5 6 7 8 9 10 11 12 13 //åŒ¹é…ä»»æ„ä»¥ a å¼€å¤´å¹¶ä»¥ b ç»“å°¾çš„å­—ç¬¦ï¼ŒåŒ¹é…å†…å®¹ä¸å« aã€b //å¦‚æœ a æœ‰ n ä¸ªï¼Œåˆ™åŒä¸€è¡Œä¹Ÿä¼šåŒ¹é… n æ¬¡ (?\u0026lt;=a).+(?=b) //å¦‚æœ b æœ‰ n ä¸ªï¼Œåˆ™åŒ¹é…æœ€åä¸€ä¸ª bï¼› //å¦‚æœéœ€è¦åŒ¹é…ç¬¬ä¸€ä¸ª bï¼Œåˆ™åŒ¹é…åŒºåŠ æ‡’æƒ°é™å®šç¬¦ï¼Ÿï¼Œä»£è¡¨é‡å¤ 1 æ¬¡æˆ–æ›´å¤šæ¬¡ï¼Œä½†å°½å¯èƒ½å°‘é‡å¤ (?\u0026lt;=.*a).+?(?=b) //åŒ¹é…ä»»æ„ä»¥ a å¼€å¤´å¹¶ä»¥ b ç»“å°¾çš„å­—ç¬¦ï¼ŒåŒ¹é…å†…å®¹åŒ…å« aã€b a(?\u0026lt;=a).+(?=b)b //åŒ¹é…å­—ç¬¦ä¸²ä¸­ a å’Œè¯ç»„ abc é—´çš„å­—ç¬¦ï¼Œå¦‚æœ abc ä¸å­˜åœ¨åˆ™å»å°¾éƒ¨ (?\u0026lt;=.*a).+(?=abc) æ­£åˆ™æ›¿æ¢ æ­£åˆ™å…¨å±€æ›¿æ¢ä¸èƒ½å¸¦ \\\\ï¼Œæ­¤æ—¶ç”¨åˆ†å‰²æ›¿æ¢æ›´æ–¹ä¾¿ã€‚\n1 2 3 var str = \u0026#34;dogdogdog\u0026#34;; var str2 = str.replace(/dog/g,\u0026#34;cat\u0026#34;); #å…¨å±€æ›¿æ¢ var str2 = str.split(\u0026#34;dog\u0026#34;).join(\u0026#34;cat\u0026#34;); #åˆ†å‰²æ›¿æ¢ è¡¨è¾¾å¼ä¿®é¥°ç¬¦ å…ƒå­—ç¬¦ï¼šåŒºåˆ†å¤§å°å†™\nå¸¸ç”¨æ­£åˆ™ä»£ç  è¯´æ˜ . åŒ¹é…é™¤æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å­—ç¬¦ * åŒ¹é… 0 ä¸ªæˆ–å¤šä¸ª.(æœ‰å¤šå°‘åŒ¹é…å¤šå°‘ï¼Œè´ªå©ªæ¨¡å¼) ? åŒ¹é… 0 ä¸ªæˆ– 1 ä¸ª (è‡³å°‘åŒ¹é…ä¸€ä¸ª) $ ä»¥ä»€ä¹ˆç»“å°¾çš„ï¼Œå¦‚\\\\d+0$ (ä»¥ 0 ç»“å°¾) ^ ä»¥ä»€ä¹ˆå¼€å¤´çš„ï¼Œå¦‚^httpåŒ¹é…ä»¥ http å¼€å¤´çš„å­—ç¬¦ä¸² \\w åŒ¹é…å­—æ¯æˆ–æ•°å­—æˆ–ä¸‹åˆ’çº¿æˆ–æ±‰å­— \\W åŒ¹é…ä»»æ„ä¸æ˜¯å­—æ¯ï¼Œæ•°å­—ï¼Œä¸‹åˆ’çº¿ï¼Œæ±‰å­—çš„å­—ç¬¦ \\d åŒ¹é…æ•°å­— \\D åŒ¹é…ä»»æ„éæ•°å­—çš„å­—ç¬¦ \\s åŒ¹é…ä»»æ„çš„ç©ºç™½ç¬¦ï¼ˆç©ºæ ¼ ,åˆ¶è¡¨ç¬¦ ) \\S åŒ¹é…ä»»æ„ä¸æ˜¯ç©ºç™½ç¬¦çš„å­—ç¬¦ \\r å›è½¦ç¬¦ \\n æ¢è¡Œç¬¦ (ä¸€èˆ¬æƒ…å†µä¸‹ä½¿ç”¨\\r\\n åŒ¹é…å›è½¦æ¢è¡Œ) \\t åˆ¶è¡¨ç¬¦ï¼ŒTab \\u4e00-\\u9fa5 éä¸­æ–‡ å¸¸ç”¨åˆ†ç»„è¯­æ³•\nåˆ†ç±» ä»£ç /è¯­æ³• è¯´æ˜ æ•è· (exp) åŒ¹é… expï¼Œå¹¶æ•è·æ–‡æœ¬åˆ°è‡ªåŠ¨å‘½åçš„ç»„é‡Œ (?\u0026lt;name\u0026gt;exp) åŒ¹é… expï¼Œå¹¶æ•è·æ–‡æœ¬åˆ°åç§°ä¸º name çš„ç»„é‡Œï¼Œä¹Ÿå¯ä»¥å†™æˆ (?\u0026rsquo;name\u0026rsquo;exp) (?:exp) åŒ¹é… expï¼Œä¸æ•è·åŒ¹é…çš„æ–‡æœ¬ï¼Œä¹Ÿä¸ç»™æ­¤åˆ†ç»„åˆ†é…ç»„å· é›¶å®½æ–­è¨€ (?=exp) åŒ¹é… exp å‰é¢çš„ä½ç½® (?\u0026lt;=exp) åŒ¹é… exp åé¢çš„ä½ç½® (?!exp) åŒ¹é…åé¢è·Ÿçš„ä¸æ˜¯ exp çš„ä½ç½® (?\u0026lt;!exp) åŒ¹é…å‰é¢ä¸æ˜¯ exp çš„ä½ç½® æ³¨é‡Š (?#comment) è¿™ç§ç±»å‹çš„åˆ†ç»„ä¸å¯¹æ­£åˆ™è¡¨è¾¾å¼çš„å¤„ç†äº§ç”Ÿä»»ä½•å½±å“ï¼Œç”¨äºæä¾›æ³¨é‡Šè®©äººé˜…è¯» ","permalink":"https://zpc2222.github.io/posts/tools/regex/","summary":"æ­£åˆ™ 30 åˆ†é’Ÿå…¥é—¨ LEARN REGEX ä¸­æ–‡ç‰ˆ å®ç”¨è¡¨è¾¾å¼ {} é™å®šç¬¦ (è¡¨ç¤ºå›ºå®šä½æ•°)ã€‚æ¯”å¦‚ï¼š\\\\d{5} åŒ¹é…é•¿åº¦æœ‰ 5 ä¸ªçš„æ•°å­—ï¼Œ\\\\d{1,5} æœ€å°‘åŒ¹é… 1 ä¸ªï¼Œæœ€é•¿åŒ¹é… 5","title":"æ­£åˆ™è¡¨è¾¾å¼"},{"content":"æ—©é¤ï¼šåŒ…å­ + è±†æµ†ã€æ¡ƒæé¢åŒ… + é²œç‰›å¥¶ã€‚\nåˆé¤ï¼šæ²™æ‹‰ + é¸¡è›‹ + ç™½è‚‰ï¼ˆé¸¡ã€é¸­ã€é±¼ï¼‰ã€‚\næ™šä¸Šï¼š7 ç‚¹åœæ­¢è¿›é£Ÿï¼Œé¥¿äº†åƒè‹¹æœã€æ²™æ‹‰ã€é¸¡è›‹ï¼Œé¸¡è›‹åªåƒè›‹ç™½ã€‚\n16:8 æ–­æ—¶æ³•ï¼šæ¯å¤© 8 å°æ—¶è¿›é£Ÿï¼Œ8 ç‚¹é’Ÿæ—©é¤ï¼Œ3 ç‚¹åç¦é£Ÿã€‚\nèŒ¶é¥® å¤å¤©å–é€‚åˆå†·æ³¡çš„ç»¿èŒ¶ã€çº¢èŒ¶ã€ç™½èŒ¶ã€èŠ±èŒ¶ç­‰ï¼Œè€Œå²©èŒ¶ä¸æ™®æ´±ç”ŸèŒ¶å†·æ³¡å°±ä¸å®¹æ˜“å¥½å–ã€‚^[å†·æ³¡èŒ¶å’Œçƒ­èŒ¶æ”¾å‡‰ï¼Œå¥½å–çº§åˆ«èƒ½ä¸€æ ·å—ï¼Ÿ]\nè›®å–œæ¬¢æ³°å¨çš„èŠ±èŒ¶ï¼Œæœ‰æ–°é²œçš„é¦™èŒ…ï¼Œä½†æ·˜å®å–çš„èŠ±èŒ¶æ”¾äº†å¾ˆå¤šç³–å—ã€‚\né›¶é£Ÿ ç‚¸ (çƒ˜çƒ¤)ï¼šçƒ˜çƒ¤é¢„çƒ­ï¼200 åº¦ï¼Œ20 åˆ†é’Ÿï¼ŒèŠå£«é¸¡æ’ (èƒ–)\u0026gt; æ³°æ£®ä¸Šæ ¡é¸¡å—\u0026gt; é¸¡ç±³èŠ±ï¼Œç‚¸é¸¡æ’ã€ç‰›è‚‰é¦…é¥¼å¤–é¢æœ‰é¢ç²‰ï¼Œä¸é€‚åˆçƒ˜çƒ¤ã€‚ å®‰äº•è‚‰ä¸¸ï¼šæ’’å°¿ç‰›è‚‰ä¸¸\u0026gt; åŒ…å¿ƒé±¼ä¸¸\u0026gt; ä»¿å¢¨é±¼ä¸¸ï¼Ÿ\u0026gt;ç‰›è‚‰ä¸¸\u0026gt; èŸ¹å‘³å® + é±¼ç±½åŒ…ã€‚å®‰äº•è‚‰ä¸¸è´¨é‡éƒ½ä¸é”™ï¼Œä¸è¿‡åˆ«ä¹°é‡è´©è£…ï¼Œè¿™æ˜¯ä¸åŒç§ç±»ã€‚ ç¨‹åºå‘˜å»¶å¯¿æŒ‡å— è¾“å…¥ å›ºä½“ï¼šåƒç™½è‚‰ï¼ˆ-11%~-3% ACMï¼‰ã€è”¬æœä¸ºä¸»ï¼ˆ-26%~-17% ACMï¼‰ï¼Œå¤šåƒè¾£ï¼ˆ-23% ACMï¼‰ï¼Œå¤šåƒåšæœï¼ˆ-27%~-4% ACMï¼‰ï¼Œå°‘åƒè›‹é»„ï¼ˆå¦åˆ™ +7% ACM/0.5 é¢—/å¤©ï¼‰ï¼Œä¸­é‡ç¢³æ°´ã€å¤šåƒæ¤ç‰©è›‹ç™½ï¼ˆ-10% ACMï¼‰ï¼Œå°‘åƒè¶…åŠ å·¥é£Ÿç‰©ï¼ˆ-62%~-18%ï¼‰ æ¶²ä½“ï¼šå–å’–å•¡ï¼ˆ-22%~-12% ACMï¼‰ï¼Œå–ç‰›å¥¶ï¼ˆ-17%~-10% ACMï¼‰ï¼Œå–èŒ¶ï¼ˆ-15%~-8% ACMï¼‰ï¼Œå°‘å–æˆ–ä¸å–ç”œå‘³é¥®æ–™ï¼ˆå¦åˆ™æ¯å¤©ä¸€æ¯ +7% ACMï¼Œ+å¤šå·´èƒºï¼‰ï¼Œæˆ’é…’æˆ–æ¯å‘¨ 100gï¼ˆçº¯é…’ç²¾é‡ (g)=é¥®é…’é‡ (ml)Ã— é…’ç²¾æµ“åº¦ (%)Ã— é…’ç²¾å¯†åº¦ 0.8g/mlï¼‰å†…ï¼ˆå¦åˆ™+~50% ACMï¼Œæ— ä¸Šé™ï¼‰ æ°”ä½“ï¼šä¸å¸çƒŸï¼ˆå¦åˆ™+~50% ACMï¼Œ-12~-11 å¹´å¯¿å‘½ï¼‰ å…‰ç…§ï¼šæ™’å¤ªé˜³ï¼ˆ-~40% ACMï¼‰ è¯ç‰©ï¼šäºŒç”²åŒèƒï¼ˆç³–å°¿ç—…äººç›¸æ¯”æ­£å¸¸äººå¯ä»¥ +3 å¹´ï¼‰ã€å¤åˆç»´ç”Ÿç´ ï¼ˆ-8% ç™Œç—‡é£é™©ï¼‰ã€äºšç²¾èƒºï¼ˆ-60%~-30% ACMï¼‰ã€è‘¡è„ç³–èƒºï¼ˆ-39% ACMï¼‰ è¾“å‡º è¿åŠ¨ï¼šæ¯å‘¨ 3 æ¬¡ 45 åˆ†é’ŸæŒ¥æ‹è¿åŠ¨ï¼ˆ-47% ACMï¼‰ æ—¥å¸¸ï¼šåˆ·ç‰™ï¼ˆ-25% ACMï¼‰ ç¡çœ ï¼šæ¯å¤©ç¡ 7 å°æ—¶å…¨å› æ­»äº¡ç‡æœ€ä½ï¼›ä¸” 22-24 ç‚¹é—´æœ€å¥½ï¼Œæ—©ç¡ +43% ACMï¼Œæ™šç¡ +15% ACMï¼ˆå­˜åœ¨äº‰è®®ï¼‰ ä¸Šä¸‹æ–‡ ä½“é‡ï¼šå‡è‚¥ï¼ˆ-54% ACMï¼‰ åœ¨å‘è¡¨åœ¨ã€Šç»†èƒã€‹æ‚å¿—çš„ ç»¼è¿°æ–‡ç«  ä¸­æè¿°äº† é•¿å¯¿é¥®é£Ÿï¼Œè¿™æ˜¯ä¸€ç§åŸºäºä»é£Ÿç‰©æˆåˆ†å’Œå¡è·¯é‡Œæ‘„å…¥ç­‰é¥®é£Ÿå„ä¸ªæ–¹é¢ç ”ç©¶çš„å¤šæ”¯æŸ±æ–¹æ³•ã€‚ç ”ç©¶äººå‘˜æŠ¥å‘Šè¯´ï¼Œç†æƒ³æƒ…å†µä¸‹ï¼Œä¸€å¤©çš„é¥­èœéƒ½åœ¨ 11â€”12 å°æ—¶çš„çª—å£å†…è¿›è¡Œï¼Œå…è®¸æ¯å¤©ç¦é£Ÿï¼Œæ¯ 3â€”4 ä¸ªæœˆè¿›è¡Œä¸ºæœŸ 5 å¤©çš„ç¦é£Ÿä¹Ÿå¯èƒ½æœ‰åŠ©äºé™ä½èƒ°å²›ç´ æŠµæŠ—ã€è¡€å‹å’Œå…¶ä»–ç–¾ç—…é£é™©å› ç´ ã€‚æœ—æ ¼æè¿°äº†é•¿å¯¿é¥®é£Ÿåœ¨ç°å®ç”Ÿæ´»ä¸­çš„æ ·å­ï¼šå¤§é‡çš„è±†ç±»ã€å…¨è°·ç‰©å’Œè”¬èœï¼›ä¸€äº›é±¼;æ²¡æœ‰çº¢è‚‰æˆ–åŠ å·¥è‚‰å’Œæå°‘é‡çš„ç™½è‚‰ï¼›ä½ç³–å’Œç²¾åˆ¶è°·ç‰©ï¼›ä¸€å®šé‡çš„åšæœå’Œæ©„æ¦„æ²¹ï¼›ä¸€äº›é»‘å·§å…‹åŠ›ã€‚\næ³¡æ¾¡ æµ¸æ³¡ 42â„ƒ ä»¥ä¸Šçš„æ°´æ¸©æœ€å¤šæ³¡ 3-5 åˆ†é’Ÿï¼Œ40â„ƒ å¯ä»¥æ³¡ 10 åˆ†é’Ÿï¼Œ37â„ƒ åˆ° 39â„ƒ çš„æ¸©æ°´ï¼Œå¯ä»¥æ³¡ 20-30 åˆ†é’Ÿã€‚\næ³¡æµ´åçš„æ¸…æ°´å†²æ·‹æ˜¯æœ‰å¿…è¦çš„ï¼Œå¤´å‘éƒ¨ä½å’Œé¢éƒ¨ç”¨å†·æ°´å†²æ·‹åˆ™æœ‰æå…¶è‰¯å¥½çš„ä¿å¥å’Œå»¶ç¼“è¡°è€çš„åŠŸæ•ˆã€‚\næ³¡æµ´ä½œç”¨ï¼š\nä½æ¸©ã€é•¿æ—¶é—´çš„æ³¡æµ´ - å¤±çœ ã€å‹åŠ›å¸¦æ¥çš„ç–²åŠ³ã€‚ ä¸Šç­å‰æˆ–è€…é‡å¤§æ´»åŠ¨å‰é«˜æ¸©æˆ–è€…ä½æ¸©å¹¶ä¸”çŸ­æ—¶é—´çš„æ³¡æµ´ - æ‰“èµ·ç²¾ç¥ã€‚ 0-21Â°ï¼Œæ”¶æ•›ç»„ç»‡å™¨å®˜å’Œç¥ç»ç³»ç»Ÿ\u0026ndash;å†·æ°´æµ´ã€‚ 32-40Â°ï¼Œèˆ’ç¼“ã€æ„‰å¿« - æ¸©æ°´æµ´ã€‚ 32-42Â°ï¼Œæ­¢ç—›ã€é•‡é™ï¼Œæµ´åæ— åŠ›éœ€è¦ä¼‘æ¯ - çƒ­æ°´æµ´ã€‚ å…¨èº«æµ´ï¼šè¦†ç›–è‚©è†€ä¸ºä¸»ï¼Œæ¸©æ°´ - æé«˜æ–°é™ˆä»£è°¢ã€‚ åŠèº«æµ´ï¼šè‚šè„å¹³é½ï¼Œä¸å¢åŠ å¿ƒè„è´Ÿæ‹…ï¼Œ30-40 åˆ†é’Ÿï¼Œæ…¢æ…¢å‘æ±—ï¼Œä¸ŠåŠèº«æŠ«æ¯›å·¾æˆ–é—´æ–­æ€§åŠ æ°´ - æ”¹å–„å¿ƒè„åŠŸèƒ½ï¼Œæ”¹å–„å†·æ€§ä½“è´¨ï¼Œç‰¹åˆ«é€‚åˆè€å¹´äººã€‚æ³¨æ„ï¼š39Â°ï¼Œè‚šè„ï¼Œ30 åˆ†é’Ÿä»¥ä¸Šã€‚ åæµ´ï¼š20 å˜ç±³é«˜åº¦çš„æ°´å¹³çº¿ï¼Œæµ¸å…¥è…°æ¤ã€å°¾æ¤ã€è‡€éƒ¨ï¼Œ15 åˆ†é’Ÿ - ç—”ç–®ã€ä¾¿ç§˜ã€å°¿è·¯æ„ŸæŸ“ã€ç”Ÿæ®–ç³»ç»ŸæŠ¤ç†ã€‚ å¦å¤–ï¼Œé¥®é…’åæœ€å¥½ä¸è¦ç«‹å³å»æ´—æ¾¡ï¼Œè¿™å¾ˆå®¹æ˜“å¼•å‘å¿ƒè¡€ç®¡ç—…ã€‚æ´—æ¾¡æ—¶å‡ºç°å¤´æ™•ã€èƒ¸é—·ã€çœ¼èŠ±ç­‰â€œæ¾¡å ‚ç»¼åˆå¾â€ï¼Œä¹Ÿéœ€ç«‹å³åœæµ´ï¼Œåˆ°åŒ»é™¢å°±è¯Šã€‚\nå‡è‚¥é£Ÿè°± ä½¿ç”¨é£Ÿè°±å‰ï¼Œå…ˆéœ€è¦å…»æˆæ­£ç¡®çš„å‡é‡ä¹ æƒ¯å’Œå¿ƒæ€ã€‚\nä¸è¦è®©è‡ªå·±é¥¿è‚šå­ï¼Œæ¯å¤©è‡³å°‘è¦åƒ 3 é¡¿æ­£é¤ã€‚ åƒç‚¹å¿ƒæˆ–æ­£é¤ä¹‹å‰å’Œä¹‹åéƒ½è¦å–ä¸€æ¯æ°´ï¼Œè¿›é£Ÿé¡ºåºæŒ‰è”¬èœ\u0026gt; é±¼è‚‰è›‹\u0026gt; ä¸»é£Ÿ é¥­ååŠå°æ—¶ä¸è¦åä¸‹ ä¸´ç¡å‰è‡³å°‘ 1 å°æ—¶åœæ­¢ç”¨é¤ï¼Œå¹¶ä¸”è¦å¤šå–æ°´ã€‚ æ¯å’¬ä¸€å£é£Ÿç‰©ï¼Œéƒ½è¦å’€åš¼ä¸€æ®µæ—¶é—´ã€‚ä»èº«ä½“çœŸæ­£é¥±è¶³åˆ°å¤§è„‘äº§ç”Ÿé¥±è¶³æ„Ÿéœ€è¦ 15 åˆ†é’Ÿã€‚åƒæ…¢ä¸€ç‚¹ï¼Œå°±ä¸å®¹æ˜“åƒå¾—è¿‡å¤šã€‚ æ¯å¤©ç§°ä½“é‡ï¼Œç„¶åæ‰¾å‡º 7 å¤©çš„å¹³å‡å€¼ã€‚ç¡®ä¿ä½“é‡æŒç»­ä¸‹é™å°±å¥½ï¼Œä¸éœ€è¦è§„å®šè‡ªå·±æ¯å‘¨å¿…é¡»å‡æ‰å¤šå°‘ä½“é‡ã€‚æœ‰æ—¶å€™ä½“é‡å¯èƒ½ä¼šå¢åŠ ï¼Œå°¤å…¶æ˜¯å¥³æ€§åœ¨æœˆç»æœŸé—´ä½“å†…æ°´åˆ†æ½´ç•™ï¼Œå®¹æ˜“æ°´è‚¿ï¼Œå’Œä½ çš„é¥®é£Ÿæˆ–é”»ç‚¼ä¹ æƒ¯æ²¡æœ‰å…³ç³»ã€‚ æ¯å‘¨åªå‡æ‰ 0.5-1 å…¬æ–¤ã€‚å¿«é€Ÿå‡è‚¥ä¼šå‡æ‰è‚Œè‚‰ï¼Œè€Œä¸æ˜¯è„‚è‚ªï¼Œè€Œä¸”ä¹Ÿå¾ˆéš¾é•¿æœŸç»´æŒä½“é‡ã€‚ æ—©é¤ åˆé¤ æ™šé¤ Day01 è°·ç‰©ç‰›å¥¶ (ç‡•éº¦ç‰‡ 40g+ å…¨è„‚å¥¶ç²‰ 40g+ è›‹ç™½ç²‰ 5g+ é»‘å’–å•¡ 2g)ï¼›12 ç²’å·´æ—¦æœ¨ï¼›è‹¹æœ 200g ä»€é”¦é¥­ (å¤§ç±³ 30g+ å°ç±³ 30g+ ç”œè±Œè±† 15g+ æ¾å­ä» 5g+ é…±ç‰›è‚‰ç¢ 30g+ èƒ¡èåœä¸ 30g)ï¼›è”¬èœæ²™æ‹‰ (ç”Ÿèœ 100g+ ç†Ÿé¸¡è›‹ + æ²¹é†‹æ±åŠæ±¤åŒ™ 4g)ï¼›çŒ•çŒ´æ¡ƒ 120gï¼›æ— ç³–é…¸å¥¶ 100g ç‡•éº¦ç±³é¥­ (ç‡•éº¦ç²’ 20g+ å¤§ç±³ 15g)ï¼›æ²¹ç…®è˜‘è‡é¸¡è‚‰è èœ (è èœ 200g+ è˜‘è‡ 50g+ é¸¡è…¿ 40g+ é¦™æ²¹ 1 æ±¤åŒ™ 8g)ï¼›è±†æµ† (é»„è±† 50g) Day02 å…¨éº¦ä¸‰æ˜æ²» (ç”Ÿèœ 70g+ é¸¡è›‹ + å…¨éº¦åå¸ 60g+ é¦™æ²¹ 2g)ï¼›12 ç²’åŸå‘³å¼€å¿ƒæœï¼›ç‰›å¥¶ 250g åŒè‰²èœèŠ± (è¥¿å…°èŠ± 100g+ èœèŠ± 100g+ é¦™æ²¹ 5g)ï¼›èŒ„æ±è™¾ä» (è™¾ä» 75g+ ç•ªèŒ„é…± 30g+ æ²¹ 8g)ï¼›äºŒç±³é¥­ (å°ç±³ 30g+ ç³™ç±³ 30g)ï¼›ç‰›å¥¶å’–å•¡ (ä½è„‚å¥¶ç²‰ 20g+ é»‘å’–å•¡ 2g)(å…ˆåƒä¸€åŠèœèŠ±) æœ¨è€³å°ç™½èœæ‚ç…® (å°ç™½èœ 150g+ åŒ—è±†è… 60g+ é¸¡å¿ƒ 60g+ é»‘æœ¨è€³ 6g+ é¦™æ²¹ 3g)ï¼›çº¢è±†ç´«ç±³è–ç±³ç²¥ (ç´«çº¢ç³¯ç±³ 30g+ è–ç±³ 15g+ èµ¤å°è±† 30g)ï¼›èœœæ©˜ 100g(åŠ é¤) Day03 çº¢è±†ç´«ç±³è–ç±³ç²¥ (ç´«çº¢ç³¯ç±³ 30g+ è–ç±³ 15g+ èµ¤å°è±† 30g)ï¼›æ°´ç…®è›‹ï¼›æœä»è èœ (è èœ 80g+ èŠ±ç”Ÿä» 10g+ é¦™æ²¹ 3g)ï¼›ç‰›å¥¶å’–å•¡ (ä½è„‚å¥¶ç²‰ 20g+ é»‘å’–å•¡ 2g) åœŸè±†æ²™æ‹‰ (åœŸè±† 200g+ ç”œè±Œè±† 30g+ ç™½èŠéº» 3g+ é¸¡è›‹ + åƒå²›é…± 1 æ±¤åŒ™ 8g)ï¼›é…±å¤é¸­è‚ 60gï¼›æ— ç³–é…¸å¥¶ 100gï¼›10 ç²’å°ç•ªèŒ„ ç‡•éº¦å°ç±³ç²¥ (ç‡•éº¦ç‰‡ 30g+ å°ç±³ 30g+ å°éº¦èƒšèŠ½ 10g)ï¼›è’¸è™¾çš®å°æ²¹èœ (å°æ²¹èœ 180g+ è™¾çš® 5g+ å…¨éº¦ç²‰ 30g+ èŠ±æ¤’æ²¹ 3g)ï¼›çƒ¤é¸¡è…¿ 80g Day04 å¥¶é¦™é†ªç³Ÿç‡•éº¦ (é†ªç³Ÿ 100g+ ç‡•éº¦ç‰‡ 30g+ å…¨è„‚å¥¶ç²‰ 40g)ï¼›é¸¡è›‹ï¼›12 ç²’å·´æ—¦æœ¨ ç´«èœè›‹èŠ±æ±¤ (æµ·è‹” 4g+ ç†ŸèŠéº» 1g+ é¸¡è›‹)ï¼›ç‰›å¥¶ç‡•éº¦ (ç‡•éº¦ç‰‡ 20g+ å…¨è„‚ç‰›å¥¶ 250g)ï¼›é…¸å¥¶ 100gï¼›å°å¶æ©˜ 150gï¼›å…¨éº¦åå¸ 30g ç«è…¿æœ¨è€³ç…®æ²¹èœ (æ²¹èœ 250g+ æœ¨è€³ 10g+ æ–¹ç«è…¿ 60g+ é¦™æ²¹ 1 æ±¤åŒ™ 8g)ï¼›è’¸çº¢è–¯ 180gï¼›æ— ç³–é…¸å¥¶ (é…¸å¥¶ 100g+ è›‹ç™½ç²‰ 5g)(å…ˆåƒæ²¹èœ) Day05 è’¸é£Ÿç‰©å¥—é¤ (é“æ£å±±è¯ 80g+ ç³¯ç‰ç±³å¸¦è½´ 150g+ èƒ¡èåœåŠæ ¹ 100g)ï¼›å¥¶é¦™é»„è±†æµ† (é»„è±† 20g+ é»‘èŠéº» 5g+ å…¨è„‚å¥¶ç²‰ 20g)ï¼›é¸¡è›‹ç¾¹ (é¸¡è›‹ + é¦™æ²¹ 2g)ï¼›æ¡‚åœ† 150g å†²æ‚ç²®ç³Š (çƒ¤çº¢è±†ç²‰ 15g+ ç‡•éº¦ç²‰ 20g+ å°ç±³ç²‰ 15g+ å…¨è„‚å¥¶ç²‰ 10g)ï¼›ç”Ÿèœæ²™æ‹‰ (ç”Ÿèœ 150g+ åƒå²›é…± 10g)ï¼›é…¸å¥¶ 200gï¼›è“è“ 100gï¼›è‘¡è„å¹² 10g åšæœåœŸè±†æ³¥ (åœŸè±† 250g+ çƒ¤èŠ±ç”Ÿç¢ 12g+ æ–¹ç«è…¿ 70g)ï¼›æ²¹ç…®æœ¨è€³å°ç™½èœ (å°ç™½èœ 200g+ æœ¨è€³ 6g+ é¦™æ²¹ 4g)ï¼›é…¸å¥¶ 100g Day06 é¦™è•‰ç‡•éº¦è›‹ç³• (é¦™è•‰ 120g+ ç‡•éº¦ç‰‡ 30g+ é¸¡è›‹ + ç‰›å¥¶ 200g)ï¼›æ ¸æ¡ƒä»æ‹Œè±Œè±†è‹— (è±Œè±†è‹—/é¸¡æ¯›èœ 100g+ æ ¸æ¡ƒä» 15g+ èŠéº»æ²¹ 4g) é¸¡è…¿ç‚–å››å® (é¸¡è…¿è‚‰ 100g+ é²œè˜‘ 80g+ é»„èŠ±èœ 10g+ ç”œè±Œè±† 80g+ æœ¨è€³ 10g)ï¼›é“¶è€³è¥¿å…°èŠ± (è¥¿å…°èŠ± 200g+ é“¶è€³ 8g+ é¦™æ²¹ 4g) ç‚–ç´ ä¸‰é²œ (å†¬ç¬‹ 80g+ é¦™è‡ 10g+ é»„è±†èŠ½ 120g+ é¦™æ²¹åŠæ±¤åŒ™ 4g)ï¼›æ¸…è’¸é±¼ (è’¸é²ˆé±¼ 120g+ èŠ±ç”Ÿæ²¹ 4g)ï¼›çƒ¤çº¢è–¯ 250g(æŒ‰åºé£Ÿç”¨) Day07 è‹¹æœå…¨éº¦ç…é¥¼ (è‹¹æœè‚‰ 180g+ å…¨éº¦ç²‰ 20g+ è‘¡è„å¹² 3g+ å…¨è„‚å¥¶ç²‰ 10g+ æ²¹ 3g)ï¼›éº¦èƒšçº¢æ£è±†æµ† (çƒ¤é»„è±† 15g+ çƒ¤é»‘èŠéº» 8g+ å¤§æ£è‚‰ 10g+ ç†Ÿå°éº¦èƒšèŠ½ 10g) ç”Ÿèœé¸¡è›‹æ²™æ‹‰ (ç”Ÿèœ 200g+ é¸¡è›‹*2+ åƒå²›æ²™æ‹‰é…± 8g)ï¼›éº¦èƒšçº¢æ£è±†æµ† (çƒ¤é»„è±† 15g+ çƒ¤é»‘èŠéº» 8g+ å¤§æ£è‚‰ 10g+ ç†Ÿå°éº¦èƒšèŠ½ 10g)ï¼›é…¸å¥¶ 150gï¼›çŒ•çŒ´æ¡ƒ 120g ç”˜è–¯çº¢ç±³é¥­ (çº¢è–¯ 100g+ çº¢ç±³ 20g+ ç™½ç±³ 20g)ï¼›ç‰›è‚‰ç‚–èœ (ç‰›è‚‰ 100g+ é¦™è‡ 8g+ èƒ¡èåœ 40g+ é­”èŠ‹ç²‰ä¸ 20g)ï¼›æœä»è èœ (è èœ 200g+ èŠ±ç”Ÿä» 8g+ é¦™æ²¹ 4g) Day08 å…¨éº¦é¢åŒ… 70gï¼›ç‰›å¥¶ 240gï¼›æ°´ç…®é¸¡è›‹ï¼›æ¡‚åœ† 120gï¼›9 ç²’å·´æ—¦æœ¨ æ²¹ç…®æœ¨è€³å°ç™½èœé¸¡ (å°ç™½èœ 25g+ å¤æ°´è±†è… 100g+ é¸¡å¿ƒ 50g+ é»‘æœ¨è€³ 2g+ é¦™æ²¹ 3g)ï¼›ç‚–ç´ ä¸‰é²œ (å†¬ç¬‹ 40g+ é¦™è‡ 4g+ é»„è±†èŠ½ 20g+ é¦™æ²¹ 2g)ï¼›è’¸çº¢è–¯ 200gï¼›å»çš®å°å¶æ©˜ 200g æ‚ç²®ç³Š (çƒ¤çº¢è±†ç²‰ 13g+ ç‡•éº¦ç²‰ 13g+ å°ç±³ç²‰ 13g+ è„±è„‚å¥¶ç²‰ 4g)ï¼›ç«è…¿æœ¨è€³ç…®æ²¹èœ (æ²¹èœ 100g+ æœ¨è€³ 5g+ æ–¹ç«è…¿ 75g+ é¦™æ²¹ 5g)ï¼›æ— ç³–é…¸å¥¶ 130g Day09 é¦™è•‰ç‡•éº¦è›‹ç³• (é¦™è•‰ 120g+ ç‡•éº¦ç‰‡ 50g+ é¸¡è›‹ + ç‰›å¥¶ 240g)ï¼›15 ç²’å¼€å¿ƒæœ ç‡•éº¦å°ç±³æµ“ç²¥ (ç‡•éº¦ç‰‡ 25g+ å°ç±³ 13g+ å°éº¦èƒšèŠ½ 13g)ï¼›ç”Ÿèœæ²™æ‹‰ (ç”Ÿèœ 200g+ åƒå²›é…± 4g)ï¼›æ¸…è’¸é±¼ (è’¸é²ˆé±¼ 80g+ èŠ±ç”Ÿæ²¹ 4g)ï¼›è±†æµ† (é»„è±† 44g) äºŒç±³é¥­ (å°ç±³ 38g+ ç³™ç±³ 15g)ï¼›è’¸è™¾çš®å°æ²¹èœ (å°æ²¹èœ 200g+ è™¾çš® 6g+ å…¨éº¦ç²‰ 10g)ï¼›èŒ„æ±è™¾ä» (è™¾ä» 80g+ ç•ªèŒ„é…± 10g+ èŠ±ç”Ÿæ²¹ 4g)ï¼›çƒ¤é¸¡è…¿è‚‰ 45g Day10 è‹¹æœå…¨éº¦ç…é¥¼ (è‹¹æœè‚‰ 105g+ å…¨éº¦ç²‰ 50g+ è‘¡è„å¹² 3g+ å…¨è„‚å¥¶ç²‰ 30g+ æ²¹ 3g)ï¼›é¸¡è›‹ç¾¹ (é¸¡è›‹ + é¦™æ²¹ 2g) è’¸åœŸè±† (åœŸè±† 200g+ æ–¹ç«è…¿ 75g+ èŠ±ç”Ÿç¢ 2g)ï¼›èŒ„æ±è™¾ä» (è™¾ä» 80g+ ç•ªèŒ„é…± 10g+ èŠ±ç”Ÿæ²¹ 3g)ï¼›çŒ•çŒ´æ¡ƒ 150g ç”˜è–¯çº¢ç±³é¥­ (çº¢è–¯ 50g+ çº¢ç±³ 25g+ ç™½ç±³ 25g)ï¼›æ²¹ç…®æœ¨è€³å°ç™½èœé¸¡ (å°ç™½èœ 100g+ å¤æ°´è±†è… 50g+ é¸¡å¿ƒ 50g+ æœ¨è€³ 4g)ï¼›è±†æµ† (é»„è±† 30g) Day11 è°·ç‰©ç‰›å¥¶ (ç‡•éº¦ç‰‡ 50g+ å…¨è„‚å¥¶ç²‰ 30g+ é»‘å’–å•¡ 2g)ï¼›é¸¡è›‹ï¼›10 ç²’å·´æ—¦æœ¨ï¼›èœœæ©˜ 120g ä»€é”¦é¥­ (å¤§ç±³ 50g+ å°ç±³ 25g+ ç”œè±Œè±† 8g+ æ¾å­ä» 2g+ é…±ç‰›è‚‰ç¢ 70g+ èƒ¡èåœä¸ 20g)ï¼›é“¶è€³è¥¿å…°èŠ± (è¥¿å…°èŠ± 50g+ é“¶è€³ 4g+ é¦™æ²¹ 4g) ç‡•éº¦ç±³é¥­ (ç‡•éº¦ç²’ 25g+ å¤§ç±³ 38g)ï¼›ç‰›è‚‰ç‚–èœ (ç‰›è‚‰ 50g+ é¦™è‡ 7g+ èƒ¡èåœ 20g+ é­”èŠ‹ç²‰ä¸ 20g)ï¼›çƒ¤é¸¡è…¿è‚‰ 50g Day12 å¥¶é¦™é†ªç³Ÿç‡•éº¦ (é†ªç³Ÿ 69g+ ç‡•éº¦ç‰‡ 38g+ å…¨è„‚å¥¶ç²‰ 30g)ï¼›æœä»è èœ (è èœ 150g+ èŠ±ç”Ÿä» 3g+ é¦™æ²¹ 3g)ï¼›é¸¡è›‹ç¾¹ åœŸè±†é¸¡è›‹è±Œè±†æ²™æ‹‰ (åœŸè±† 300g+ ç”œè±Œè±† 16g+ ç™½èŠéº» 3g+ é¸¡è›‹ + åƒå²›é…± 4g)ï¼›ç‰›è‚‰ç‚–èœ (ç‰›è‚‰ 50g+ é¦™è‡ 4g+ èƒ¡èåœ 20g+ é­”èŠ‹ç²‰ä¸ 20g+ é¦™æ²¹ 2g) è’¸é£Ÿç‰©å¥—é¤ (é“æ£å±±è¯ 100g+ ç³¯ç‰ç±³å¸¦è½´ 300g+ èƒ¡èåœ 20g)ï¼›æ²¹ç…®è˜‘è‡é¸¡è‚‰è èœ (è èœ 50g+ è˜‘è‡ 35g+ é¸¡è…¿ 50g+ é¦™æ²¹ 5g)ï¼›æ— ç³–é…¸å¥¶ 120g Day13 çº¢è±†ç´«ç±³è–ç±³ç²¥ (ç´«çº¢ç³¯ç±³ 25g+ è–ç±³ 25g+ çº¢å°è±† 13g)ï¼›è”¬èœæ²™æ‹‰ (ç”Ÿèœ 200g+ ç†Ÿé¸¡è›‹ + æ²¹é†‹æ± 5g)ï¼›ç‰›å¥¶å’–å•¡ (ç‰›å¥¶ 240g+ å’–å•¡ 2g) æ ¸æ¡ƒä»æ‹Œè±Œè±†è‹— (è±Œè±†è‹—/é¸¡æ¯›èœ 100g+ æ ¸æ¡ƒä» 8g+ é¦™æ²¹ 3g)ï¼›çƒ¤çº¢è–¯ 200gï¼›é…±ç‰›è‚‰ 70gï¼›çŒ•çŒ´æ¡ƒ 150g éº¦èƒšçº¢æ£è±†æµ† (çƒ¤é»„è±† 30g+ çƒ¤é»‘èŠéº» 16g+ å¤§æ£è‚‰ 20g+ ç†Ÿå°éº¦èƒšèŠ½ 20g)ï¼›æ¸…è’¸é±¼ (è’¸é²ˆé±¼ 80g+ èŠ±ç”Ÿæ²¹ 2g)ï¼›æœä»è èœ (è èœ 150g+ èŠ±ç”Ÿä» 2g+ é¦™æ²¹ 1g) Day14 é¸¡è›‹ç”Ÿèœä¸‰æ˜æ²» (ç”Ÿèœ 150g+ é¸¡è›‹ + å…¨éº¦åå¸ 88g+ é¦™æ²¹ 5g)ï¼›ç‰›å¥¶ 240g é¸¡è…¿ç‚–å››å® (é¸¡è…¿è‚‰ 50g+ é²œè˜‘ 35g+ é»„èŠ±èœ 4g+ ç”œè±Œè±† 8g+ æœ¨è€³ 4g)ï¼›ç‡•éº¦ç±³é¥­ (ç‡•éº¦ç²’ 25g+ å¤§ç±³ 25g)ï¼›è‘¡è„å¹² 25g åŒè‰²èœèŠ± (è¥¿å…°èŠ± 50g+ èœèŠ± 40g+ æ²¹é†‹æ± 2g)ï¼›èŒ„æ±è™¾ä» (è™¾ä» 80g+ ç•ªèŒ„ 10g+ æ²¹ 2g)ï¼›äºŒç±³é¥­ (å°ç±³ 38g+ ç³™ç±³ 25g)ï¼›ç´«èœè›‹èŠ±æ±¤ (æµ·è‹” 2g+ é¸¡è›‹*1) Day15 çº¢è±†ç´«ç±³è–ç±³ç²¥ (ç´«çº¢ç³¯ç±³ 25g+ è–ç±³ 25g+ èµ¤å°è±† 13g)ï¼›æ ¸æ¡ƒä»æ‹Œè±Œè±†è‹— (è±Œè±†è‹—/é¸¡æ¯›èœ 75g+ æ ¸æ¡ƒä» 3g+ é¦™æ²¹ 2g)ï¼›é¸¡è›‹ç¾¹ (é¸¡è›‹*1+ é¦™æ²¹ 1g)ï¼›æ— ç³–é…¸å¥¶ 240g æ²¹ç…®æœ¨è€³å°ç™½èœé¸¡ (å°ç™½èœ 100g+ å¤æ°´è±†è… 100g+ é¸¡å¿ƒ 50g+ æœ¨è€³ 4g+ æ²¹ 5g)ï¼›äºŒç±³é¥­ (å°ç±³ 50g+ ç³™ç±³ 25g) ç”˜è–¯çº¢ç±³é¥­ (çº¢è–¯ 50g+ çº¢ç±³ 25g+ å¤§ç±³ 25g)ï¼›ç‰›è‚‰ç‚–èœ (ç‰›è‚‰ 50g+ é¦™è‡ 4g+ èƒ¡èåœ 20g+ é­”èŠ‹ç²‰ä¸ 20g+ æ²¹ 5g)ï¼›çƒ¤é¸¡è…¿è‚‰ 50g Day16 å¥¶é¦™é†ªç³Ÿç‡•éº¦ (é†ªç³Ÿ 35g+ ç‡•éº¦ç‰‡ 38g+ å…¨è„‚å¥¶ç²‰ 30g)ï¼›é¸¡è›‹ï¼›èœœæ©˜ 120g è”¬èœæ²™æ‹‰ (ç”Ÿèœ 200g+ é¸¡è›‹ + æ²¹é†‹æ± 5g)ï¼›æ¸…è’¸é±¼ (è’¸é²ˆé±¼ 80g+ èŠ±ç”Ÿæ²¹ 5g)ï¼›è’¸åœŸè±† 300g æ²¹ç…®é¸¡è‚‰è˜‘è‡è èœ (è èœèœ 100g+ è˜‘è‡ 35g+ é¸¡è…¿è‚‰ 75g+ é¦™æ²¹ 5g)ï¼›è’¸çº¢è–¯ 250gï¼›è±†æµ† (é»„è±† 50g) Day17 é¦™è•‰ç‡•éº¦è›‹ç³• (é¦™è•‰ 80g+ ç‡•éº¦ç‰‡ 50g+ é¸¡è›‹ + ç‰›å¥¶ 240g) ç²‰è’¸åœŸè±†é¸¡è‚‰ (åœŸè±† 200g+ é¸¡è…¿è‚‰ 50g+ è’¸è‚‰ç±³ç²‰ 5g+ çƒ¤èŠ±ç”Ÿç¢ 3g)ï¼›åŒè‰²èœèŠ± (è¥¿å…°èŠ± 50g+ èœèŠ± 80g+ æ²¹é†‹æ± 3g)ï¼›é…±ç‰›è‚‰ 150gï¼›çŒ•çŒ´æ¡ƒ 35g éº¦èƒšçº¢æ£è±†æµ† (çƒ¤é»„è±† 30g+ çƒ¤é»‘èŠéº» 16g+ å¤§æ£è‚‰ 20g+ ç†Ÿå°éº¦èƒšèŠ½ 20g)ï¼›ç«è…¿æœ¨è€³ç…®æ²¹èœ (æ²¹èœ 100g+ æœ¨è€³ 4g+ æ–¹ç«è…¿ 75g+ é¦™æ²¹ 4g) Day18 é¸¡è›‹ç”Ÿèœä¸‰æ˜æ²» (ç”Ÿèœ 150g+ é¸¡è›‹ + å…¨éº¦åå¸ 88g+ é¦™æ²¹ 3g)ï¼›å¥¶é¦™é»„è±†æµ† (é»„è±† 13g+ é»‘èŠéº» 3g+ å…¨è„‚å¥¶ç²‰ 20g) æ‚ç²®ç³Š (çƒ¤çº¢è±†ç²‰ 13g+ ç‡•éº¦ç²‰ 13g+ å°ç±³ç²‰ 13g+ è„±è„‚å¥¶ç²‰ 2g)ï¼›æ²¹ç…®æœ¨è€³å°ç™½èœé¸¡ (å°ç™½èœ 150g+ å¤æ°´è±†è… 40g+ é¸¡å¿ƒ 75g+ æœ¨è€³ 4g+ é¦™æ²¹ 5g)ï¼›è‹¹æœ 150g è’¸é£Ÿç‰©å¥—é¤ (é“æ£å±±è¯ 60g+ ç³¯ç‰ç±³å¸¦è½´ 200g+ èƒ¡èåœ 100g)ï¼›é¸¡è…¿ç‚–å››å® (é¸¡è…¿è‚‰ 50g+ é²œè˜‘ 17g+ é»„èŠ±èœ 2g+ ç”œè±Œè±† 4g+ é»„è±†èŠ½ 10g)ï¼›ç”Ÿèœæ²™æ‹‰ (ç”Ÿèœ 50g+ åƒå²›é…± 4g)ï¼›æ— ç³–é…¸å¥¶ 130g Day19 è‹¹æœå…¨éº¦ç…é¥¼ (è‹¹æœè‚‰ 60g+ å…¨éº¦ç²‰ 50g+ è‘¡è„å¹² 3g+ å…¨è„‚å¥¶ç²‰ 20g+ æ²¹ 5g)ï¼›ç‰›å¥¶ 240g åœŸè±†é¸¡è›‹è±Œè±†æ²™æ‹‰ (åœŸè±† 300g+ ç”œè±Œè±† 32g+ ç™½èŠéº» 2g+ é¸¡è›‹ + åƒå²›é…± 4g)ï¼›èŒ„æ±è™¾ä» (è™¾ä» 80g+ ç•ªèŒ„é…± 2g+ æ²¹ 10g) ç‡•éº¦å°ç±³æµ“ç²¥ (ç‡•éº¦ç‰‡ 13g+ å°ç±³ 38g+ å°éº¦èƒšèŠ½ 13g)ï¼›ç«è…¿æœ¨è€³ç…®æ²¹èœ (æ²¹èœ 100g+ æœ¨è€³ 4g+ æ–¹ç«è…¿ 75g)ï¼›æ— ç³–é…¸å¥¶ 130g Day20 è’¸é£Ÿç‰©å¥—é¤ (é“æ£å±±è¯ 60g+ ç³¯ç‰ç±³å¸¦è½´ 200g+ èƒ¡èåœ 100g)ï¼›ç´«èœè›‹èŠ±æ±¤ (æµ·è‹” 2g+ é¸¡è›‹*1)ï¼›æœä»è èœ (è èœ 100g+ èŠ±ç”Ÿä» 3g+ é¦™æ²¹ 3g) ç‚–ç´ ä¸‰é²œ (å†¬ç¬‹ 40g+ é¦™è‡ 17g+ é»„è±†èŠ½ 20g+ é¦™æ²¹ 3g)ï¼›ç‰›è‚‰ç‚–èœ (ç‰›è‚‰ 50g+ é¦™è‡ 4g+ èƒ¡èåœ 10g+ é­”èŠ‹ç²‰ä¸ 20g)ï¼›ç‡•éº¦ç±³é¥­ (ç‡•éº¦ç²’ 25g+ å¤§ç±³ 50g)ï¼›çƒ¤é¸¡è…¿è‚‰ 50g ä»€é”¦é¥­ (å¤§ç±³ 38g+ å°ç±³ 25g+ ç”œè±Œè±† 8g+ æ¾å­ä» 3g+ é…±ç‰›è‚‰ç¢ 70g+ èƒ¡èåœä¸ 20g)ï¼›é“¶è€³è¥¿å…°èŠ± (è¥¿å…°èŠ± 25g+ é“¶è€³ 4g+ é¦™æ²¹ 2g) Day21 è°·ç‰©ç‰›å¥¶ (ç‡•éº¦ç‰‡ 50g+ å…¨è„‚å¥¶ç²‰ 30g+ é»‘å’–å•¡ 2g)ï¼›é¸¡è›‹ï¼›æ¡‚åœ† 120g æ²¹ç…®é¸¡è‚‰è˜‘è‡è èœ (è èœèœ 100g+ è˜‘è‡ 70g+ é¸¡è…¿è‚‰ 50g+ é¦™æ²¹ 5g)ï¼›çƒ¤çº¢è–¯ 200gï¼›çŒ•çŒ´æ¡ƒ 150gï¼›æ— ç³–é…¸å¥¶ 130g ç²‰è’¸åœŸè±†é¸¡è‚‰ (åœŸè±† 100g+ é¸¡è…¿è‚‰ 50g+ è’¸è‚‰ç±³ç²‰ 5g+ çƒ¤èŠ±ç”Ÿç¢ 2g)ï¼›èŒ„æ±è™¾ä» (è™¾ä» 80g+ ç•ªèŒ„é…± 10g+ æ²¹ 1g)ï¼›äºŒç±³é¥­ (å°ç±³ 25g+ ç³™ç±³ 13g)ï¼›æ ¸æ¡ƒä»æ‹Œè±Œè±†è‹— (è±Œè±†è‹—/é¸¡æ¯›èœ 75g+ æ ¸æ¡ƒä» 5g+ é¦™æ²¹ 2g) ä»¥ä¸Šé£Ÿè°±æ•´ç†è‡ªèŒƒå¿—çº¢è€å¸ˆçš„ã€Šåƒå‡ºå¥½èº«æï¼21 å¤©è¥å…»é£Ÿè°±ã€‹ï¼Œä¾µæƒåˆ ã€‚\né£Ÿè°±æ³¨æ„ï¼š\næ™šé¤æ—¶è¡¥å……å¤åˆ B æ—ç»´ç”Ÿç´ è¯ç‰‡ï¼Œä¹³ç³–æ•æ„Ÿè€…å¯ä»¥å°†çº¯ç‰›å¥¶æ¢æˆä½ä¹³ç³–å¥¶ã€‚ è’¸è›‹ç¾¹å¯ä»¥ç”¨æ°´ç…®è›‹æ›¿ä»£ï¼›é¸¡å¿ƒã€é¸­è‚ã€æ–¹ç«è…¿å¯ä»¥ç”¨é¸¡è…¿è‚‰ã€é…±ç‰›è‚‰æ›¿æ¢ï¼›ä»€é”¦é¥­ä¸­çš„é…±ç‰›è‚‰ç¢æ¢æˆç‚’é¸¡ä¸ï¼›æ¾å­ä»å¯ä»¥æ¢æˆç†ŸèŠéº»æˆ–å¼€å¿ƒæœç¢ï¼›å°å¶æ©˜å¯ä»¥æ›¿æ¢æˆç­‰é‡å…¶ä»–ç”œåº¦ä½çš„æ–°é²œæ°´æœï¼Œå¦‚è‰è“æˆ–åŠä¸ªè‹¹æœç­‰ï¼›æ¡‚åœ†å¯ä»¥æ¢æˆå…¶ä»–è‡ªå·±çˆ±åƒã€åƒäº†ä¹‹åèƒƒè‚ èˆ’æœçš„åº”å­£æ°´æœï¼Œæ¯”å¦‚æ©˜å­ã€æ©™å­ã€çŒ•çŒ´æ¡ƒç­‰ã€‚æ°´æœå¯ä»¥åˆé¥­å‰ä¸€å°æ—¶é£Ÿç”¨ã€‚ å°ç±³ã€ç‡•éº¦æå‰æµ¸æ³¡åŠå°æ—¶åˆ°ä¸€å°æ—¶å†å’Œå¤§ç±³ä¸€èµ·ç…®å£æ„Ÿè¾ƒå¥½ã€‚å¦‚æœæ²¡æœ‰æ‚ç²®ç²‰ï¼Œå¯ä»¥ç›´æ¥ç”¨è¿™äº›æ‚ç²®ç…®æˆé¥­ï¼Œæ¯æ¬¡ç…®å¤šä¸€ç‚¹ï¼Œåˆ†æˆå‡ ä»½å†·å†»èµ·æ¥ï¼Œæ¯æ¬¡è’¸çƒ­åƒä¸€ä»½ã€‚ é£Ÿè°±éƒ¨åˆ†å¯è¿›è¡Œå¾®è°ƒï¼Œå¦‚æœä¸ä¼šåšï¼Œå¯ç›´æ¥æŒ‰åŸæ–™é£Ÿç”¨ã€‚ ","permalink":"https://zpc2222.github.io/posts/life/eat/","summary":"æ—©é¤ï¼šåŒ…å­ + è±†æµ†ã€æ¡ƒæé¢åŒ… + é²œç‰›å¥¶ã€‚ åˆé¤ï¼šæ²™æ‹‰ + é¸¡è›‹ + ç™½è‚‰ï¼ˆé¸¡ã€é¸­ã€é±¼ï¼‰ã€‚ æ™šä¸Šï¼š7 ç‚¹åœæ­¢è¿›é£Ÿï¼Œé¥¿äº†åƒè‹¹æœã€æ²™æ‹‰ã€é¸¡è›‹ï¼Œé¸¡è›‹åªåƒè›‹ç™½ã€‚ 16:8 æ–­æ—¶æ³•","title":"å¥åº·é¥®é£Ÿ"},{"content":"è‡ªèº«å¥åº· å°¿ç´ ä¹³è†ï¼šæŸ”è½¯çš®è‚¤ï¼Œé˜²æ­¢å¹²è£‚ï¼Œæ·±å±‚æ»‹æ¶¦ã€‚\nç»´ a é…¸ä¹³è†ï¼šæ›´æ–°è¡¨çš®ï¼Œå»é™¤è§’è´¨ï¼Œé¿å…‰åªèƒ½æ™šä¸Šç”¨ã€‚\nå£¬äºŒé…¸ï¼šç–é€šæ¯›å­”å µå¡ï¼Œæ”¹å–„é»‘å¤´ã€‚éœ€å»ºç«‹è€å—ï¼Œéµå¾ª SCT æ³•åˆ™ï¼šä»çŸ­æ—¶é—´åˆ°é•¿æ—¶é—´ï¼Œæ¯å¤©æ¯æ¬¡ 5-10 åˆ†é’Ÿé€’å¢ï¼›åˆšå¼€å§‹æ¶‚æŠ¹ï¼Œå¯ä»¥åœ¨è„¸ä¸Šåœç•™ 5-10 åˆ†é’Ÿåç«‹å³æ¸…æ°´æ¸…æ´—æ‰ï¼Œç„¶åç»§ç»­ä¸‹ä¸€æ­¥æŠ¤è‚¤æ­¥éª¤ï¼Œç¬¬äºŒå¤©æ—¶é—´æ‹‰é•¿åˆ° 20 åˆ†é’Ÿï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°åœ¨é¢éƒ¨åœç•™è¶…è¿‡ 1-2 å°æ—¶ä»¥ä¸Šæ— ä¸é€‚ï¼Œå¯ä»¥å°è¯•è¿‡å¤œã€‚\né»‘å¤´ï¼šç™½å¤©ç”¨å£¬äºŒé…¸ï¼ˆ5 åˆ†é’Ÿï¼‰ï¼Œæ™šä¸Šç”¨ç»´ a é…¸ã€‚\nçœ‹ç—…æŠ€å·§ å¦‚æœåœ¨ç½‘ä¸ŠæŒ‚ä¸åˆ°ä¸“å®¶çš„å·ï¼Œå¯ä»¥å°è¯•ç”µè¯è”ç³»ç§‘å®¤é—®ä¸€ä¸‹èƒ½ä¸èƒ½å½“å¤©åŠ å·ï¼Œæœ‰çš„ä¸“å®¶æ˜¯å…è®¸åŠ å·çš„ï¼Œåªä¸è¿‡å¯èƒ½ä¼šåŠ åˆ°å½“å¤©æ¯”è¾ƒæ™šçš„æ—¶å€™ï¼Œå‡ºæ£€æŸ¥ç»“æœçš„æ—¶å€™ä¸“å®¶å°±ä¸‹ç­äº†ã€‚^[ä¸ç”¨è¿·ä¿¡ä¸»ä»»ï¼Œè¦æ˜¯çœŸæœ‰å¤§ç—…ï¼Œå¹´è½»å¤§å¤«ä¼šé¢†ç€ä½ å»æ‰¾çš„â€¦â€¦]\nå¦‚æœå¯¹è‡ªå·±ç—…æƒ…æ²¡æœ‰å¾ˆå¤šäº†è§£çš„è¯ï¼Œå»ºè®®æ—©ä¸Šç©ºè…¹å»ï¼Œä»¥å…æŠ½ä¸äº†è¡€ã€‚å¦‚æœå¯¹è‡ªå·±è¦åšçš„æ£€æŸ¥æœ‰å¤§è‡´äº†è§£çš„è¯ï¼Œå»ºè®®æŸ¥ä¸€ä¸‹æ³¨æ„äº‹é¡¹ï¼Œæå‰åšå¥½å‡†å¤‡ï¼Œæ¯”å¦‚åšæ ¸ç£å…±æŒ¯èº«ä¸Šä¸è¦å¸¦é‡‘å±ï¼Œå¥³ç”Ÿæœ€å¥½ç©¿æ— é’¢åœˆæ— æŒ‚é’©çš„ braï¼Œæ¯”å¦‚æ•£ç³åä¸è¦é©¾é©¶ç­‰ç­‰ã€‚\näººè¿™ä¸€ç”Ÿä¸­è¿˜æ˜¯å¾—å¸¸è§ç—…çš„æ¦‚ç‡å¤§ï¼Œæ²¡å¿…è¦è¿·ä¿¡ä¸»ä»»åŒ»å¸ˆã€‚å»ºè®®é¦–æ¬¡çœ‹ç—…ä¸å¿…æ‰¾èµ„å†å¤ªé«˜çš„åŒ»ç”Ÿï¼Œå¦‚æœä½ çš„ç—…çœŸçš„åˆ°äº†éœ€è¦æ‰¾è€å¤§å¤«çœ‹çœ‹çš„åœ°æ­¥ï¼Œå¹´è½»å¤§å¤«ä¼šé¢†ç€ä½ å»æ‰¾çš„ã€‚\nä¸Šåˆçœ‹ç—…çš„äººå¤šï¼Œä¸‹åˆå°‘ï¼Œå‘¨ä¸€å¤šï¼Œå‘¨äº”å°‘ï¼Œå°½é‡é¿å¼€å‘¨ä¸€ä¸Šåˆã€‚åˆ®é£ä¸‹é›¨æ˜¯çœ‹ç—…çš„æœ€ä½³æ—¶æœºï¼Œé›¨è¶Šå¤§ï¼Œäººè¶Šå°‘ã€‚\n^[â€œä¸ºäº†æ‚¨å’Œå®¶äººçš„å¥åº·ï¼Œè¯·ä¸è¦åœ¨æ˜ŸæœŸä¸€ä¸Šåˆçœ‹ç—…â€ï¼Œè¶…å®ç”¨çœ‹ç—…æŒ‡å—]\n","permalink":"https://zpc2222.github.io/posts/life/medical/","summary":"è‡ªèº«å¥åº· å°¿ç´ ä¹³è†ï¼šæŸ”è½¯çš®è‚¤ï¼Œé˜²æ­¢å¹²è£‚ï¼Œæ·±å±‚æ»‹æ¶¦ã€‚ ç»´ a é…¸ä¹³è†ï¼šæ›´æ–°è¡¨çš®ï¼Œå»é™¤è§’è´¨ï¼Œé¿å…‰åªèƒ½æ™šä¸Šç”¨ã€‚ å£¬äºŒé…¸ï¼šç–é€šæ¯›å­”å µå¡ï¼Œæ”¹å–„é»‘å¤´ã€‚éœ€å»ºç«‹è€å—ï¼Œ","title":"åŒ»ç–—è¯å“"},{"content":"waiting list å…ˆçœ‹çœ‹é—²é±¼ä¸Šæ˜¯å¦æœ‰å®˜ç¿»æˆ–ä»£ç†å•†æ¸ é“ï¼Œä¸€èˆ¬ä¼šæœ‰ 5-8 æŠ˜ã€‚\nç¡¬ç›˜ è¶Šæ¥è¶Šè§‰å¾—ç½‘ç›˜ä¸å¦‚ç¡¬ç›˜ï¼Œæœºæ¢°ç¡¬ç›˜æ›´å®æƒ ï¼Œåˆšä¹°äº†ä¸ª2Tçš„è¥¿éƒ¨ï¼Œ300å¤šï¼Œä¹‹å‰æ·˜æ±°ä¸‹æ¥çš„æš‚æ—¶æ²¡æ³•ç”¨äº†ï¼Œç”¨ç¡¬ç›˜ç›’ï¼Œå½“å¤‡ç”¨\næš‚ä¸è€ƒè™‘ æ™ºèƒ½æ‰‹è¡¨ å°ç±³æ‰‹ç¯7Pro\nä¹¦æˆ¿ æ˜¾ç¤ºå™¨ ä¹¦æ¡Œé…çš„ä¸»æ˜¾ç¤ºå™¨ä½¿ç”¨ç§‘ç¿ 27 å¯¸ 2K 144Hzï¼ˆ27E1QPlusï¼‰ï¼Œå› ä¸ºå±…ä½åœ°ä¸»è¦æ˜¯å¨±ä¹ï¼Œéç‰ˆæœ¬ï¼Œæš‚ä¸è€ƒè™‘åŒå±\né”®ç›˜é¼ æ ‡ ç½—æŠ€G102äºŒä»£æœ‰çº¿é¼ æ ‡ï¼Œ21å¹´9æœˆä¹°çš„ï¼Œç”¨èµ·æ¥è¿˜å¯ä»¥ï¼Œæ²¡æœ‰èŠ±é‡Œèƒ¡å“¨çš„ç¯å…‰\næ‘„åƒå¤´ åŸºæœ¬æ²¡ç”¨ï¼Œå·²ç»æ‹†ä¸‹æ¥äº†\nä¹¦æ¡Œç¯ å°ç±³å°ç¯ï¼Œå¯è¿ç±³å®¶APPï¼Œè¿œç¨‹æ§åˆ¶\nå‡é™æ¡Œ æš‚æ—¶ä¸è€ƒè™‘ï¼Œä½†æ˜¯ä½¿ç”¨äº†ä¸ªå¢é«˜æ”¯æ¶ï¼Œåœ¨å®¶éƒ½æ˜¯ç«™ç€ç©ç”µè„‘\nå°å¼æœº 2016å¹´è·ŸåŒå­¦ä¸€èµ·ç»„çš„ä¸€ä¸ªE31231çš„ä¸»æœºï¼ŒGTX960æ˜¾å¡ï¼›\né™¤æ˜¾ç¤ºå™¨å¤–ï¼ŒèŠ±äº†6000å¤šï¼Œç”¨åˆ°ç°åœ¨\né™¤äº†ä¸Šä¸ªæœˆåŠ äº†ä¸€ä¸ª8Gçš„å†…å­˜æ¡ï¼Œæ¢äº†ä¸€å—æœºæ¢°ç¡¬ç›˜ï¼Œå…¶ä»–çš„æ²¡æœ‰ä»»ä½•å˜åŠ¨ï¼Œè¿˜èƒ½å†æˆ˜3å¹´ï¼ï¼Ÿ\næ¸¸æˆæ‰‹æŸ„ ç”¨çš„æå°‘ï¼Œå¥½ä¹…ä¹‹å‰ç©é¬¼æ³£ç”¨è¿‡ï¼ŒåŸºæœ¬åƒç°\næ•°ç  é™å™ªè€³æœº å¤´æˆ´å¼å¤–éƒ½æ”¾å¼ƒï¼Œå°¤å…¶æ˜¯å…¥è€³å¼ï¼Œéš¾å—ï¼Œåå…¬äº¤åœ°é“å¬æ­Œå¤ªä¼¤è€³æœµäº†\nå……ç”µå™¨ 1.å°ç±³10çš„åŸè£…å……ç”µå™¨åŠåŸè£…çº¿ï¼Œæ”¾åœ¨å®¶é‡Œå¤‡ç”¨\n2.äº¬ä¸œè´­ä¹°çš„æ°®åŒ–é•“å……ç”µå™¨33w(85å—é’±)ï¼Œå°å·§ï¼Œå”¯ä¸€ä¸æ–¹ä¾¿å°±æ˜¯type-Cå£çš„ï¼Œä¸å¥½æ›¿æ¢\nè¿åŠ¨ ç­‹è†œæª å°ç±³miniç­‹è†œæª\nå¥åº· ä½“é‡ç§¤ 16å¹´ä¹°çš„äº‘éº¦çš„ï¼Œå·²ä¸¢ 21å¹´ä¹°äº†ä¸€ä¸ªæ–°çš„ï¼Œä¸æ”¯æŒäº‘åŒæ­¥ï¼Œä½†åŸºæœ¬å¤Ÿç”¨\næ³¡è„šæ¡¶ å’¸é±¼ä¹°äº†ä¸€ä¸ªï¼ŒæŠ˜å çš„ï¼Œå¥½æ”¶çº³ã€‚äº‹å®ä¸Šï¼Œå¹¶ä¸å¥½ç”¨\nå®¶å±… æ¶ˆæ¯’æ¶²^[æ¶ˆæ¯’å‰‚é€‰è´­ä¸å®Œå…¨æŒ‡å—] 84 æ¶ˆæ¯’æ¶²ï¼šçˆ±ç‰¹ç¦ã€é¾™å®‰ã€è“æœˆäº®ã€åº·å¨é¾™ äºŒæ°§åŒ–æ°¯æ¶ˆæ¯’ç‰‡ï¼šæ˜Ÿå¸®å°¼ï¼ŒäºŒæ°§åŒ–æ°¯æ¶ˆæ¯’å‰‚ä»å®‰å…¨æ€§è§’åº¦æ˜¯é«˜äºå«æ°¯æ¶ˆæ¯’å‰‚çš„ã€‚ ç”¨äºé¤é¥®å…·ã€ç“œæœè”¬èœç­‰æ¶ˆæ¯’æ—¶ï¼Œæœ‰æ•ˆäºŒæ°§åŒ–æ°¯æˆåˆ†çš„ä½¿ç”¨æµ“åº¦ 100â€“150mg/Lï¼Œæµ¸æ³¡ä½œç”¨æ—¶é—´ 10â€“20minã€‚ è™½ç„¶äºŒæ°§åŒ–æ°¯ç›®å‰è¢«è®¤ä¸ºæ˜¯å¯¹äººä½“æ— æ¯’å®³çš„æˆåˆ†ï¼Œä½†ä¸ºäº†ä¿é™©èµ·è§ï¼Œåº”åŠæ—¶ç”¨æ¸…æ°´æ´—å‡€æ®‹ç•™æ¶ˆæ¯’æ¶²æ‰èƒ½ç»§ç»­ä½¿ç”¨ã€‚ å­£é“µç›æ¶ˆæ¯’æ¶²ï¼šé€‚ç”¨äºå¤„ç†è¡£ç‰©æ¶ˆæ¯’ï¼Œå“ç‰Œæ¨èï¼šåº·å¨é¾™ã€æ´›å¨ƒ ä¸è¦å°†æ¶ˆæ¯’æ¶²ä¸æ´—è¡£æ¶²åŠæŸ”é¡ºå‰‚åŒæ—¶ä½¿ç”¨ï¼Œä»¥å…ä½¿å„è‡ªçš„åŠŸæ•ˆå‡å¼±ã€‚æ¸…æ´ã€æ¶ˆæ¯’æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„è¿‡ç¨‹ï¼Œå»ºè®®å…ˆæ´—å¹²å‡€å†è¿›è¡Œæ¶ˆæ¯’ï¼Œæ¶ˆæ¯’æ•ˆæœæ›´ä½³ã€‚ å°ç‰© èƒ½é¢å…· (æ ‘è„‚)ï¼Œå¸¦çœ¼é•œä¸æ–¹ä¾¿ä½¿ç”¨ã€‚ å®å·¥ï¼ˆPro\u0026rsquo;sKitï¼‰NT-309-C æ™ºæ…§å‹éæ¥è§¦å¼æ„Ÿåº”ç”µç¬” æµ‹ç”µç¬” éªŒç”µç¬” å†…è£¤æ¸…æ´—æœº æ´—æ¯å™¨ï¼šä¸€æŒ‰å°±èƒ½æ¸…æ´—æ¯å­ï¼Œéå¸¸æ–¹ä¾¿ï¼Œå¯æƒœéœ€è¦æ°´æ§½æœ‰å¤šä½™çš„å‡ºæ°´å£ã€‚^[Room Tour ï½œæ–°å®¶çš„å¨æˆ¿é‡Œæœ‰ä»€ä¹ˆï¼Ÿ] ","permalink":"https://zpc2222.github.io/posts/life/shopping/","summary":"waiting list å…ˆçœ‹çœ‹é—²é±¼ä¸Šæ˜¯å¦æœ‰å®˜ç¿»æˆ–ä»£ç†å•†æ¸ é“ï¼Œä¸€èˆ¬ä¼šæœ‰ 5-8 æŠ˜ã€‚ ç¡¬ç›˜ è¶Šæ¥è¶Šè§‰å¾—ç½‘ç›˜ä¸å¦‚ç¡¬ç›˜ï¼Œæœºæ¢°ç¡¬ç›˜æ›´å®æƒ ï¼Œåˆšä¹°äº†ä¸ª2Tçš„è¥¿éƒ¨ï¼Œ300å¤šï¼Œä¹‹å‰æ·˜æ±°ä¸‹æ¥","title":"è´­ç‰©"},{"content":"åŸºäºHugoéƒ¨ç½²é™æ€åšå®¢ `å…ˆç»™å¤§å®¶ä»‹ç»ä¸‹ï¼š\nhugoå·ç§°æ˜¯The worldâ€™s fastest framework for building websitesï¼Œæ˜¯ç”±goè¯­è¨€ç¼–å†™çš„ï¼Œç¼–è¯‘é€Ÿåº¦å’Œè¿è¡Œé€Ÿåº¦éƒ½æ˜¯æ æ çš„ã€‚ä¸åƒhexoä¾èµ–äºnode.jsï¼Œé¡¹ç›®ä¾èµ–æ¨¡å—å¤šï¼Œhexo gç”Ÿæˆç½‘é¡µä¹Ÿæ¯”è¾ƒæ…¢\né€‰æ‹©æ–¹é¢ï¼š\né™æ€åšå®¢æ¡†æ¶jekyllã€hexoå’Œhugoä¸‰è€… Hugo ï¼š51.5kÂ Githubåœ°å€/å®˜ç½‘åœ°å€/ä¸»é¢˜æ±‡æ€»1/ä¸»é¢˜æ±‡æ€»2/ä¸»é¢˜æ±‡æ€»3 Jekyllï¼š42.6kÂ Githubåœ°å€/å®˜ç½‘åœ°å€/ä¸»é¢˜æ±‡æ€»1/ä¸»é¢˜æ±‡æ€»2/ä¸»é¢˜æ±‡æ€»3 Hexoï¼š 32.6kÂ Githubåœ°å€/å®˜ç½‘åœ°å€/ä¸»é¢˜æ±‡æ€» Hugoä½¿ç”¨goè¯­è¨€æ˜¯ä¸€ç§ç¼–è¯‘å‹è¯­è¨€ï¼Œé€Ÿåº¦éå¸¸å¿«ï¼Œè€ŒJekyllä½¿ç”¨rubyç¼–å†™ï¼Œhexoä½¿ç”¨nodejsç¼–å†™ é™æ€ç½‘ç«™ï¼Œhugoçš„nextä¸»é¢˜éƒ¨ç½² Jekyll æœ‰githubæ”¯æŒï¼Œå¯ä»¥å°†markdownæ–‡ä»¶ç›´æ¥æ”¾åˆ°gitä»“åº“ï¼Œgithubä¼šè‡ªåŠ¨ç”Ÿæˆç½‘é¡µæ–‡ä»¶ã€‚ï¼ˆGithubä¸€ç›´æ˜¯ä¸€ä¸ªäº²rubyçš„ç¤¾åŒºï¼‰ Hexoæä¾›äº†æ–¹ä¾¿çš„éƒ¨ç½²å‘½ä»¤ï¼Œå¯ä»¥åšåˆ°ä¸€æ¡å‘½ä»¤éƒ¨ç½²åˆ°githubä¸Šã€‚ Hugoçš„å®˜æ–¹æ–‡æ¡£å†™çš„éå¸¸å¥½ï¼Œéƒ¨ç½²ç®€æ´ã€‚å‰ä¸¤è€…éƒ¨ç½²æ—¶éœ€è¦å®‰è£…å¾ˆå¤šä¾èµ–ï¼Œè€Œhugoå¯ä»¥ç›´æ¥æä¾›äºŒè¿›åˆ¶æ–‡ä»¶è¿è¡Œï¼Œç”šè‡³ä¸éœ€è¦rootæƒé™ã€‚ å› ä¸ºç§ç§åŸå› ï¼Œæœ¬äººæœ€æ—©ç”¨çš„Jekyllï¼Œåæ¥å‘ç°Hexoä¸»é¢˜æ›´å¤šï¼Œä½†æ˜¯æ–‡ç« å¤šçš„æ—¶å€™éƒ½æ¯”è¾ƒæ…¢ï¼ˆé™æ€åšå®¢ï¼Œæ¯æ¬¡éƒ½æ˜¯å…¨é‡ç”Ÿæˆçš„ï¼‰,Hugoå®Œç¾è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œå”¯ä¸€çš„åŠ£åŠ¿å°±æ˜¯ä¸»é¢˜ä¸å¤ªå¤šï¼Œä½†æ˜¯ç¨‹åºå‘˜å˜›ï¼Œèƒ½ç”¨å°±è¡Œäº†ï¼\nä¸‹é¢å¼€å§‹æ­£æ–‡\nå®‰è£…hugoç¯å¢ƒ Hugoçš„å®‰è£…æœ‰å¾ˆå¤šæ–¹å¼ï¼ŒInstall Hugo | Hugo (gohugo.io)Â ï¼Œæ ¹æ®ä¸ªäººå–œå¥½å¯ä»¥è‡ªè¡Œå®‰è£…ã€‚\nReleases Â· gohugoio/hugo (github.com)Â ä¸‹è½½æœ€æ–°ç‰ˆæœ¬ï¼Œå»ºè®®ä¸‹è½½æœ€æ–°çš„ï¼Œhugo_extended_0.104.2_windows-amd64.zip ç¯å¢ƒå˜é‡é…ç½® ä¸‹å¥½ä¹‹åæ‰¾ä¸ªç©ºæ–‡ä»¶å¤¹æ”¾äº†ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œç”¨çš„D:\\Program Files\\hugo ä¿®æ”¹ç³»ç»Ÿçš„ç¯å¢ƒå˜é‡ï¼Œå°†hugo.exeæ‰€åœ¨æ–‡ä»¶å¤¹æ·»åŠ åˆ°é‡Œé¢ è¾“å…¥ hugo version æ­£ç¡®æ˜¾ç¤ºç‰ˆæœ¬å³å¯ã€‚\nä¸‹è½½æ¨¡æ¿ å…‹éš†æ¨¡æ¿ git clone https://github.com/zpc2222/hugo-blog.git ä¿®æ”¹é…ç½®é¡¹config.yml è¿™é‡Œä¸åšè¯¦ç»†è§£é‡Šï¼Œçœ‹é‡Œé¢ç›´æ¥ä¿®æ”¹å°±è¡Œäº† è¿è¡Œ hugo serve -D\n-Dè¡¨ç¤ºè‰ç¨¿ä¹Ÿè¦æ¸²æŸ“ï¼Œ-serveè¡¨ç¤ºå¯åŠ¨ä¸€ä¸ªæœ¬åœ°æœåŠ¡å™¨ï¼Œå³æ—¶æ¸²æŸ“ï¼Œæ–¹ä¾¿ä¿®æ”¹ã€‚ hugo serve çš„é»˜è®¤è¿è¡Œç¯å¢ƒæ˜¯ development, è€Œ hugo çš„é»˜è®¤è¿è¡Œç¯å¢ƒæ˜¯ productionã€‚ ç”±äºæœ¬åœ° development ç¯å¢ƒçš„é™åˆ¶, è¯„è®ºç³»ç»Ÿ**, **CDN å’Œ fingerprint ä¸ä¼šåœ¨ development ç¯å¢ƒä¸‹å¯ç”¨ã€‚ ä½ å¯ä»¥ä½¿ç”¨ hugo serve -e production å‘½ä»¤æ¥å¼€å¯è¿™äº›ç‰¹æ€§ã€‚ å€¼å¾—ä¸€æçš„æ˜¯ä¸è®ºè¾“å…¥çš„æ˜¯serverè¿˜æ˜¯serveéƒ½æ˜¯ä¸€æ ·çš„ã€‚\nåœ¨æµè§ˆå™¨ä¸­å‰å¾€å®ƒç»™å‡ºçš„ http://localhost:1313 å°±èƒ½çœ‹åˆ°ä½ åˆšç”Ÿæˆçš„åšå®¢äº†ã€‚\nå½“ä½ è¿è¡Œ hugo serve æ—¶, å½“æ–‡ä»¶å†…å®¹æ›´æ”¹æ—¶, é¡µé¢ä¼šéšç€æ›´æ”¹è‡ªåŠ¨åˆ·æ–°.\nç°åœ¨å†è¾“å…¥æŒ‡ä»¤\nhugo -D\nè¿™ä¼šç”Ÿæˆä¸€ä¸ª public ç›®å½•, å…¶ä¸­åŒ…å«ä½ ç½‘ç«™çš„æ‰€æœ‰é™æ€å†…å®¹å’Œèµ„æº. ç°åœ¨å¯ä»¥å°†å…¶éƒ¨ç½²åœ¨ä»»ä½• Web æœåŠ¡å™¨ä¸Šã€‚\nç¡®è®¤æ— è¯¯åå°±è¦æŠŠå®ƒå‘åˆ°å…¬ç½‘ä¸Šäº†ï¼Œè¿™é‡Œé‡‡ç”¨ GitHub pages è¿›è¡Œéƒ¨ç½²ï¼ˆå½“ç„¶ï¼Œä¹Ÿæœ‰å¾ˆå¤šç§æ–¹æ³•ä¹Ÿèƒ½è¾¾æˆè¿™ä¸€ç›®çš„ï¼‰\nGitHub pageséƒ¨ç½² å¦‚æœä½ æ˜¯ç¬¬ä¸€æ¬¡ä½¿ç”¨ GitHubï¼Œè¯·è‡ªè¡Œæœç´¢å¦‚ä½•é…ç½®ï¼Œè¿™é‡Œä¸åšè®²è§£ï¼\né¦–å…ˆç¡®ä¿ä½ æœ‰ä¸€ä¸ª GitHub è´¦å·ï¼Œç„¶åæ–°å»ºä¸€ä¸ªä»“åº“ï¼Œåä¸ºyourname.github.ioï¼Œæ³¨æ„ï¼Œä½ åº”è¯¥ä¿è¯è¿™é‡Œçš„ your name ä¸ºä½ çš„ GitHub è´¦å·åç§°ï¼ç„¶åå†è¿›è¡Œä»¥ä¸‹æ­¥éª¤ï¼š\n1 2 3 4 5 6 7 cd public git init git remote add origin https://github.com/yourname/yourname.github.io.git #æ­¤URLå¯åœ¨ä½ çš„repoä¸­æ‰¾åˆ° git add . git commit -m \u0026#34;update %date%,%time%\u0026#34; git push origin master è‡ªåŠ¨æ¨é€è„šæœ¬ï¼š 1 2 3 4 5 6 hugo -D cd public git add . git commit -m \u0026#34;update %date%,%time%\u0026#34; git push origin master pause GitHubè‡ªåŠ¨æ„å»ºï¼š ç‚¹å‡»Actionsé€‰æ‹©simple workflowï¼Œå†…å®¹å¦‚ä¸‹\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 # This is a basic workflow to help you get started with Actions name: hugo-deploy-CI # Controls when the action will run. on: push # A workflow run is made up of one or more jobs that can run sequentially or in parallel jobs: # docsï¼šhttps://github.com/peaceiris/actions-gh-pages deploy: runs-on: ubuntu-20.04 steps: - name: Git checkout uses: actions/checkout@v2 - name: Setup hugo uses: peaceiris/actions-hugo@v2 with: hugo-version: \u0026#39;0.104.0\u0026#39; extended: true - name: Build run: hugo - name: Deploy uses: peaceiris/actions-gh-pages@v3 with: personal_token: ${{ secrets.PERSONAL_TOKEN }} external_repository: zpc2222/zpc2222.github.io # ä¿®æ”¹ä¸ºè‡ªå·±çš„åœ°å€ publish_dir: ./public keep_files: true publish_branch: master å€¼å¾—æ³¨æ„çš„æ˜¯åœ¨æœ€åä¸€æ¡Deployä¸­åº”ä½¿ç”¨withè€Œéenvï¼Œåº”ä½¿ç”¨deploy_keyè€Œéå…¶ä»–çš„åå­—ã€‚ä½†ç›®å‰ç½‘ä¸Šå¤§éƒ¨åˆ†æ•™ç¨‹éƒ½æ²¡æåŠè¿™ä¸€ç‚¹ï¼Œç”šè‡³æœ‰çš„è¿˜é”™è¯¯åœ°ä½¿ç”¨ï¼ï¼ˆä½¿ç”¨çš„æˆ‘æ¨¡æ¿å¯ä»¥è·³è¿‡è¿™æ­¥ï¼Œåœ¨å·¥ç¨‹é‡Œç›´æ¥ä¿®æ”¹EXTERNAL_REPOSITORYåçš„è·¯å¾„å³å¯ï¼‰\nä¸Šé¢æ“ä½œå®Œæˆåï¼Œä½ ä¼šå‘ç°actionè¿˜æ˜¯ä¼šæŠ¥é”™çš„ï¼Œå› ä¸ºpersonal_tokenï¼ˆä¸ªäººä»¤ç‰Œï¼‰ä½ æ²¡æœ‰ç”Ÿæˆï¼Œéœ€è¦åœ¨ä»“åº“å†…é…ç½®ä¸‹ï¼Œåå­—æ˜¯PERSONAL_TOKENï¼Œvalueåˆ™æ˜¯ä¸ªäººä»¤ç‰Œï¼Œæœ€å¥½ä¸è¦è®¾ç½®æœ‰æ•ˆæœŸï¼š ä»¤ç‰Œå¦‚ä½•ç”Ÿæˆï¼Œè¿™é‡Œä¸åšè®²è¿° ç„¶åæ¯æ¬¡æäº¤ä»£ç ï¼Œæœ¬å·¥ç¨‹çš„å®šæ—¶ä»»åŠ¡ï¼Œä¼šå°†é™æ€çš„é¡µé¢è‡ªåŠ¨å‘å¸ƒåˆ° youname.github.ioåŠŸèƒ½å†…ï¼Œè¿™ä¸ªå·¥ç¨‹ä¼šè‡ªåŠ¨å‘å¸ƒåˆ°gitpagesã€‚å¦‚æœæ²¡æœ‰é…ç½®çš„ï¼Œå¯ä»¥æ£€æŸ¥ä¸‹åˆ†æ”¯æ˜¯å¦æ­£ç¡®ï¼Œæˆ‘é»˜è®¤é…ç½®çš„æ˜¯master åœˆçº¢çš„æ³¨æ„ã€‚\n","permalink":"https://zpc2222.github.io/posts/blog/blog-github/","summary":"åŸºäºHugoéƒ¨ç½²é™æ€åšå®¢ `å…ˆç»™å¤§å®¶ä»‹ç»ä¸‹ï¼š hugoå·ç§°æ˜¯The worldâ€™s fastest framework for building websitesï¼Œæ˜¯ç”±goè¯­è¨€ç¼–å†™çš„ï¼Œç¼–è¯‘é€Ÿåº¦å’Œè¿è¡Œé€Ÿåº¦","title":"åŸºäºgithubéƒ¨ç½²é™æ€åšå®¢"},{"content":"ä»…ä»¥æ­¤ç¯‡æ–‡ç« æ¥æµ‹è¯•ä¸‹åœ¨é€šè¿‡ Hugo å¼•æ“æ¥å»ºç«™æ—¶ï¼Œæ˜¯å¦æ”¯æŒ Markdown æ–‡ä»¶å†…å®¹ä¸­æ‰€å†™çš„å„ç§è¯­æ³•ï¼Œå¹¶å±•ç¤ºä¸‹å®é™…çš„æ•ˆæœã€‚\næ ‡é¢˜æ ·å¼ è®©æˆ‘ä»¬ä»æ‰€æœ‰å¯èƒ½çš„æ ‡é¢˜å¼€å§‹ï¼Œåœ¨ HTML ä¸­ \u0026lt;h1\u0026gt;-\u0026lt;h6\u0026gt;å…ƒç´ åˆ†åˆ«è¡¨ç¤ºå…­ä¸ªä¸åŒçº§åˆ«çš„æ ‡é¢˜æ ·å¼ï¼Œå…¶ä¸­ \u0026lt;h1\u0026gt; ä¸ºæœ€å¤§æ ‡é¢˜ï¼Œ\u0026lt;h6\u0026gt;ä¸ºæœ€å°æ ‡é¢˜ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š\næ ‡é¢˜ 1 æ ‡é¢˜ 2 æ ‡é¢˜ 3 æ ‡é¢˜ 4 æ ‡é¢˜ 5 æ ‡é¢˜ 6 æ®µè½æ ¼å¼ æ ¹æ® W3C å®šä¹‰çš„ HTML5 è§„èŒƒï¼ŒHTML æ–‡æ¡£ç”±å…ƒç´ å’Œæ–‡æœ¬ç»„æˆã€‚æ¯ä¸ªå…ƒç´ çš„ç»„æˆéƒ½ç”±ä¸€ä¸ªå¼€å§‹æ ‡è®°è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š \u0026lt;body\u0026gt; ï¼Œå’Œç»“æŸæ ‡è®°è¡¨ç¤ºï¼Œä¾‹å¦‚ï¼š \u0026lt;/body\u0026gt; ã€‚ï¼ˆæŸäº›å¼€å§‹æ ‡è®°å’Œç»“æŸæ ‡è®°åœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥çœç•¥ï¼Œå¹¶ç”±å…¶ä»–æ ‡è®°æš—ç¤ºã€‚ï¼‰ å…ƒç´ å¯ä»¥å…·æœ‰å±æ€§ï¼Œè¿™äº›å±æ€§æ§åˆ¶å…ƒç´ çš„å·¥ä½œæ–¹å¼ã€‚ä¾‹å¦‚ï¼šè¶…é“¾æ¥æ˜¯ä½¿ç”¨ a å…ƒç´ åŠå…¶ href å±æ€§å½¢æˆçš„ã€‚\nMarkdown è¯­æ³• 1 ![å›¾åƒè¯´æ˜](å›¾åƒåœ°å€) HTML IMG æ ‡ç­¾ 1 \u0026lt;img src=\u0026#34;å›¾åƒåœ°å€\u0026#34; width=\u0026#34;å®½åº¦\u0026#34; height=\u0026#34;é«˜åº¦\u0026#34; /\u0026gt; SVG æ ¼å¼ 1 \u0026lt;svg\u0026gt;xxxxxx\u0026lt;/svg\u0026gt; åˆ—è¡¨ç±»å‹ æœ‰åºåˆ—è¡¨ ç¬¬ä¸€ä¸ªå…ƒç´  ç¬¬äºŒä¸ªå…ƒç´  ç¬¬ä¸‰ä¸ªå…ƒç´  æ— åºåˆ—è¡¨ åˆ—è¡¨å…ƒç´  å¦ä¸€ä¸ªå…ƒç´  å’Œå…¶å®ƒå…ƒç´  åµŒå¥—åˆ—è¡¨ å€ŸåŠ© HTML çš„ ul å…ƒç´ æ¥å®ç°ã€‚\nç¬¬ä¸€é¡¹ ç¬¬äºŒé¡¹ ç¬¬äºŒé¡¹ç¬¬ä¸€ä¸ªå­é¡¹ç›® ç¬¬äºŒé¡¹ç¬¬äºŒä¸ªå­é¡¹ç›® ç¬¬äºŒé¡¹ç¬¬äºŒåˆ†é¡¹ç¬¬ä¸€åˆ†é¡¹ ç¬¬äºŒé¡¹ç¬¬äºŒåˆ†é¡¹ç¬¬äºŒåˆ†é¡¹ ç¬¬äºŒé¡¹ç¬¬äºŒåˆ†é¡¹ç¬¬ä¸‰åˆ†é¡¹ ç¬¬äºŒé¡¹ç¬¬ä¸‰ä¸ªå­é¡¹ç›® ç¬¬äºŒé¡¹ç¬¬ä¸‰åˆ†é¡¹ç¬¬ä¸€åˆ†é¡¹ ç¬¬äºŒé¡¹ç¬¬ä¸‰åˆ†é¡¹ç¬¬äºŒåˆ†é¡¹ ç¬¬äºŒé¡¹ç¬¬ä¸‰åˆ†é¡¹ç¬¬ä¸‰åˆ†é¡¹ ç¬¬ä¸‰é¡¹ è‡ªå®šä¹‰åˆ—è¡¨ é€šè¿‡ HTML çš„ dl å…ƒç´ è¿˜æ”¯æŒè‡ªå®šä¹‰åˆ—è¡¨ï¼ˆè¡¨æ ¼åˆ—è¡¨ï¼‰ã€‚\nHugo ç›®å½•ç»“æ„ assets config.toml content data theme static Hugo æ¨¡æ¿ åŸºç¡€æ¨¡æ¿ åˆ—è¡¨æ¨¡æ¿ å•é¡µæ¨¡æ¿ å—å¼•ç”¨ blockquote å…ƒç´ è¡¨ç¤ºä»å¦ä¸€ä¸ªæºå¼•ç”¨çš„å†…å®¹ï¼Œå¯ä»¥é€‰æ‹©å¼•ç”¨å¿…é¡»åœ¨ footer æˆ– cite å…ƒç´ ä¸­ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨æ³¨é‡Šå’Œç¼©å†™ç­‰è¡Œå†…æ›´æ”¹ã€‚\nå¼•ç”¨æ–‡æœ¬ è¿™ä¸€è¡Œä¹Ÿæ˜¯åŒæ ·çš„å¼•ç”¨ åŒæ ·ä½ ä¹Ÿåœ¨ blockquote ä¸­ä½¿ç”¨ Markdown è¯­æ³•ä¹¦å†™\nå¸¦æœ‰å¼•æ–‡çš„ Blockquote å…ƒç´ æ•ˆæœã€‚\næˆ‘çš„ç›®æ ‡ä¸æ˜¯èµšå¤§é’±,æ˜¯ä¸ºäº†åˆ¶é€ å¥½çš„ç”µè„‘ã€‚å½“æˆ‘æ„è¯†åˆ°æˆ‘å¯ä»¥æ°¸è¿œå½“å·¥ç¨‹å¸ˆæ—¶ï¼Œæˆ‘æ‰åˆ›åŠäº†è¿™å®¶å…¬å¸ã€‚\nâ€” å²è’‚å¤«Â·æ²ƒå…¹å°¼äºšå…‹ æ ¹æ® Mozilla çš„ç½‘ç«™è®°å½•ï¼ŒFirefox 1.0 äº 2004 å¹´å‘å¸ƒï¼Œå¹¶å–å¾—äº†å·¨å¤§æˆåŠŸã€‚\nè¡¨æ ¼ è¡¨æ ¼å¹¶ä¸ç®—æ˜¯ Markdown çš„æ ¸å¿ƒè¦ç´ ï¼Œä½† Hugo åŒæ ·æ”¯æŒå®ƒã€‚\nID åˆ›å»ºè€… æ¨¡å‹ å¹´ä»½ 1 Honda Accord 2009 2 Toyota Camry 2012 3 Hyundai Elantra 2010 å¯ä»¥ä½¿ç”¨ : ï¼ˆè‹±æ–‡æ ¼å¼å†’å·ï¼‰æ¥å¯¹è¡¨æ ¼å†…å®¹è¿›è¡Œå¯¹é½ã€‚\nè¡¨æ ¼ å¯ä»¥æ˜¯ å¾ˆé…· å·¦å¯¹é½ å±…ä¸­ å³å¯¹é½ å·¦å¯¹é½ å±…ä¸­ å³å¯¹é½ å·¦å¯¹é½ å±…ä¸­ å³å¯¹é½ åŒæ ·ä¹Ÿå¯ä»¥åœ¨è¡¨æ ¼ä¸­ä½¿ç”¨ Markdown è¯­æ³•ã€‚\nè¡¨æ ¼ ä¸­ ä½¿ç”¨ Markdown è¯­æ³• æ–œä½“ ç²—ä½“ ä¸­åˆ’çº¿ ä»£ç å— Code 1 2 3 4 5 6 7 8 9 10 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; 1 2 3 4 5 6 7 8 9 10 \u0026lt;!DOCTYPE html\u0026gt; \u0026lt;html lang=\u0026#34;en\u0026#34;\u0026gt; \u0026lt;head\u0026gt; \u0026lt;meta charset=\u0026#34;UTF-8\u0026#34;\u0026gt; \u0026lt;title\u0026gt;Example HTML5 Document\u0026lt;/title\u0026gt; \u0026lt;/head\u0026gt; \u0026lt;body\u0026gt; \u0026lt;p\u0026gt;Test\u0026lt;/p\u0026gt; \u0026lt;/body\u0026gt; \u0026lt;/html\u0026gt; å…¶å®ƒå…ƒç´ ï¼š abbrã€subã€supã€kbdç­‰ç­‰ GIF æ˜¯ä½å›¾å›¾åƒæ ¼å¼ã€‚\nH2O\nC6H12O6\nXn + Yn = Zn\næŒ‰Xè·èƒœã€‚æˆ–æŒ‰CTRL+ALT+Fæ˜¾ç¤º FPS è®¡æ•°å™¨ã€‚\næ¯”ç‰¹ä½œä¸ºä¿¡æ¯è®ºä¸­çš„ä¿¡æ¯å•ä½ï¼Œä¹Ÿè¢«ç§°ä¸º shannon ï¼Œä»¥ä¿¡æ¯è®ºé¢†åŸŸçš„åˆ›å§‹äºº Claude shannon çš„åå­—å‘½åã€‚\nå‚è€ƒï¼š\næ¥è‡ª Mainroad ä¸»é¢˜çš„ Basic Elements å†…å®¹ ","permalink":"https://zpc2222.github.io/posts/blog/markdown-use/","summary":"\u003cp\u003eä»…ä»¥æ­¤ç¯‡æ–‡ç« æ¥æµ‹è¯•ä¸‹åœ¨é€šè¿‡ \u003ccode\u003eHugo\u003c/code\u003e å¼•æ“æ¥å»ºç«™æ—¶ï¼Œæ˜¯å¦æ”¯æŒ \u003ccode\u003eMarkdown\u003c/code\u003e æ–‡ä»¶å†…å®¹ä¸­æ‰€å†™çš„å„ç§è¯­æ³•ï¼Œå¹¶å±•ç¤ºä¸‹å®é™…çš„æ•ˆæœã€‚\u003c/p\u003e","title":"Markdown è¯­æ³•æ”¯æŒ"},{"content":"å…³äº integrity çš„é”™è¯¯ é”™è¯¯æè¿° åœ¨ Github Pages ä¸Šéƒ¨ç½² Hugo åšå®¢åï¼Œç½‘ç«™æ ·å¼ä¸¢å¤±ï¼Œæ‰“å¼€æµè§ˆå™¨ F12 æ§åˆ¶å°å¯ä»¥å‘ç°é”™è¯¯ï¼šFailed to find a valid digest in the 'integrity' attribute for resource \u0026quot;xxx.css\u0026quot;, The resource has been blocked.ã€‚\nè§£å†³åŠæ³• æˆ‘ç”¨çš„æ˜¯Â PaperModÂ ä¸»é¢˜ï¼Œå‘ç°å¾ˆå¤šäººä½¿ç”¨hugoç”¨è¿™ä¸ªä¸»é¢˜ï¼Œéƒ½ä¼šæœ‰è¿™ä¸ªé—®é¢˜ï¼Œå¤§éƒ¨åˆ†çš„è¯´æ˜å°±æ˜¯èµ„æºè¢«å¢™äº†ï¼Œç„¶åç”¨CDNåŠ é€Ÿï¼Œä½†æ˜¯é‚£ä¹ˆå¤æ‚ï¼Œå’±ä¹Ÿä¸ä¼šå•Šï¼Œè¿˜åœ¨è¿˜æœ‰å¦ä¸€ç§è§£å†³åŠæ³•ï¼ˆæˆ‘æ˜¯è§£å†³äº†ï¼Œåˆ«äººä¸ä¸€å®šï¼Œå¯ä»¥åšä¸ªå‚è€ƒï¼‰\nä¿®æ”¹html æ–‡ä»¶ ç»™å‡ºçš„è§£å†³åŠæ³•æ˜¯å°†ç½‘ç«™ä¸­ä»£è¡¨æ¯ä¸ªæ¨¡å—é¦–é¡µçš„Â index.htmlÂ æ–‡ä»¶é‡Œé¢çš„Â integrityÂ å±æ€§çš„å€¼ç½®ç©ºï¼Œæˆ‘è¯•ç€å°†ç½‘ç«™é¦–é¡µçš„Â index.htmlÂ æ–‡ä»¶æ”¹äº†ä¸€ä¸‹ï¼Œç¡®å®å¯ä»¥è§£å†³é—®é¢˜ã€‚ä½†è¿™ä¹ˆå¤šÂ index.htmlÂ æ–‡ä»¶ï¼Œä¸€ä¸ªä¸ªæ‰‹æ”¹ï¼Œå·¥ä½œé‡å¤ªå¤§ï¼Œä¹Ÿä¼šå®¹æ˜“é—æ¼ã€‚å¦å¤–ï¼Œå³ä¾¿è¿™æ¬¡æ”¹å¥½äº†ï¼Œåé¢å†æ¬¡é‡æ–°å‘å¸ƒæ–‡ç« çš„æ—¶å€™ï¼Œå°±åˆä¼šå°†å…¶è¦†ç›–ï¼Œæ‰€ä»¥è¿™ä¸ªæ–¹æ³•å¹¶ä¸å¯è¡Œã€‚\nä¿®æ”¹åŸºç±» html æ–‡ä»¶ åé¢å€’æ˜¯åœ¨Â SatckoverflowÂ ä¸Šå‘ç°äº†ä¸€ä¸ªç±»ä¼¼çš„é—®é¢˜ã€‚ä¸‹é¢æœ‰äººå›å¤è¯´æ˜¯éœ€è¦å°†Â assetsÂ æ–‡ä»¶å¤¹ä¸‹çš„Â head.htmlÂ ä¸­çš„Â integrityÂ çš„å€¼ç½®ç©ºï¼Œå°±å¯ä»¥ä¸€åŠ³æ°¸é€¸äº†ï¼Œä»¥åæ¯æ¬¡å‘å¸ƒæ–‡ç« ä¹Ÿä¸ç”¨æ‹…å¿ƒè¢«è¦†ç›–ã€‚å¯æ˜¯æŒ‰ç…§ä»–çš„è·¯å¾„æˆ‘å¹¶æ²¡æ‰¾åˆ°è¯¥æ–‡ä»¶ï¼Œç»è¿‡ä¸€ç•ªè¯•é”™ï¼Œæœ€ååœ¨Â themes\\PaperMod\\layouts\\partialsÂ æ–‡ä»¶å¤¹ä¸‹æ‰¾åˆ°ä¸€ä¸ªÂ head.htmlÂ æ–‡ä»¶ï¼Œå‘ç°é‡Œé¢ç¡®å®æœ‰Â integrity=\u0026quot;{{ $stylesheet.Data.Integrity }}\u0026quot;Â è¿™ä¹ˆä¸€å¥ä»£ç ï¼ŒæŠŠå®ƒæ”¹ä¸ºÂ integrity=\u0026quot;\u0026quot;Â ç„¶åé‡æ–°å‘å¸ƒï¼Œå‘ç°æ•ˆæœæ æ çš„~\nä¸€ä¸ªåç«¯ï¼Œæœäº†ä¸€å¤©å¤šå‰ç«¯çš„é—®é¢˜ï¼Œè™½ç„¶è¿˜æ˜¯ä¸æ‡‚ï¼Œä½†æ˜¯é—®é¢˜å¥½æ­¹è§£å†³äº†ï¼Œç½‘ç«™æ­£å¸¸è®¿é—®äº†ï¼\n","permalink":"https://zpc2222.github.io/posts/blog/blog-question/","summary":"å…³äº integrity çš„é”™è¯¯ é”™è¯¯æè¿° åœ¨ Github Pages ä¸Šéƒ¨ç½² Hugo åšå®¢åï¼Œç½‘ç«™æ ·å¼ä¸¢å¤±ï¼Œæ‰“å¼€æµè§ˆå™¨ F12 æ§åˆ¶å°å¯ä»¥å‘ç°é”™è¯¯ï¼šFailed to find a valid digest in the 'integrity' attribute for resource \u0026quot;xxx.css\u0026quot;, The resource has been bloc","title":"éƒ¨ç½²hugoé—®é¢˜"},{"content":"ç™»å½•æ¡†æ¶ ä½¿ç”¨çš„spring securityæ¡†æ¶ï¼Œé€šè¿‡è¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªï¼Œ ç™»å½•çš„æ—¶å€™é€šè¿‡jwtç”Ÿæˆtoken è°ƒç”¨æ¥å£ï¼Œæºå¸¦tokenï¼ŒåŒæ—¶åˆ·æ–°tokenæ—¶é•¿ é™¤äº†ç™»å½•æ¥å£åŠ swaggerï¼Œå…¶ä»–çš„éƒ½è¿›è¡Œæ‹¦æˆª\nè¿‡æ»¤å™¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 @Configuration @EnableWebSecurity @EnableGlobalMethodSecurity(prePostEnabled = true) public class WebSecurityConfig extends WebSecurityConfigurerAdapter { private static final String[] EXCLUDE_URL = {\u0026#34;/doc.html\u0026#34;,\u0026#34;/login\u0026#34;}; /** * è®¤è¯å¤±è´¥å¤„ç†ç±» */ private final AuthenticationEntryPointImpl unauthorizedHandler; private final JwtAccessDeniedHandler jwtAccessDeniedHandler; private final JwtAppletTokenUtils jwtUtil; public WebSecurityConfig(AuthenticationEntryPointImpl unauthorizedHandler, JwtAccessDeniedHandler jwtAccessDeniedHandler, JwtAppletTokenUtils jwtUtil) { this.unauthorizedHandler = unauthorizedHandler; this.jwtAccessDeniedHandler = jwtAccessDeniedHandler; this.jwtUtil = jwtUtil; } @Override protected void configure(HttpSecurity httpSecurity) throws Exception { httpSecurity // CSRFç¦ç”¨ï¼Œå› ä¸ºä¸ä½¿ç”¨session .csrf().disable() // è®¤è¯å¤±è´¥å¤„ç†ç±» .exceptionHandling().authenticationEntryPoint(unauthorizedHandler).accessDeniedHandler(jwtAccessDeniedHandler) // é˜²æ­¢iframe é€ æˆè·¨åŸŸ(è¿™ä¸€æ®µä¸å†™ä¼šå¯¼è‡´swaggerè®¿é—®ä¸äº†) .and().headers().frameOptions().disable().and() // åŸºäºtokenï¼Œæ‰€ä»¥ä¸éœ€è¦session .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS).and() // è¿‡æ»¤è¯·æ±‚ .authorizeRequests() // æ”¾è¡ŒOPTIONSè¯·æ±‚ .antMatchers(HttpMethod.OPTIONS, \u0026#34;/**\u0026#34;).permitAll() // å…è®¸åŒ¿åè®¿é—®æ¥å£ .antMatchers(EXCLUDE_URL).permitAll() // é™¤ä¸Šé¢å¤–çš„æ‰€æœ‰è¯·æ±‚å…¨éƒ¨éœ€è¦é‰´æƒè®¤è¯ .anyRequest().authenticated(); httpSecurity.apply(new TokenConfigurer(jwtUtil)); } /*** * æ ¸å¿ƒè¿‡æ»¤å™¨é…ç½®æ–¹æ³• * @param web */ @Override public void configure(WebSecurity web) { web.ignoring().antMatchers(\u0026#34;/doc.html\u0026#34;, \u0026#34;/webjars/**\u0026#34;, \u0026#34;/**/api-docs/**\u0026#34;,\u0026#34;/login\u0026#34;,\u0026#34;/pay/callback\u0026#34;,\u0026#34;/pay/refundCallback\u0026#34;,\u0026#34;/pay/callback\u0026#34;); } static class TokenConfigurer extends SecurityConfigurerAdapter\u0026lt;DefaultSecurityFilterChain, HttpSecurity\u0026gt; { private final JwtAppletTokenUtils jwtUtil; public TokenConfigurer(JwtAppletTokenUtils jwtUtil) { this.jwtUtil = jwtUtil; } @Override public void configure(HttpSecurity http) { JwtAuthenticationTokenFilter beforeFilter = new JwtAuthenticationTokenFilter(jwtUtil); http.addFilterBefore(beforeFilter, UsernamePasswordAuthenticationFilter.class); } } } Jwt ç”Ÿæˆæ–¹æ³•ï¼š 1 2 3 public String createToken(Map\u0026lt;String, Object\u0026gt; claims) { return Jwts.builder().claim(AUTHORITIES_KEY, JSONObject.toJSONString(claims)).setId(UUID.randomUUID().toString()).setIssuedAt(new Date()).setExpiration(new Date((new Date()).getTime() + tokenValidityInSeconds*1000)).compressWith(CompressionCodecs.DEFLATE).signWith(key, SignatureAlgorithm.HS512).compact(); } Jwt æ ¡éªŒæ–¹æ³•ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 public boolean validateToken(String authToken) { try { Date expiration = getExpirationDateFromToken(authToken); if (ObjectUtil.isNotNull(expiration) \u0026amp;\u0026amp; expiration.getTime() - System.currentTimeMillis() \u0026lt;= LAST_EXPIRE_TIME) { // åˆ·æ–°è¿‡æœŸæ—¶é—´ Claims claims = getClaimsFromToken(authToken); claims.setExpiration(new Date((new Date()).getTime() + tokenValidityInSeconds*1000)); } return true; } catch (io.jsonwebtoken.security.SecurityException | MalformedJwtException e) { log.error(\u0026#34;Invalid JWT signature.\u0026#34;, e); } catch (ExpiredJwtException e) { log.error(\u0026#34;Expired JWT token.\u0026#34;, e); } catch (UnsupportedJwtException e) { log.error(\u0026#34;Unsupported JWT token.\u0026#34;, e); } catch (IllegalArgumentException e) { log.error(\u0026#34;JWT token compact of handler are invalid.\u0026#34;, e); } return false; } public Date getExpirationDateFromToken(String token) { Date expiration; try { final Claims claims = getClaimsFromToken(token); expiration = claims.getExpiration(); } catch (Exception e) { expiration = null; } return expiration; } private Claims getClaimsFromToken(String token) { Claims claims; try { claims = Jwts.parser().setSigningKey(key).parseClaimsJws(token).getBody(); } catch (Exception e) { claims = null; } return claims; } ","permalink":"https://zpc2222.github.io/posts/tech/java/spring-security-framework/","summary":"ç™»å½•æ¡†æ¶ ä½¿ç”¨çš„spring securityæ¡†æ¶ï¼Œé€šè¿‡è¿‡æ»¤å™¨è¿›è¡Œæ‹¦æˆªï¼Œ ç™»å½•çš„æ—¶å€™é€šè¿‡jwtç”Ÿæˆtoken è°ƒç”¨æ¥å£ï¼Œæºå¸¦tokenï¼ŒåŒæ—¶åˆ·æ–°to","title":"ç™»å½•æ¡†æ¶"},{"content":"Shellå‘½ä»¤ æ·»åŠ ç”¨æˆ· useradd -d /home/zpc -m zpc\næŸ¥çœ‹ç«¯å£æ˜¯å¦å¼€æ”¾ /sbin/iptables -L -n\nå¼€ç«¯å£ firewall-cmd \u0026ndash;zone=public \u0026ndash;add-port=81/tcp \u0026ndash;permanent\né‡å¯é˜²ç«å¢™ systemctl restart firewalld.service\næŸ¥çœ‹ç«¯å£ firewall-cmd \u0026ndash;list-ports\nå®‰è£…JKD wget https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.tar.gz\nå®‰è£…jdk17 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 /usr/lib/jvm/java-17-openjdk-amd64/ tar -zxvf jdk-17_linux-x64_bin.tar.gz sudo mv jdk-17.0.1 /usr/local/ sudo vim /etc/profile export JAVA_HOME=/usr/local/jdk-17.0.1 export CLASSPATH=.:JAVA_HOME/lib export PATH=.:JAVA_HOME/bin:$PATH source /etc/profile å‹ç¼©å‘½ä»¤ tar.gz ä½¿ç”¨tarå‘½ä»¤è¿›è¡Œè§£å‹ tar -zxvf java.tar.gz\ngzæ–‡ä»¶çš„è§£å‹ gzip å‘½ä»¤ gzip -d java.gz\nè§£å‹gzæ–‡ä»¶åˆ°ç‰¹å®šç›®å½•,tar.gzåŒ…å†…æå–æŸä¸ªæ–‡ä»¶åœ¨æŒ‡å®šç›®å½•ä¸‹ taråŒ… tar tvf yourtarfile |grep fileyouwantï¼Œ tar xvf yourtarfile fileyouwant(copyä¸Šé¢çš„å…¨è·¯å¾„ç”¨ç»å¯¹è·¯å¾„)\ntar.gzåŒ… tar ztvf yourtargzfile |grep fileyouwantï¼Œ tar zxvf yourtarfile fileyouwant(copyä¸Šé¢çš„å…¨è·¯å¾„ç”¨ç»å¯¹è·¯å¾„)\ntarè´Ÿè´£æ‰“åŒ…ï¼Œgzipè´Ÿè´£å‹ç¼© tar -c: å»ºç«‹å‹ç¼©æ¡£æ¡ˆ -xï¼šè§£å‹ -tï¼šæŸ¥çœ‹å†…å®¹ -rï¼šå‘å‹ç¼©å½’æ¡£æ–‡ä»¶æœ«å°¾è¿½åŠ æ–‡ä»¶ -uï¼šæ›´æ–°åŸå‹ç¼©åŒ…ä¸­çš„æ–‡ä»¶\nè¿™äº”ä¸ªæ˜¯ç‹¬ç«‹çš„å‘½ä»¤ï¼Œå‹ç¼©è§£å‹éƒ½è¦ç”¨åˆ°å…¶ä¸­ä¸€ä¸ªï¼Œå¯ä»¥å’Œåˆ«çš„å‘½ä»¤è¿ç”¨ä½†åªèƒ½ç”¨å…¶ä¸­ä¸€ä¸ªã€‚ä¸‹é¢çš„å‚æ•°æ˜¯æ ¹æ®éœ€è¦åœ¨å‹ç¼©æˆ–è§£å‹æ¡£æ¡ˆæ—¶å¯é€‰çš„ã€‚\n-zï¼šæœ‰gzipå±æ€§çš„ -jï¼šæœ‰bz2å±æ€§çš„ -Zï¼šæœ‰compresså±æ€§çš„ -vï¼šæ˜¾ç¤ºæ‰€æœ‰è¿‡ç¨‹ -Oï¼šå°†æ–‡ä»¶è§£å¼€åˆ°æ ‡å‡†è¾“å‡º\n","permalink":"https://zpc2222.github.io/posts/tools/linux/","summary":"Shellå‘½ä»¤ æ·»åŠ ç”¨æˆ· useradd -d /home/zpc -m zpc æŸ¥çœ‹ç«¯å£æ˜¯å¦å¼€æ”¾ /sbin/iptables -L -n å¼€ç«¯å£ firewall-cmd \u0026ndash;zone=public \u0026ndash;add-port=81/tcp \u0026ndash;permanent é‡å¯é˜²ç«å¢™ systemctl restart firewalld.service æŸ¥çœ‹ç«¯å£ firewall-cmd \u0026ndash;list-ports å®‰è£…JKD wget https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.tar.gz å®‰è£…jdk17 1 2 3 4 5 6 7 8","title":"Linux"},{"content":"Windows10/11ç³»ç»Ÿ\nå¸¸ç”¨å·¥å…· ç¼–ç¨‹å·¥å…·ï¼šIEDA(Java)ï¼ŒMobaXterm(SSH+FTP)ï¼ŒApifox(å›½å†…ç‰ˆpostman)ï¼ŒGit(ä»£ç ï¼Œæ–‡æ¡£ç®¡ç†)\nideaæ’ä»¶ï¼šmybatisXï¼ŒPower Mode ||ï¼ŒRainbow Branketsï¼ŒSequenceDiagramï¼ŒGitToolBox\nçŸ¥è¯†ç®¡ç†ï¼šObsidian \u0026amp; æœ‰é“äº‘ç¬”è®°\nå›¾åƒç®¡ç†ï¼šPicGo å›¾åºŠ ~~\u0026amp; Google ç›¸å†Œ ~~\næ–‡æœ¬æ¯”è¾ƒï¼šBeyond Compare\nç½‘ç›˜åŒæ­¥ï¼šåšæœäº‘ï¼Œé˜¿é‡Œç½‘ç›˜ï¼Œç™¾åº¦äº‘ç›˜\nç³»ç»Ÿæ—¥å¸¸ æµè§ˆå™¨ï¼šEdge \u0026amp; Firefox(æäº¤ä»£ç )\nè¾“å…¥æ³•ï¼šæœç‹—\né€šè®¯ï¼šå¾®ä¿¡ \u0026amp; ä¼ä¸šå¾®ä¿¡\nä¸‹è½½ï¼šAria2 \u0026amp; IDM \u0026amp; Kinhdown(ç™¾åº¦äº‘è§£æ)\nä½é¢‘å·¥å…· çˆ¬è™«ç›‘æµ‹ï¼šOpenWebMonitor \u0026amp; spider-flow\nç¿»è¯‘è¯å…¸ï¼šDeepL \u0026amp; GoldenDict \u0026amp; æ¬§é™†è¯å…¸ \u0026amp; æœ‰é“è¯å…¸ \u0026amp; QTranslate \u0026amp; Lingoes\nè¿œç¨‹ç®¡ç†ï¼šToDesk \u0026amp; AnyDesk \u0026amp; Teamviewer \u0026amp; Remote Utilities \u0026amp; XT800\nå¸è½½æ¸…ç†ï¼šIObit Uninstaller \u0026amp; Glary Utilities(æ³¨å†Œè¡¨æ¸…ç†) \u0026amp; Geek Uninstaller\nå¶å°”ä½¿ç”¨ï¼šVeraCrypt(æœ¬åœ°åŠ å¯†)ã€Recuva(æ–‡ä»¶æ¢å¤)ã€12306Bypassã€çˆ±æ€åŠ©æ‰‹ã€Bluestacks(å®‰å“æ¨¡æ‹Ÿå™¨)ã€å¾® PE å·¥å…·ç®±ã€å‚²æ¢…åˆ†åŒº\nDockItï¼šä¸»æ˜¾ç¤ºå±ä¸­ï¼Œéå…¨å±çŠ¶æ€ä¸‹ï¼Œå¿«é€Ÿå°†çª—å£å±€éƒ¨åŒ–ã€‚å¦‚ä½•é»˜è®¤ä¸å…¨å±ï¼›åº”ç”¨ä¸è‡ªåŠ¨å¸è¾¹ï¼Ÿ\nWechatExporterï¼šå¾®ä¿¡è®°å½•å¯¼å‡ºï¼Œä»…é™ iOS æ‰‹æœºã€‚å®‰å“å’Œ PC ç«¯å¾®ä¿¡éƒ½åŠ å¯†ï¼Œæ— æ³•å¯¼å‡ºæŸ¥çœ‹ã€‚\nSmartTubeNextï¼šç”µè§†ç›’å­ä¸Šçš„å»å¹¿å‘Šç‰ˆ tube\nIDEAæ’ä»¶ æ’ä»¶å åŠŸèƒ½ mybatisX ç›´æ¥è·³è½¬åˆ°å¯¹é¢çš„xmlä¸­ Power Mode å¿˜äº† Rainbow Brankets + å¤§æ‹¬å·æ˜æ˜¾ SequenceDiagram æ¥å£æµç¨‹å›¾ GitToolBox gitæ—¥å¿—éšæ—¶çœ‹ ","permalink":"https://zpc2222.github.io/posts/tools/applist/","summary":"Windows10/11ç³»ç»Ÿ å¸¸ç”¨å·¥å…· ç¼–ç¨‹å·¥å…·ï¼šIEDA(Java)ï¼ŒMobaXterm(SSH+FTP)ï¼ŒApifox(å›½å†…ç‰ˆpostman","title":"å¿…å¤‡åº”ç”¨"},{"content":"å…³äºæœ¬ç«™ï¼ŒåŠæˆ‘\næœ¬ç«™ï¼š\nhugoå‘å¸ƒçš„nextä¸»é¢˜çš„é™æ€ç½‘ç«™ï¼Œæ›¾ä½¿ç”¨è¿‡jekyllã€hexoã€‚æœ€åå‘ç°äº†hugoè¿™ä¸ªå®è—ï¼\nJekyllä½¿ç”¨rubyç¼–å†™ï¼Œæœ‰githubæ”¯æŒï¼Œå¯ä»¥å°†markdownæ–‡ä»¶ç›´æ¥æ”¾åˆ°gitä»“åº“ï¼Œgithubä¼šè‡ªåŠ¨ç”Ÿæˆç½‘é¡µæ–‡ä»¶ã€‚ï¼ˆGithubä¸€ç›´æ˜¯ä¸€ä¸ªäº²rubyçš„ç¤¾åŒºï¼‰ Hexoä½¿ç”¨nodejsï¼Œæä¾›äº†æ–¹ä¾¿çš„éƒ¨ç½²å‘½ä»¤ï¼Œå¯ä»¥åšåˆ°ä¸€æ¡å‘½ä»¤éƒ¨ç½²åˆ°githubä¸Šã€‚ Hugoä½¿ç”¨goè¯­è¨€æ˜¯ä¸€ç§ç¼–è¯‘å‹è¯­è¨€ï¼Œé€Ÿåº¦éå¸¸å¿«ï¼Œå®˜æ–¹æ–‡æ¡£å†™çš„éå¸¸å¥½ï¼Œéƒ¨ç½²ç®€æ´ã€‚å‰ä¸¤è€…éƒ¨ç½²æ—¶éœ€è¦å®‰è£…å¾ˆå¤šä¾èµ–ï¼Œè€Œhugoå¯ä»¥ç›´æ¥æä¾›äºŒè¿›åˆ¶æ–‡ä»¶è¿è¡Œï¼Œç”šè‡³ä¸éœ€è¦rootæƒé™ã€‚ æˆ‘ï¼š\nä¸€åJavaç¨‹åºå‘˜,çˆ±ç ”ç©¶ï¼Œçˆ±å­¦ä¹ ï¼Œçˆ±æ¢ç©¶æ–°çš„æŠ€æœ¯ï¼\nå‰ä¸‰å¹´ï¼šä»¥å‰ç«¯çš„èº«ä»½å…¥èŒä¸­è½¯å›½é™…ï¼Œæœªè½¬æ­£å‰è½¬ä¸ºæµ‹è¯•ï¼Œå‚ä¸å¤šä¸ªé¡¹ç›®ï¼Œä»é¡µé¢æµ‹è¯•ï¼Œé»‘ç›’æµ‹è¯•ï¼Œæ…¢æ…¢åˆ°åç«¯åŠç™½ç›’æµ‹è¯•ï¼ŒåæœŸåŸºæœ¬éƒ½æ˜¯ä½¿ç”¨Javaè¿›è¡Œä»£ç æµ‹è¯•ï¼ ä¸­ä¸‰å¹´ï¼šå†™äº†ä¸€å¹´çš„testNGç”¨ä¾‹åï¼Œå¹²è„†è¿˜æ˜¯åšå¼€å‘äº†ï¼Œå°±è¿™æ ·åˆå›åˆ°äº†å¼€å‘å²—ä½ä¸Šï¼Œå‘ç°åšæŠ€æœ¯ï¼Œæ¯”æ‰“äº¤é“ï¼Œè¦è½»æ¾çš„å¤šäº† åä¸‰å¹´ï¼šæ­£åœ¨è¿›è¡Œä¸­ï¼Œå­¦ä¹ æ–°æŠ€æœ¯ï¼Œå­¦ä¹ æ¶æ„ä¸­ï¼ ç½‘å: è—é”‹ èŒä¸š: ç¨‹åºå‘˜ çˆ±å¥½: å…»ä¹Œé¾Ÿ/é¡ºå¸¦å…»é±¼ï¼Œçˆ¬å±±ï¼Œæ—…è¡Œ è”ç³»æ–¹å¼ è¯·çœ‹ä¸»é¡µ ","permalink":"https://zpc2222.github.io/about/","summary":"å…³äºæœ¬ç«™ï¼ŒåŠæˆ‘ æœ¬ç«™ï¼š hugoå‘å¸ƒçš„nextä¸»é¢˜çš„é™æ€ç½‘ç«™ï¼Œæ›¾ä½¿ç”¨è¿‡jekyllã€hexoã€‚æœ€åå‘ç°äº†hugoè¿™ä¸ªå®è—ï¼ Jekyllä½¿ç”¨rub","title":"ğŸ™‹ğŸ»â€â™‚ï¸å…³äº"},{"content":"å¾®ä¿¡æ”¯ä»˜ æ¡†æ¶ä¸ºspringbootï¼Œéœ€è¦åœ¨å°ç¨‹åºçš„åç«¯æœåŠ¡ä¸­ï¼Œä½¿ç”¨æ¥å¾®ä¿¡æ”¯ä»˜ï¼› åœ¨ç½‘ä¸Šé€‰æ‹©äº†å¾ˆå¤šçš„æŠ€æœ¯é€‰å‹ï¼Œå‘ç°å¦‚æœæ˜¯è‡ªå·±å°è£…ï¼Œä¸€ä¸ªæ˜¯å¤ªç¹çï¼Œè¿˜æœ‰å°±æ˜¯ä¸æ–¹ä¾¿ç»´æŠ¤ï¼Œå‘ç°ä¸€ä¸ªæ¯”è¾ƒå¥½çš„springbootåŒ…ã€‚\nå®˜ç½‘åœ°å€ï¼šâ€˜Document (notfound403.github.io)â€™\nSpring bootä¾èµ–åŒ… pomå¼•ç”¨ \u0026lt;dependency\u0026gt; \u0026lt;groupId\u0026gt;cn.felord\u0026lt;/groupId\u0026gt; \u0026lt;artifactId\u0026gt;payment-spring-boot-starter\u0026lt;/artifactId\u0026gt; \u0026lt;version\u0026gt;1.0.11.RELEASE\u0026lt;/version\u0026gt; \u0026lt;/dependency\u0026gt; å¯¼å…¥ä¹‹åï¼Œå¯ä»¥ç›´æ¥å¼•ç”¨\nä½†æ˜¯å»ºè®®ç›´æ¥ç”¨åˆ«çš„ä¾èµ–ï¼Œå¦‚æœäººå®¶åœæ­¢ç»´æŠ¤äº†ï¼Œè¿˜å¾—é‡æ–°æä¸€éï¼Œå¯ä»¥å­¦ä¹ ä¸‹äººå®¶çš„æºç ï¼Œè‡ªå·±å°è£…äº†ä¸‹ï¼Œå¯¹æ¥å¾®ä¿¡æ”¯ä»˜V3çš„å¤§éƒ¨åˆ†SDKäº†\næºç åœ°å€ GitHubï¼šGitHub - NotFound403/payment-spring-boot: å¾®ä¿¡æ”¯ä»˜V3ï¼Œå¾®ä¿¡ä¼˜æƒ åˆ¸ï¼Œä»£é‡‘åˆ¸ã€å…¬ä¼—å·æ”¯ä»˜ã€å¾®ä¿¡å°ç¨‹åºæ”¯ä»˜ã€åˆ†è´¦ã€æ”¯ä»˜åˆ†ã€å•†å®¶åˆ¸\nå°è£…åå¼•ç”¨ä¸ç›´æ¥å¼•ç”¨æ•ˆæœæ˜¯ä¸€æ ·çš„\nå®ç°: 1. é¢„ç½®æ¡ä»¶ 1.ç”³è¯·å•†æˆ·å· 2.ç»‘å®šå°ç¨‹åºä¸å•†æˆ·å· 3.åœ¨å•†æˆ·å·é‡Œï¼Œç”ŸæˆV3çš„å¯†é’¥ï¼ˆV1,V2ä¸è¦ç”¨äº†ï¼Œå¤ªè€äº†ï¼‰ 4.ä¸‹è½½p12è¯ä¹¦ï¼Œå¹¶å¯¼å…¥åˆ°é¡¹ç›®ä¸­` P12è¯ä¹¦å¯¼å…¥ï¼Œç¼–è¯‘å¯èƒ½ä¸ä¼šæˆåŠŸï¼Œéœ€è¦åœ¨pomé‡Œé¢åŠ ä¸‹ï¼š\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 \u0026lt;plugin\u0026gt; \u0026lt;artifactId\u0026gt;maven-resources-plugin\u0026lt;/artifactId\u0026gt; \u0026lt;executions\u0026gt; \u0026lt;execution\u0026gt; \u0026lt;id\u0026gt;copy-resources\u0026lt;/id\u0026gt; \u0026lt;phase\u0026gt;package\u0026lt;/phase\u0026gt; \u0026lt;goals\u0026gt; \u0026lt;goal\u0026gt;copy-resources\u0026lt;/goal\u0026gt; \u0026lt;/goals\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;outputDirectory\u0026gt;${project.build.directory}/maven-archiver/resources\u0026lt;/outputDirectory\u0026gt; \u0026lt;resources\u0026gt; \u0026lt;resource\u0026gt; \u0026lt;directory\u0026gt;/src/main/resources/profile-${profile.active}\u0026lt;/directory\u0026gt; \u0026lt;include\u0026gt;application.yml\u0026lt;/include\u0026gt; \u0026lt;include\u0026gt;application-${profile.active}.yml\u0026lt;/include\u0026gt; \u0026lt;include\u0026gt;log4j2-${profile.active}.xml\u0026lt;/include\u0026gt; \u0026lt;include\u0026gt;bootstrap-${profile.active}.properties\u0026lt;/include\u0026gt; \u0026lt;filtering\u0026gt;true\u0026lt;/filtering\u0026gt; \u0026lt;/resource\u0026gt; \u0026lt;/resources\u0026gt; \u0026lt;/configuration\u0026gt; \u0026lt;/execution\u0026gt; \u0026lt;/executions\u0026gt; \u0026lt;configuration\u0026gt; \u0026lt;encoding\u0026gt;UTF-8\u0026lt;/encoding\u0026gt; \u0026lt;!-- è¿‡æ»¤åç¼€ä¸ºpemã€pfxçš„è¯ä¹¦æ–‡ä»¶ --\u0026gt; \u0026lt;nonFilteredFileExtensions\u0026gt; \u0026lt;nonFilteredFileExtension\u0026gt;pem\u0026lt;/nonFilteredFileExtension\u0026gt; \u0026lt;nonFilteredFileExtension\u0026gt;pfx\u0026lt;/nonFilteredFileExtension\u0026gt; \u0026lt;nonFilteredFileExtension\u0026gt;p12\u0026lt;/nonFilteredFileExtension\u0026gt; \u0026lt;/nonFilteredFileExtensions\u0026gt; \u0026lt;/configuration\u0026gt;\u0026lt;/plugin\u0026gt; 2. æ·»åŠ åˆ°å·¥ç¨‹çš„yamlé…ç½® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 wechat: applets: # å°ç¨‹åºçš„é…ç½®é¡¹ openidUrl: https://api.weixin.qq.com/sns/jscode2session appid: appid secret: secret pay: #å¾®ä¿¡æ”¯ä»˜é…ç½®é¡¹ v3: # å¾®ä¿¡å°ç¨‹åºç§Ÿæˆ·æ ‡è¯†ä¸º applets applets: # åº”ç”¨appId å¿…å¡« app-id: appid # api v3 å¯†é’¥ å¿…å¡« app-v3-secret: v3secret # å¾®ä¿¡æ”¯ä»˜å•†æˆ·å· å¿…å¡« mch-id: 1234567 # å•†æˆ·æœåŠ¡å™¨åŸŸå ç”¨äºå›è°ƒ å›è°ƒè·¯å¾„ä¸º domain + notifyUrl éœ€è¦æ”¾å¼€å›è°ƒæ¥å£çš„å®‰å…¨ç­–ç•¥ å¿…å¡« domain: https://xxx/app # å•†æˆ· api è¯ä¹¦è·¯å¾„ å¿…å¡« å¡«å†™classpathè·¯å¾„ ä½äº mavené¡¹ç›®çš„resourcesæ–‡ä»¶ä¸‹ cert-path: apiclient_cert.p12 3. æ”¯ä»˜ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 private final WechatApiProvider wechatApiProvider; OrderInfo orderInfo=XXx String ipAddr = getLocalIp(); // å®šä¹‰é™„åŠ æ•°æ® Map\u0026lt;String, Object\u0026gt; attach = new HashMap\u0026lt;\u0026gt;(); attach.put(\u0026#34;userId\u0026#34;, orderInfo.getUserId()); attach.put(\u0026#34;leaveComment\u0026#34;, orderInfo.getLeaveComment()); PayParams payParams = new PayParams(); // å•†å“æè¿°,å¿…å¡« payParams.setDescription(DESC); // å•†æˆ·ä¾§å”¯ä¸€è®¢å•å· å»ºè®®ä¸ºå•†æˆ·ä¾§æ”¯ä»˜è®¢å•å· è®¢å•è¡¨ä¸»é”® æˆ–è€…å”¯ä¸€æ ‡è¯†å­—æ®µ payParams.setOutTradeNo(orderInfo.getOrderId().toString()); payParams.setAttach(JSONObject.toJSONString(attach)); // éœ€è¦å®šä¹‰å›è°ƒé€šçŸ¥ payParams.setNotifyUrl(NOTIFY_URL); Amount amount = new Amount(); //ä»˜æ¬¾é‡‘é¢å•ä½ä¸ºâ€œåˆ†â€ amount.setTotal(orderInfo.getTotalPrice().intValue()); payParams.setAmount(amount); // æ­¤ç±»æ”¯ä»˜Payerå¿…ä¼ ,ä¸”openidéœ€è¦åŒappidæœ‰ç»‘å®šå…³ç³» å…·ä½“å»çœ‹æ–‡æ¡£ Payer payer = new Payer(); payer.setOpenid(openId); payParams.setPayer(payer); //æ”¯ä»˜åœºæ™¯æè¿° SceneInfo sceneInfo = new SceneInfo(); //ç”¨æˆ·ç»ˆç«¯IP sceneInfo.setPayerClientIp(ipAddr); if (orderInfo.getChargePileId() != null) { sceneInfo.setDeviceId(orderInfo.getChargePileId().toString()); } payParams.setSceneInfo(sceneInfo); wechatApiProvider.directPayApi(TENANT_ID).jsPay(payParams).getBody(); 4.æ”¯ä»˜å›è°ƒï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 wechatApiProvider.callback(TENANT_ID).transactionCallback(params, data -\u0026gt; { Long orderId = Long.valueOf(data.getOutTradeNo()); OrderInfo orderInfo = orderInfoMapper.selectById(orderId); if (orderInfo == null) { log.error(\u0026#34;è®¢å•ä¸å­˜åœ¨ï¼Œå›è°ƒå¼‚å¸¸\u0026#34;); } if (UNPAID.getCode() != orderInfo.getStatus()) { log.error(\u0026#34;è®¢å•çŠ¶æ€ä¸º[{}]ï¼Œéæœªæ”¯ä»˜ï¼Œå›è°ƒå¼‚å¸¸\u0026#34;, orderInfo.getStatus()); } orderService.updateOrderStatus(orderId, PAID, OrderInfoVO.builder().payMethod(WXPAY.getCode()).build()); log.info(\u0026#34;è®¢å•çŠ¶æ€åˆ·æ–°ï¼šorderId={}\u0026#34;, orderId); PayRecord payRecord = new PayRecord(); payRecord.setPayMerchantid(data.getMchid()); payRecord.setPayPrice(data.getAmount().getTotal()); payRecord.setOrderId(orderId); payRecord.setType(1); saveRecord(payRecord, 1); log.info(\u0026#34;æ”¯ä»˜è®°å½•ä¿å­˜ï¼š{}\u0026#34;, payRecord); }); 5.é€€æ¬¾ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 RefundParams refundParams = new RefundParams(); RefundParams.RefundAmount amount = new RefundParams.RefundAmount(); amount.setRefund(paymentRefund.getRefundAmount()); amount.setTotal(paymentRefund.getActualAmount()); refundParams.setAmount(amount); refundParams.setOutRefundNo(REFUND + paymentRefund.getOutTradeNo()); refundParams.setNotifyUrl(NOTIFY_REFUND_URL); refundParams.setOutTradeNo(paymentRefund.getOutTradeNo()); refundParams.setReason(paymentRefund.getReason()); List\u0026lt;RefundGoodsDetail\u0026gt; goodsDetail = new ArrayList\u0026lt;\u0026gt;(); RefundGoodsDetail detail = new RefundGoodsDetail(); detail.setMerchantGoodsId(paymentRefund.getMerchantGoodsId()); detail.setGoodsName(paymentRefund.getGoodsName()); //æ•°é‡å†™æ­»1ï¼Œå•†å“å•ä»·é‡‘é¢ç­‰äºæ€»é€€æ¬¾é‡‘é¢ detail.setUnitPrice(paymentRefund.getRefundAmount()); detail.setRefundQuantity(1); detail.setRefundAmount(paymentRefund.getRefundAmount()); goodsDetail.add(detail); refundParams.setGoodsDetail(goodsDetail); wechatApiProvider.directPayApi(TENANT_ID).refund(refundParams).getBody(); 6.é€€æ¬¾å›è°ƒ: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 wechatApiProvider.callback(TENANT_ID).refundCallback(params, data -\u0026gt; { log.info(\u0026#34;é€€æ¬¾å›è°ƒï¼šdata={}\u0026#34;, data); Long orderId = Long.valueOf(data.getOutTradeNo()); OrderInfo orderInfo = orderInfoMapper.selectById(orderId); if (orderInfo == null) { log.error(\u0026#34;è®¢å•[{}]ä¸å­˜åœ¨ï¼Œé€€æ¬¾å›è°ƒå¼‚å¸¸\u0026#34;, orderId); } if (PAID.getCode() != orderInfo.getStatus()) { log.error(\u0026#34;è®¢å•[{}]çŠ¶æ€ä¸º[{}]ï¼Œéå·²æ”¯ä»˜ï¼Œè¯·æ£€æŸ¥è®¢å•çŠ¶æ€æ˜¯å¦å‡†ç¡®\u0026#34;, orderId, orderInfo.getStatus()); return; } orderService.updateOrderStatus(orderId, Constant.OrderStatus.REFUNDED, OrderInfoVO.builder().payMethod(WXPAY.getCode()).build()); log.info(\u0026#34;è®¢å•çŠ¶æ€åˆ·æ–°ï¼šorderId={}\u0026#34;, orderId); PayRecord payRecord = new PayRecord(); payRecord.setPayMerchantid(data.getMchid()); payRecord.setPayPrice(data.getAmount().getPayerRefund()); payRecord.setOrderId(orderId); payRecord.setType(2); saveRecord(payRecord, 2); log.info(\u0026#34;æ”¯ä»˜è®°å½•ä¿å­˜ï¼š{}\u0026#34;, payRecord); }); å¦‚ä¸ŠåŒ…å«äº†åŸºæœ¬æ”¯ä»˜çš„ä¸€å¥—æµç¨‹äº†ï¼Œè¿˜æœ‰å…¶ä»–å¦‚è´¦å•ä¸‹è½½ï¼Œè®¢å•æŸ¥è¯¢ï¼Œå…³é—­è®¢å•ï¼Œç§¯åˆ†æ”¯ä»˜ï¼Œåˆå¹¶æ”¯ä»˜ç­‰å¤æ‚çš„æ¥å£ï¼Œå¯ä»¥è‡ªå·±ç ”ç©¶ï¼Œå°è£…ç±»é‡Œé¢éƒ½å·²ç»åŒ…å«äº†\n","permalink":"https://zpc2222.github.io/posts/tech/java/wechatpay/","summary":"å¾®ä¿¡æ”¯ä»˜ æ¡†æ¶ä¸ºspringbootï¼Œéœ€è¦åœ¨å°ç¨‹åºçš„åç«¯æœåŠ¡ä¸­ï¼Œä½¿ç”¨æ¥å¾®ä¿¡æ”¯ä»˜ï¼› åœ¨ç½‘ä¸Šé€‰æ‹©äº†å¾ˆå¤šçš„æŠ€æœ¯é€‰å‹ï¼Œå‘ç°å¦‚æœæ˜¯è‡ªå·±å°è£…ï¼Œä¸€ä¸ªæ˜¯å¤ªç¹çï¼Œ","title":"springbootæ¥å…¥å¾®ä¿¡æ”¯ä»˜"},{"content":"å¾®ä¿¡å°ç¨‹åºç›¸å…³ å°ç¨‹åºåœ°å€\n1.ç™»é™† è·å–openidæ–¹æ³•ï¼Œé€šè¿‡é¡µé¢è·å–çš„jsCodeï¼ŒåŠ ä¸Šappidï¼Œç§˜é’¥ï¼Œé€šè¿‡getæ–¹å¼è·å–\n1 2 3 4 5 6 7 8 OPENID_URL=\u0026#34;https://api.weixin.qq.com/sns/jscode2session\u0026#34;; Map\u0026lt;String, String\u0026gt; map = new HashMap\u0026lt;\u0026gt;(8); map.put(\u0026#34;appid\u0026#34;, APPID); map.put(\u0026#34;secret\u0026#34;, SECRET); map.put(\u0026#34;js_code\u0026#34;, wechatUser.getJsCode()); map.put(\u0026#34;grant_type\u0026#34;, \u0026#34;authorization_code\u0026#34;); String resultJson = HttpClients.get(OPENID_URL, map); accessTokenè·å–æ–¹æ³•ï¼š ä¹Ÿæ˜¯é€šè¿‡getæ–¹æ³•ï¼Œurlä¸åŒ,è·å–å¾—åˆ°access_tokenè·Ÿexpires_inï¼ˆ2å°æ—¶é»˜è®¤ï¼‰\n1 2 String url = TOKEN_URL + \u0026#34;?grant_type=client_credential\u0026amp;appid=\u0026#34; + APP_ID + \u0026#34;\u0026amp;secret=\u0026#34; + APP_SECRET; String resultJson = HttpClients.get(url) 3.è®¢é˜…æ¶ˆæ¯ æ¥å£è¯´æ˜ï¼š subscribeMessage.send | å¾®ä¿¡å¼€æ”¾æ–‡æ¡£ (qq.com)\nå‰æï¼š ç™»é™†å°ç¨‹åºï¼Œåˆ›å»ºå¥½æ¨¡æ¿ è·å–æ¨¡æ¿idï¼Œå­—æ®µ\ndataä¸­çš„ç±»å‹ï¼Œéƒ½ä»¥Stringç±»å‹å­˜è¿›å»\nJavaå®ç°ï¼Œå…·ä½“å­—æ®µå‚è€ƒä¸Šé¢çš„æ–‡æ¡£ï¼š\n1 2 3 4 String SUBSCRIBE_URL = \u0026#34;https://api.weixin.qq.com/cgi-bin/message/subscribe/send\u0026#34;; String url = SUBSCRIBE_URL + \u0026#34;?access_token=\u0026#34; + token; RequestBody body = RequestBody.create(JSON, Jsons.toJson(subMsg)); String resultJson = HttpClients.post(url, body); å¯ä»¥ç”¨postmanå‘é€å¦‚ä¸‹çš„ï¼Œè¿›è¡ŒéªŒè¯(access_tokenéœ€è¦æ›¿æ¢ï¼Œtouserå¿…é¡»è¦æ˜¯è¯¥apiiidä¸‹ç”Ÿæˆçš„ï¼Œå¹¶ä¸”å·²ç»åœ¨å°ç¨‹åºç«¯è®¢é˜…äº†æ¶ˆæ¯)\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 postå‘é€æ¨¡æ¿ https://api.weixin.qq.com/cgi-bin/message/subscribe/send?access_token=60_1LE2Afo9K2mvUGh-Oe_SKxKrA8_8HGKZhdg1wgtOj0oq_TI07E883H4ddCqkwtSn53OsKI4gqvj0YIle0RdwE_dwjy-ttci6nuDkH7Ja0zbJmsBa_FL-6lgtYsRZef9fWrNEF5-YgcsIPnd8KALiAGAYOZ { \u0026#34;touser\u0026#34;: \u0026#34;oEeL85FWxlG4HJU2eShtLMtWivoM\u0026#34;, \u0026#34;template_id\u0026#34;: \u0026#34;dgiozsRsVCqppuesQHJV5NZW5inmHf5bcNH5C74rglE\u0026#34;, \u0026#34;page\u0026#34;:\u0026#34;/pages/login/index\u0026#34;, \u0026#34;lang\u0026#34;:\u0026#34;zh_CN\u0026#34;, \u0026#34;data\u0026#34;: { \u0026#34;character_string5\u0026#34;: { \u0026#34;value\u0026#34;: \u0026#34;12312312333\u0026#34; }, \u0026#34;number13\u0026#34;: { \u0026#34;value\u0026#34;: \u0026#34;11\u0026#34; }, \u0026#34;amount6\u0026#34;: { \u0026#34;value\u0026#34;: \u0026#34;66\u0026#34; } , \u0026#34;time3\u0026#34;: { \u0026#34;value\u0026#34;: \u0026#34;2022å¹´08æœˆ22æ—¥\u0026#34; }, \u0026#34;thing7\u0026#34;: { \u0026#34;value\u0026#34;: \u0026#34;å……ç”µç»“æŸå•¦\u0026#34; } } } ","permalink":"https://zpc2222.github.io/posts/tech/java/wechat-mini-program/","summary":"å¾®ä¿¡å°ç¨‹åºç›¸å…³ å°ç¨‹åºåœ°å€ 1.ç™»é™† è·å–openidæ–¹æ³•ï¼Œé€šè¿‡é¡µé¢è·å–çš„jsCodeï¼ŒåŠ ä¸Šappidï¼Œç§˜é’¥ï¼Œé€šè¿‡getæ–¹å¼è·å– 1 2 3 4 5 6 7 8 OPENID_URL=\u0026#34;https://api.weixin.qq.com/sns/jscode2session\u0026#34;;","title":"å¾®ä¿¡å°ç¨‹åºç›¸å…³"},{"content":"cronè¡¨è¾¾å¼ ï¼ˆcron = \u0026ldquo;* * * * * *\u0026rdquo;)\ncronè¡¨è¾¾å¼æ ¼å¼ï¼š {ç§’æ•°} {åˆ†é’Ÿ} {å°æ—¶} {æ—¥æœŸ} {æœˆä»½} {æ˜ŸæœŸ} {å¹´ä»½(å¯ä¸ºç©º)}\nä¾‹ \u0026ldquo;0 0 12 ? * WED\u0026rdquo; åœ¨æ¯æ˜ŸæœŸä¸‰ä¸‹åˆ12:00 æ‰§è¡Œï¼ˆå¹´ä»½é€šå¸¸ çœç•¥ï¼‰ 0 0/10 * * * ? 10åˆ†é’Ÿä¸€æ¬¡ */5 * * * * ? æ¯éš”5ç§’æ‰§è¡Œä¸€æ¬¡ 0 */1 * * * ? æ¯éš”1åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ 0 0 5-15 * * ? æ¯å¤©5-15ç‚¹æ•´ç‚¹è§¦å‘ 0 0/3 * * * ? æ¯ä¸‰åˆ†é’Ÿè§¦å‘ä¸€æ¬¡ 0 0-5 14 * * ? åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:05æœŸé—´çš„æ¯1åˆ†é’Ÿè§¦å‘ 0 0/5 14 * * ? åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°ä¸‹åˆ2:55æœŸé—´çš„æ¯5åˆ†é’Ÿè§¦å‘ 0 0/5 14,18 * * ? åœ¨æ¯å¤©ä¸‹åˆ2ç‚¹åˆ°2:55æœŸé—´å’Œä¸‹åˆ6ç‚¹åˆ°6:55æœŸé—´çš„æ¯5åˆ†é’Ÿè§¦å‘ 0 0/30 9-17 * * ? æœä¹æ™šäº”å·¥ä½œæ—¶é—´å†…æ¯åŠå°æ—¶ 0 0 10,14,16 * * ? æ¯å¤©ä¸Šåˆ10ç‚¹ï¼Œä¸‹åˆ2ç‚¹ï¼Œ4ç‚¹\n0 0 12 ? * WED è¡¨ç¤ºæ¯ä¸ªæ˜ŸæœŸä¸‰ä¸­åˆ12ç‚¹ 0 0 17 ? * TUES,THUR,SAT æ¯å‘¨äºŒã€å››ã€å…­ä¸‹åˆäº”ç‚¹ 0 10,44 14 ? 3 WED æ¯å¹´ä¸‰æœˆçš„æ˜ŸæœŸä¸‰çš„ä¸‹åˆ2:10å’Œ2:44è§¦å‘ 0 15 10 ? * MON-FRI å‘¨ä¸€è‡³å‘¨äº”çš„ä¸Šåˆ10:15è§¦å‘ 0 0 23 L * ? æ¯æœˆæœ€åä¸€å¤©23ç‚¹æ‰§è¡Œä¸€æ¬¡ 0 15 10 L * ? æ¯æœˆæœ€åä¸€æ—¥çš„ä¸Šåˆ10:15è§¦å‘ 0 15 10 ? * 6L æ¯æœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘ 0 15 10 * * ? 2005 2005å¹´çš„æ¯å¤©ä¸Šåˆ10:15è§¦å‘ 0 15 10 ? * 6L 2002-2005 2002å¹´è‡³2005å¹´çš„æ¯æœˆçš„æœ€åä¸€ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘ 0 15 10 ? * 6#3 æ¯æœˆçš„ç¬¬ä¸‰ä¸ªæ˜ŸæœŸäº”ä¸Šåˆ10:15è§¦å‘\n\u0026ldquo;30 * * * * ?\u0026rdquo; æ¯åŠåˆ†é’Ÿè§¦å‘ä»»åŠ¡ \u0026ldquo;30 10 * * * ?\u0026rdquo; æ¯å°æ—¶çš„10åˆ†30ç§’è§¦å‘ä»»åŠ¡ \u0026ldquo;30 10 1 * * ?\u0026rdquo; æ¯å¤©1ç‚¹10åˆ†30ç§’è§¦å‘ä»»åŠ¡ \u0026ldquo;30 10 1 20 * ?\u0026rdquo; æ¯æœˆ20å·1ç‚¹10åˆ†30ç§’è§¦å‘ä»»åŠ¡ \u0026ldquo;30 10 1 20 10 ? *\u0026rdquo; æ¯å¹´10æœˆ20å·1ç‚¹10åˆ†30ç§’è§¦å‘ä»»åŠ¡ \u0026ldquo;30 10 1 20 10 ? 2011\u0026rdquo; 2011å¹´10æœˆ20å·1ç‚¹10åˆ†30ç§’è§¦å‘ä»»åŠ¡ \u0026ldquo;30 10 1 ? 10 * 2011\u0026rdquo; 2011å¹´10æœˆæ¯å¤©1ç‚¹10åˆ†30ç§’è§¦å‘ä»»åŠ¡ \u0026ldquo;30 10 1 ? 10 SUN 2011\u0026rdquo; 2011å¹´10æœˆæ¯å‘¨æ—¥1ç‚¹10åˆ†30ç§’è§¦å‘ä»»åŠ¡ \u0026ldquo;15,30,45 * * * * ?\u0026rdquo; æ¯15ç§’ï¼Œ30ç§’ï¼Œ45ç§’æ—¶è§¦å‘ä»»åŠ¡ \u0026ldquo;15-45 * * * * ?\u0026rdquo; 15åˆ°45ç§’å†…ï¼Œæ¯ç§’éƒ½è§¦å‘ä»»åŠ¡ \u0026ldquo;15/5 * * * * ?\u0026rdquo; æ¯åˆ†é’Ÿçš„æ¯15ç§’å¼€å§‹è§¦å‘ï¼Œæ¯éš”5ç§’è§¦å‘ä¸€æ¬¡ \u0026ldquo;15-30/5 * * * * ?\u0026rdquo; æ¯åˆ†é’Ÿçš„15ç§’åˆ°30ç§’ä¹‹é—´å¼€å§‹è§¦å‘ï¼Œæ¯éš”5ç§’è§¦å‘ä¸€æ¬¡ \u0026ldquo;0 0/3 * * * ?\u0026rdquo; æ¯å°æ—¶çš„ç¬¬0åˆ†0ç§’å¼€å§‹ï¼Œæ¯ä¸‰åˆ†é’Ÿè§¦å‘ä¸€æ¬¡ \u0026ldquo;0 15 10 ? * MON-FRI\u0026rdquo; æ˜ŸæœŸä¸€åˆ°æ˜ŸæœŸäº”çš„10ç‚¹15åˆ†0ç§’è§¦å‘ä»»åŠ¡ \u0026ldquo;0 15 10 L * ?\u0026rdquo; æ¯ä¸ªæœˆæœ€åä¸€å¤©çš„10ç‚¹15åˆ†0ç§’è§¦å‘ä»»åŠ¡ \u0026ldquo;0 15 10 LW * ?\u0026rdquo; æ¯ä¸ªæœˆæœ€åä¸€ä¸ªå·¥ä½œæ—¥çš„10ç‚¹15åˆ†0ç§’è§¦å‘ä»»åŠ¡ \u0026ldquo;0 15 10 ? * 5L\u0026rdquo; æ¯ä¸ªæœˆæœ€åä¸€ä¸ªæ˜ŸæœŸå››çš„10ç‚¹15åˆ†0ç§’è§¦å‘ä»»åŠ¡ \u0026ldquo;0 15 10 ? * 5#3\u0026rdquo; æ¯ä¸ªæœˆç¬¬ä¸‰å‘¨çš„æ˜ŸæœŸå››çš„10ç‚¹15åˆ†0ç§’è§¦å‘ä»»åŠ¡\n","permalink":"https://zpc2222.github.io/posts/tech/cron-expression/","summary":"cronè¡¨è¾¾å¼ ï¼ˆcron = \u0026ldquo;* * * * * *\u0026rdquo;) cronè¡¨è¾¾å¼æ ¼å¼ï¼š {ç§’æ•°} {åˆ†é’Ÿ} {å°æ—¶} {æ—¥æœŸ} {æœˆä»½} {æ˜ŸæœŸ} {å¹´ä»½(å¯ä¸ºç©º)} ä¾‹ \u0026ldquo;0 0 12 ? * WED\u0026rdquo; åœ¨","title":"cronè¡¨è¾¾å¼"},{"content":"IPæŸ¥è¯¢çš„ä¸€äº›æ–¹æ³• IP_URL = \u0026ldquo;http://whois.pconline.com.cn/ipJson.jsp?ip=%s\u0026amp;json=true\u0026quot;\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 /** * è·å–ipåœ°å€ */ public static String getIp(HttpServletRequest request) { String ip = request.getHeader(\u0026#34;x-forwarded-for\u0026#34;); if (ip == null || ip.length() == 0 || UNKNOWN.equalsIgnoreCase(ip)) { ip = request.getHeader(\u0026#34;Proxy-Client-IP\u0026#34;); } if (ip == null || ip.length() == 0 || UNKNOWN.equalsIgnoreCase(ip)) { ip = request.getHeader(\u0026#34;WL-Proxy-Client-IP\u0026#34;); } if (ip == null || ip.length() == 0 || UNKNOWN.equalsIgnoreCase(ip)) { ip = request.getRemoteAddr(); } String comma = \u0026#34;,\u0026#34;; String localhost = \u0026#34;127.0.0.1\u0026#34;; if (ip.contains(comma)) { ip = ip.split(\u0026#34;,\u0026#34;)[0]; } if (localhost.equals(ip)) { // è·å–æœ¬æœºçœŸæ­£çš„ipåœ°å€ try { ip = InetAddress.getLocalHost().getHostAddress(); } catch (UnknownHostException e) { e.printStackTrace(); } } return ip; } /** * æ ¹æ®ipè·å–è¯¦ç»†åœ°å€ */ public static String getCityInfo(String ip) { String api = String.format(IP_URL, ip); JSONObject object = JSONUtil.parseObj(HttpUtil.get(api)); return object.get(\u0026#34;addr\u0026#34;, String.class); } /** * è·å¾—å½“å¤©æ˜¯å‘¨å‡  */ public static String getWeekDay() { String[] weekDays = {\u0026#34;Sun\u0026#34;, \u0026#34;Mon\u0026#34;, \u0026#34;Tue\u0026#34;, \u0026#34;Wed\u0026#34;, \u0026#34;Thu\u0026#34;, \u0026#34;Fri\u0026#34;, \u0026#34;Sat\u0026#34;}; Calendar cal = Calendar.getInstance(); cal.setTime(new Date()); int w = cal.get(Calendar.DAY_OF_WEEK) - 1; if (w \u0026lt; 0) { w = 0; } return weekDays[w]; } public static String getBrowser(HttpServletRequest request) { UserAgent userAgent = UserAgent.parseUserAgentString(request.getHeader(\u0026#34;User-Agent\u0026#34;)); Browser browser = userAgent.getBrowser(); return browser.getName(); } /** * å¯¼å‡ºexcel */public static void downloadExcel(List\u0026lt;Map\u0026lt;String, Object\u0026gt;\u0026gt; list, HttpServletResponse response) throws IOException { String tempPath = System.getProperty(\u0026#34;java.io.tmpdir\u0026#34;) + IdUtil.fastSimpleUUID() + \u0026#34;.xlsx\u0026#34;; File file = new File(tempPath); BigExcelWriter writer = ExcelUtil.getBigWriter(file); // ä¸€æ¬¡æ€§å†™å‡ºå†…å®¹ï¼Œä½¿ç”¨é»˜è®¤æ ·å¼ï¼Œå¼ºåˆ¶è¾“å‡ºæ ‡é¢˜ writer.write(list, true); //responseä¸ºHttpServletResponseå¯¹è±¡ response.setContentType(\u0026#34;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8\u0026#34;); //test.xlsæ˜¯å¼¹å‡ºä¸‹è½½å¯¹è¯æ¡†çš„æ–‡ä»¶åï¼Œä¸èƒ½ä¸ºä¸­æ–‡ï¼Œä¸­æ–‡è¯·è‡ªè¡Œç¼–ç  response.setHeader(\u0026#34;Content-Disposition\u0026#34;, \u0026#34;attachment;filename=file.xlsx\u0026#34;); ServletOutputStream out = response.getOutputStream(); // ç»ˆæ­¢ååˆ é™¤ä¸´æ—¶æ–‡ä»¶ file.deleteOnExit(); writer.flush(out, true); //æ­¤å¤„è®°å¾—å…³é—­è¾“å‡ºServletæµ IoUtil.close(out); } /** * å°†æ–‡ä»¶åè§£ææˆæ–‡ä»¶çš„ä¸Šä¼ è·¯å¾„ */ public static File upload(MultipartFile file, String filePath) { String suffix = getExtensionName(file.getOriginalFilename()); StringBuffer nowStr = fileRename(); try { String fileName = nowStr + \u0026#34;.\u0026#34; + suffix; String path = filePath + fileName; // getCanonicalFile å¯è§£ææ­£ç¡®å„ç§è·¯å¾„ File dest = new File(path).getCanonicalFile(); // æ£€æµ‹æ˜¯å¦å­˜åœ¨ç›®å½• if (!dest.getParentFile().exists()) { dest.getParentFile().mkdirs(); } // æ–‡ä»¶å†™å…¥ file.transferTo(dest); return dest; } catch (Exception e) { e.printStackTrace(); } return null; } /** * MultipartFileè½¬File */public static File toFile(MultipartFile multipartFile) { // è·å–æ–‡ä»¶å String fileName = multipartFile.getOriginalFilename(); // è·å–æ–‡ä»¶åç¼€ String prefix = \u0026#34;.\u0026#34; + getExtensionName(fileName); File file = null; try { // ç”¨uuidä½œä¸ºæ–‡ä»¶åï¼Œé˜²æ­¢ç”Ÿæˆçš„ä¸´æ—¶æ–‡ä»¶é‡å¤ file = File.createTempFile(IdUtil.simpleUUID(), prefix); // MultipartFile to File multipartFile.transferTo(file); } catch (IOException e) { e.printStackTrace(); } return file; } /** * è·å–æ–‡ä»¶æ‰©å±•åï¼Œä¸å¸¦ . */public static String getExtensionName(String filename) { if ((filename != null) \u0026amp;\u0026amp; (filename.length() \u0026gt; 0)) { int dot = filename.lastIndexOf(\u0026#39;.\u0026#39;); if ((dot \u0026gt; -1) \u0026amp;\u0026amp; (dot \u0026lt; (filename.length() - 1))) { return filename.substring(dot + 1); } } return filename; } public static String getFileType(String type) { String documents = \u0026#34;txt doc pdf ppt pps xlsx xls docx\u0026#34;; String music = \u0026#34;mp3 wav wma mpa ram ra aac aif m4a\u0026#34;; String video = \u0026#34;avi mpg mpe mpeg asf wmv mov qt rm mp4 flv m4v webm ogv ogg\u0026#34;; String image = \u0026#34;bmp dib pcp dif wmf gif jpg tif eps psd cdr iff tga pcd mpt png jpeg\u0026#34;; if (image.contains(type)) { return \u0026#34;pic\u0026#34;; } else if (documents.contains(type)) { return \u0026#34;txt\u0026#34;; } else if (music.contains(type)) { return \u0026#34;music\u0026#34;; } else if (video.contains(type)) { return \u0026#34;vedio\u0026#34;; } else { return \u0026#34;other\u0026#34;; } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 package com.ruoyi.common.core.utils.ip; import java.net.InetAddress; import java.net.UnknownHostException; import javax.servlet.http.HttpServletRequest; import com.ruoyi.common.core.utils.StringUtils; /** * è·å–IPæ–¹æ³• * * @author zpc */public class IpUtils { /** * è·å–å®¢æˆ·ç«¯IP ** @param request è¯·æ±‚å¯¹è±¡ * @return IPåœ°å€ */ public static String getIpAddr(HttpServletRequest request) { if (request == null) { return \u0026#34;unknown\u0026#34;; } String ip = request.getHeader(\u0026#34;x-forwarded-for\u0026#34;); if (ip == null || ip.length() == 0 || \u0026#34;unknown\u0026#34;.equalsIgnoreCase(ip)) { ip = request.getHeader(\u0026#34;Proxy-Client-IP\u0026#34;); } if (ip == null || ip.length() == 0 || \u0026#34;unknown\u0026#34;.equalsIgnoreCase(ip)) { ip = request.getHeader(\u0026#34;X-Forwarded-For\u0026#34;); } if (ip == null || ip.length() == 0 || \u0026#34;unknown\u0026#34;.equalsIgnoreCase(ip)) { ip = request.getHeader(\u0026#34;WL-Proxy-Client-IP\u0026#34;); } if (ip == null || ip.length() == 0 || \u0026#34;unknown\u0026#34;.equalsIgnoreCase(ip)) { ip = request.getHeader(\u0026#34;X-Real-IP\u0026#34;); } if (ip == null || ip.length() == 0 || \u0026#34;unknown\u0026#34;.equalsIgnoreCase(ip)) { ip = request.getRemoteAddr(); } return \u0026#34;0:0:0:0:0:0:0:1\u0026#34;.equals(ip) ? \u0026#34;127.0.0.1\u0026#34; : getMultistageReverseProxyIp(ip); } /** * æ£€æŸ¥æ˜¯å¦ä¸ºå†…éƒ¨IPåœ°å€ * * @param ip IPåœ°å€ * @return ç»“æœ */ public static boolean internalIp(String ip) { byte[] addr = textToNumericFormatV4(ip); return internalIp(addr) || \u0026#34;127.0.0.1\u0026#34;.equals(ip); } /** * æ£€æŸ¥æ˜¯å¦ä¸ºå†…éƒ¨IPåœ°å€ * * @param addr byteåœ°å€ * @return ç»“æœ */ private static boolean internalIp(byte[] addr) { if (StringUtils.isNull(addr) || addr.length \u0026lt; 2) { return true; } final byte b0 = addr[0]; final byte b1 = addr[1]; // 10.x.x.x/8 final byte SECTION_1 = 0x0A; // 172.16.x.x/12 final byte SECTION_2 = (byte) 0xAC; final byte SECTION_3 = (byte) 0x10; final byte SECTION_4 = (byte) 0x1F; // 192.168.x.x/16 final byte SECTION_5 = (byte) 0xC0; final byte SECTION_6 = (byte) 0xA8; switch (b0) { case SECTION_1: return true; case SECTION_2: if (b1 \u0026gt;= SECTION_3 \u0026amp;\u0026amp; b1 \u0026lt;= SECTION_4) { return true; } case SECTION_5: switch (b1) { case SECTION_6: return true; } default: return false; } } /** * å°†IPv4åœ°å€è½¬æ¢æˆå­—èŠ‚ * * @param text IPv4åœ°å€ * @return byte å­—èŠ‚ */ public static byte[] textToNumericFormatV4(String text) { if (text.length() == 0) { return null; } byte[] bytes = new byte[4]; String[] elements = text.split(\u0026#34;\\\\.\u0026#34;, -1); try { long l; int i; switch (elements.length) { case 1: l = Long.parseLong(elements[0]); if ((l \u0026lt; 0L) || (l \u0026gt; 4294967295L)) { return null; } bytes[0] = (byte) (int) (l \u0026gt;\u0026gt; 24 \u0026amp; 0xFF); bytes[1] = (byte) (int) ((l \u0026amp; 0xFFFFFF) \u0026gt;\u0026gt; 16 \u0026amp; 0xFF); bytes[2] = (byte) (int) ((l \u0026amp; 0xFFFF) \u0026gt;\u0026gt; 8 \u0026amp; 0xFF); bytes[3] = (byte) (int) (l \u0026amp; 0xFF); break; case 2: l = Integer.parseInt(elements[0]); if ((l \u0026lt; 0L) || (l \u0026gt; 255L)) { return null; } bytes[0] = (byte) (int) (l \u0026amp; 0xFF); l = Integer.parseInt(elements[1]); if ((l \u0026lt; 0L) || (l \u0026gt; 16777215L)) { return null; } bytes[1] = (byte) (int) (l \u0026gt;\u0026gt; 16 \u0026amp; 0xFF); bytes[2] = (byte) (int) ((l \u0026amp; 0xFFFF) \u0026gt;\u0026gt; 8 \u0026amp; 0xFF); bytes[3] = (byte) (int) (l \u0026amp; 0xFF); break; case 3: for (i = 0; i \u0026lt; 2; ++i) { l = Integer.parseInt(elements[i]); if ((l \u0026lt; 0L) || (l \u0026gt; 255L)) { return null; } bytes[i] = (byte) (int) (l \u0026amp; 0xFF); } l = Integer.parseInt(elements[2]); if ((l \u0026lt; 0L) || (l \u0026gt; 65535L)) { return null; } bytes[2] = (byte) (int) (l \u0026gt;\u0026gt; 8 \u0026amp; 0xFF); bytes[3] = (byte) (int) (l \u0026amp; 0xFF); break; case 4: for (i = 0; i \u0026lt; 4; ++i) { l = Integer.parseInt(elements[i]); if ((l \u0026lt; 0L) || (l \u0026gt; 255L)) { return null; } bytes[i] = (byte) (int) (l \u0026amp; 0xFF); } break; default: return null; } } catch (NumberFormatException e) { return null; } return bytes; } /** * è·å–IPåœ°å€ * * @return æœ¬åœ°IPåœ°å€ */ public static String getHostIp() { try { return InetAddress.getLocalHost().getHostAddress(); } catch (UnknownHostException e) { } return \u0026#34;127.0.0.1\u0026#34;; } /** * è·å–ä¸»æœºå * * @return æœ¬åœ°ä¸»æœºå */ public static String getHostName() { try { return InetAddress.getLocalHost().getHostName(); } catch (UnknownHostException e) { } return \u0026#34;æœªçŸ¥\u0026#34;; } /** * ä»å¤šçº§åå‘ä»£ç†ä¸­è·å¾—ç¬¬ä¸€ä¸ªéunknown IPåœ°å€ * * @param ip è·å¾—çš„IPåœ°å€ * @return ç¬¬ä¸€ä¸ªéunknown IPåœ°å€ */ public static String getMultistageReverseProxyIp(String ip) { // å¤šçº§åå‘ä»£ç†æ£€æµ‹ if (ip != null \u0026amp;\u0026amp; ip.indexOf(\u0026#34;,\u0026#34;) \u0026gt; 0) { final String[] ips = ip.trim().split(\u0026#34;,\u0026#34;); for (String subIp : ips) { if (false == isUnknown(subIp)) { ip = subIp; break; } } } return ip; } /** * æ£€æµ‹ç»™å®šå­—ç¬¦ä¸²æ˜¯å¦ä¸ºæœªçŸ¥ï¼Œå¤šç”¨äºæ£€æµ‹HTTPè¯·æ±‚ç›¸å…³ * * @param checkString è¢«æ£€æµ‹çš„å­—ç¬¦ä¸² * @return æ˜¯å¦æœªçŸ¥ */ public static boolean isUnknown(String checkString) { return StringUtils.isBlank(checkString) || \u0026#34;unknown\u0026#34;.equalsIgnoreCase(checkString); } } æ–‡ä»¶æµä¸Šä¼  1 2 3 4 5 6 7 8 9 10 11 12 13 14 long begin=System.currentTimeMillis(); InputStream fis=multipartFile.getInputStream(); dest = new File(newFileName); FileOutputStream fos=new FileOutputStream(dest); //å…ˆå®šä¹‰ä¸€ä¸ªå­—èŠ‚ç¼“å†²åŒºï¼Œå‡å°‘I/Oæ¬¡æ•°ï¼Œæé«˜è¯»å†™æ•ˆç‡ byte[] buffer=new byte[10240]; int size=0; while((size=fis.read(buffer))!=-1){ fos.write(buffer, 0, size); } fis.close(); fos.close(); long end=System.currentTimeMillis(); log.info(\u0026#34;ä½¿ç”¨æ–‡ä»¶è¾“å…¥æµå’Œæ–‡ä»¶è¾“å‡ºæµå®ç°æ–‡ä»¶çš„å¤åˆ¶å®Œæ¯•ï¼è€—æ—¶ï¼š{} æ¯«ç§’\u0026#34;,(end-begin)); COSæ–‡ä»¶ä¸Šä¼  ","permalink":"https://zpc2222.github.io/posts/tech/java/java-common-utils/","summary":"IPæŸ¥è¯¢çš„ä¸€äº›æ–¹æ³• IP_URL = \u0026ldquo;http://whois.pconline.com.cn/ipJson.jsp?ip=%s\u0026amp;json=true\u0026quot; 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58","title":"Javaå¸¸ç”¨å·¥å…·ç±»"},{"content":"JVMåˆ†æ å‚æ•° 1 2 3 4 5 6 7 8 9 10 11 -Xmsã€-Xmn å †å†…å­˜åˆ†é…ï¼š JVMåˆå§‹åˆ†é…çš„å†…å­˜ç”±-XmsæŒ‡å®šï¼Œé»˜è®¤æ˜¯ç‰©ç†å†…å­˜çš„1/64 JVMæœ€å¤§åˆ†é…çš„å†…å­˜ç”±-XmxæŒ‡å®šï¼Œé»˜è®¤æ˜¯ç‰©ç†å†…å­˜çš„1/4 é»˜è®¤ç©ºä½™å †å†…å­˜å°äº40%æ—¶ï¼ŒJVMå°±ä¼šå¢å¤§å †ç›´åˆ°-Xmxçš„æœ€å¤§é™åˆ¶ï¼›ç©ºä½™å †å†…å­˜å¤§äº70%æ—¶ï¼ŒJVMä¼šå‡å°‘å †ç›´åˆ° -Xmsçš„æœ€å°é™åˆ¶ã€‚ å› æ­¤æœåŠ¡å™¨ä¸€èˆ¬è®¾ç½®-Xmsã€-Xmxç›¸ç­‰ä»¥é¿å…åœ¨æ¯æ¬¡GC åè°ƒæ•´å †çš„å¤§å°ã€‚å¯¹è±¡çš„å †å†…å­˜ç”±ç§°ä¸ºåƒåœ¾å›æ”¶å™¨çš„è‡ªåŠ¨å†…å­˜ç®¡ç†ç³»ç»Ÿå›æ”¶ã€‚ éå †å†…å­˜åˆ†é…ï¼š JVMä½¿ç”¨-XX:PermSizeè®¾ç½®éå †å†…å­˜åˆå§‹å€¼ï¼Œé»˜è®¤æ˜¯ç‰©ç†å†…å­˜çš„1/64ï¼› ç”±XX:MaxPermSizeè®¾ç½®æœ€å¤§éå †å†…å­˜çš„å¤§å°ï¼Œé»˜è®¤æ˜¯ç‰©ç†å†…å­˜çš„1/4ã€‚ -Xmn2Gï¼šè®¾ç½®å¹´è½»ä»£å¤§å°ä¸º2Gã€‚ -XX:SurvivorRatioï¼Œè®¾ç½®å¹´è½»ä»£ä¸­EdenåŒºä¸SurvivoråŒºçš„æ¯”å€¼ã€‚ å‘½ä»¤ jinfoï¼ˆæŸ¥çœ‹/ä¿®æ”¹è™šæ‹Ÿæœºå‚æ•°ï¼‰\njmapå‘½ä»¤æ˜¯ä¸€ä¸ªå¯ä»¥è¾“å‡ºæ‰€æœ‰å†…å­˜ä¸­å¯¹è±¡çš„å·¥å…·ï¼Œç”šè‡³å¯ä»¥å°†VM ä¸­çš„heapï¼Œä»¥äºŒè¿›åˆ¶è¾“å‡ºæˆæ–‡æœ¬ã€‚ æ‰“å°å‡ºæŸä¸ªjavaè¿›ç¨‹ï¼ˆä½¿ç”¨pidï¼‰å†…å­˜å†…çš„ï¼Œæ‰€æœ‰â€˜å¯¹è±¡â€™çš„æƒ…å†µï¼ˆå¦‚ï¼šäº§ç”Ÿé‚£äº›å¯¹è±¡ï¼ŒåŠå…¶æ•°é‡ï¼‰ã€‚ jmap -J-d64 -heap 12105 jmap -heap 19570 -heapÂ æ‰“å°heapçš„æ¦‚è¦ä¿¡æ¯ï¼ŒGCä½¿ç”¨çš„ç®—æ³•ï¼Œheapï¼ˆå †ï¼‰çš„é…ç½®åŠJVMå †å†…å­˜çš„ä½¿ç”¨æƒ…å†µ. jmap -histo 24107 æ‰“å°æ¯ä¸ªclassçš„å®ä¾‹æ•°ç›®,å†…å­˜å ç”¨,ç±»å…¨åä¿¡æ¯. VMçš„å†…éƒ¨ç±»åå­—å¼€å¤´ä¼šåŠ ä¸Šå‰ç¼€ * å¦‚æœliveå­å‚æ•°åŠ ä¸Šå,åªç»Ÿè®¡æ´»çš„å¯¹è±¡æ•°é‡ã€‚ jmap -histo pid\u0026gt;a.log æ—¥å¿—å°†å…¶ä¿å­˜ï¼Œåœ¨ä¸€æ®µæ—¶é—´åï¼Œä½¿ç”¨æ–‡æœ¬å¯¹æ¯”å·¥å…·ï¼Œå¯ä»¥å¯¹æ¯”å‡ºGCå›æ”¶äº†å“ªäº›å¯¹è±¡ã€‚\n1 2 using parallel threads in the new generation. ##æ–°ç”Ÿä»£é‡‡ç”¨çš„æ˜¯å¹¶è¡Œçº¿ç¨‹å¤„ç†æ–¹å¼ åƒåœ¾å›æ”¶ç»Ÿè®¡ï¼šjstat -gc è¿›ç¨‹id S0Cï¼šç¬¬ä¸€ä¸ªå¹¸å­˜åŒºçš„å¤§å° S1Cï¼šç¬¬äºŒä¸ªå¹¸å­˜åŒºçš„å¤§å° S0Uï¼šç¬¬ä¸€ä¸ªå¹¸å­˜åŒºçš„ä½¿ç”¨å¤§å° S1Uï¼šç¬¬äºŒä¸ªå¹¸å­˜åŒºçš„ä½¿ç”¨å¤§å° ECï¼šä¼Šç”¸å›­åŒºçš„å¤§å° EUï¼šä¼Šç”¸å›­åŒºçš„ä½¿ç”¨å¤§å° OCï¼šè€å¹´ä»£å¤§å° OUï¼šè€å¹´ä»£ä½¿ç”¨å¤§å° MCï¼šæ–¹æ³•åŒºå¤§å° MUï¼šæ–¹æ³•åŒºä½¿ç”¨å¤§å° CCSC:å‹ç¼©ç±»ç©ºé—´å¤§å° CCSU:å‹ç¼©ç±»ç©ºé—´ä½¿ç”¨å¤§å° YGCï¼šå¹´è½»ä»£åƒåœ¾å›æ”¶æ¬¡æ•° YGCTï¼šå¹´è½»ä»£åƒåœ¾å›æ”¶æ¶ˆè€—æ—¶é—´ FGCï¼šè€å¹´ä»£åƒåœ¾å›æ”¶æ¬¡æ•° FGCTï¼šè€å¹´ä»£åƒåœ¾å›æ”¶æ¶ˆè€—æ—¶é—´ GCTï¼šåƒåœ¾å›æ”¶æ¶ˆè€—æ€»æ—¶é—´\nå †å†…å­˜ç»Ÿè®¡ï¼šjstat -gccapacity è¿›ç¨‹id NGCMNï¼šæ–°ç”Ÿä»£æœ€å°å®¹é‡ NGCMXï¼šæ–°ç”Ÿä»£æœ€å¤§å®¹é‡ NGCï¼šå½“å‰æ–°ç”Ÿä»£å®¹é‡ S0Cï¼šç¬¬ä¸€ä¸ªå¹¸å­˜åŒºå¤§å° S1Cï¼šç¬¬äºŒä¸ªå¹¸å­˜åŒºçš„å¤§å° ECï¼šä¼Šç”¸å›­åŒºçš„å¤§å° OGCMNï¼šè€å¹´ä»£æœ€å°å®¹é‡ OGCMXï¼šè€å¹´ä»£æœ€å¤§å®¹é‡ OGCï¼šå½“å‰è€å¹´ä»£å¤§å° OC:å½“å‰è€å¹´ä»£å¤§å° MCMN:æœ€å°å…ƒæ•°æ®å®¹é‡ MCMXï¼šæœ€å¤§å…ƒæ•°æ®å®¹é‡ MCï¼šå½“å‰å…ƒæ•°æ®ç©ºé—´å¤§å° CCSMNï¼šæœ€å°å‹ç¼©ç±»ç©ºé—´å¤§å° CCSMXï¼šæœ€å¤§å‹ç¼©ç±»ç©ºé—´å¤§å° CCSCï¼šå½“å‰å‹ç¼©ç±»ç©ºé—´å¤§å° YGCï¼šå¹´è½»ä»£gcæ¬¡æ•° FGCï¼šè€å¹´ä»£GCæ¬¡æ•°\n","permalink":"https://zpc2222.github.io/posts/tech/java/jvm-analysis/","summary":"JVMåˆ†æ å‚æ•° 1 2 3 4 5 6 7 8 9 10 11 -Xmsã€-Xmn å †å†…å­˜åˆ†é…ï¼š JVMåˆå§‹åˆ†é…çš„å†…å­˜ç”±-XmsæŒ‡å®šï¼Œé»˜è®¤æ˜¯ç‰©ç†å†…å­˜çš„1/64 JVMæœ€å¤§åˆ†é…","title":"JVMåˆ†æ"},{"content":"Linuxå‘½ä»¤ 1 2 3 4 5 6 7 8 9 10 11 å®ˆæŠ¤è¿›ç¨‹é‡å¯ sudo systemctl daemon-reload é‡å¯dockeræœåŠ¡ sudo systemctl restart docker å…³é—­ dockersudo systemctl stop docker service æ–¹å¼ é‡å¯dockeræœåŠ¡ sudo service docker restart å…³é—­ dockersudo service docker stop æ·»åŠ ç”¨æˆ·\tuseradd -d /home/zpc -m zpc æŸ¥çœ‹ç«¯å£æ˜¯å¦å¼€æ”¾\t/sbin/iptables -L -n å¼€ç«¯å£\tfirewall-cmd --zone=public --add-port=81/tcp --permanent é‡å¯é˜²ç«å¢™\tsystemctl restart firewalld.service æŸ¥çœ‹ç«¯å£\tfirewall-cmd --list-ports javaå¯åŠ¨ çº¯Javaå¯åŠ¨ 1 2 java -Xms1024m -Xmx1024m -Xmn512m -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=*:7665 -jar test.jar \u0026amp; java -jar-Dnet.java.games.input.librarypath=/home/test -Xdebug-Xrunjdwp:transport=dt_socket,suspend=n,server=y,address=*:7665/home/test/*.jar \u0026amp; è‡ªåŠ¨é‡å¯Javaè¿›ç¨‹ 1 2 3 4 5 6 7 8 9 10 11 12 13 #!/bin/sh #æ ¹æ®ç«¯å£å·æŸ¥è¯¢å¯¹åº”çš„pid #pid=$(netstat -nlp | grep :$port | awk \u0026#39;{print $7}\u0026#39; | awk -F\u0026#34;/\u0026#34; \u0026#39;{ print $1 }\u0026#39;); pid=$(ps -ef | grep \u0026#39;[j]ava -jar -Dnet.java.games.input.librarypath=/home/iom/nc-cloud\u0026#39; | awk \u0026#39;{print $2}\u0026#39;); #æ€æ‰å¯¹åº”çš„è¿›ç¨‹ï¼Œå¦‚æœpidä¸å­˜åœ¨ï¼Œåˆ™ä¸æ‰§è¡Œ if [ -n \u0026#34;$pid\u0026#34; ]; then kill $pid; sleep 2 fi java -jar -Dnet.java.games.input.librarypath=/home/iom/nc-cloud -Xdebug -Xrunjdwp:transport=dt_socket,suspend=n,server=y,address=*:7666 /home/iom/nc-cloud/*.jar --spring.profiles.active=dev \u0026amp; Jenkinsè‡ªåŠ¨éƒ¨ç½² 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 #/bin/bash #å‰æï¼šå‹ç¼©åŒ…æ ¼å¼ä¸ºappname-bin.tar.gz è§£å‹å‡ºæ¥çš„æ–‡ä»¶å¤¹ä¸ºappname ä¾‹å¦‚ app-dev-bin.tar.gz app-dev #ä¸‹é¢appnameé…ç½®è¦æ“ä½œçš„åº”ç”¨åï¼Œä¾‹app-dev appname=app-dev echo starting kill $appname...... #grep -w å®Œå…¨åŒ¹é…å…³é”®å­—ï¼Œæ‰“å°å¯¹åº”è¿›ç¨‹å pid=`ps -ef|grep -w $appname|grep java|awk \u0026#39;{printf $2}\u0026#39;` echo \u0026#34;$appname pid is : $pid\u0026#34; #åˆ¤æ–­è¿›ç¨‹æ˜¯å¦å­˜åœ¨ï¼Œå­˜åœ¨åˆ™killã€åˆ é™¤åŸç¨‹åºç›®å½•ã€è§£å‹å‹ç¼©åŒ…ã€å¯åŠ¨ç¨‹åº if [ -z $pid ]; then echo \u0026#34;$appname is not running!\u0026#34; echo \u0026#34;start rm /home/$appname\u0026#34; rm -rf /home/$appname echo \u0026#34;tar -zxf $appname-bin.tar.gz\u0026#34; #è§£å‹åˆ°æŒ‡å®šç›®å½• tar -zxf /home/$appname-bin.tar.gz -C /home echo \u0026#34;starting $appname....\u0026#34; #nohupå¯åŠ¨åº”ç”¨ï¼Œæ—¥å¿—è¾“å‡ºåˆ°å¯¹åº”ç›®å½• nohup java -jar /home/$appname/$appname.jar \u0026gt;/home/log/$appname.log 2\u0026gt;\u0026amp;1 \u0026amp; echo \u0026#34;start $appname success!\u0026#34; else echo \u0026#34;start kill $pid \u0026#34; kill -9 $pid echo \u0026#34;end kill $pid \u0026#34; echo \u0026#34;start check $appname ...... \u0026#34; #ç¡çœ 3ç§’é˜²æ­¢è¿›ç¨‹killå»¶è¿Ÿ sleep 3 #æ£€æŸ¥æ˜¯å¦æ€æ­»è¿›ç¨‹ï¼Œæ€æ­»åˆ™é‡æ–°éƒ¨ç½²åº”ç”¨ï¼Œå¤±è´¥é€€å‡º check=`ps -ef|grep -w $pid|grep java|awk \u0026#39;{printf $2}\u0026#39;` if [ -z $check ]; then echo \u0026#34;$appname:$pid is killed success!\u0026#34; echo \u0026#34;start rm /home/$appname\u0026#34; rm -rf /home/$appname echo \u0026#34;tar -zxf $appname-bin.tar.gz\u0026#34; tar -zxf /home/$appname-bin.tar.gz -C /home echo \u0026#34;starting $appname....\u0026#34; nohup java -jar /home/$appname/$appname.jar \u0026gt;/home/log/$appname.log 2\u0026gt;\u0026amp;1 \u0026amp; echo \u0026#34;start $appname success!\u0026#34; else echo \u0026#34;$appname stop failed !!!!\u0026#34; fi fi å®‰è£…jdk17 1 2 3 4 5 6 7 8 9 10 11 wget https://download.oracle.com/java/17/latest/jdk-17_linux-x64_bin.tar.gz å®‰è£…jdk17 /usr/lib/jvm/java-17-openjdk-amd64/ tar -zxvf jdk-17_linux-x64_bin.tar.gz sudo mv jdk-17.0.1 /usr/local/ sudo vim /etc/profile export JAVA_HOME=/usr/local/jdk-17.0.1 export CLASSPATH=.:JAVA_HOME/lib export PATH=.:JAVA_HOME/bin:$PATH source /etc/profile è¿ç»´ä½¿ç”¨è„šæœ¬ æ ¹æ® PID æ˜¾ç¤ºè¿›ç¨‹æ‰€æœ‰ä¿¡æ¯** 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 #! /bin/bash read -p \u0026#34;è¯·è¾“å…¥è¦æŸ¥è¯¢çš„PID: \u0026#34; P n=`ps -aux| awk \u0026#39;$2~/^\u0026#39;${P}\u0026#39;$/{print $0}\u0026#39;|wc -l` if [ $n -eq 0 ];then echo \u0026#34;è¯¥PIDä¸å­˜åœ¨ï¼ï¼\u0026#34; exit fi echo -e \u0026#34;\\e[32m--------------------------------\\e[0m\u0026#34; echo \u0026#34;è¿›ç¨‹PID: ${P}\u0026#34; echo \u0026#34;è¿›ç¨‹å‘½ä»¤ï¼š$(ps -aux| awk \u0026#39;$2~/^\u0026#39;$P\u0026#39;$/{for (i=11;i\u0026lt;=NF;i++) printf(\u0026#34;%s \u0026#34;,$i)}\u0026#39;)\u0026#34; echo \u0026#34;è¿›ç¨‹æ‰€å±ç”¨æˆ·: $(ps -aux| awk \u0026#39;$2~/^\u0026#39;$P\u0026#39;$/{print $1}\u0026#39;)\u0026#34; echo \u0026#34;CPUå ç”¨ç‡ï¼š$(ps -aux| awk \u0026#39;$2~/^\u0026#39;$P\u0026#39;$/{print $3}\u0026#39;)%\u0026#34; echo \u0026#34;å†…å­˜å ç”¨ç‡ï¼š$(ps -aux| awk \u0026#39;$2~/^\u0026#39;$P\u0026#39;$/{print $4}\u0026#39;)%\u0026#34; echo \u0026#34;è¿›ç¨‹å¼€å§‹è¿è¡Œçš„æ—¶é—´ï¼š$(ps -aux| awk \u0026#39;$2~/^\u0026#39;$P\u0026#39;$/{print $9}\u0026#39;)\u0026#34; echo \u0026#34;è¿›ç¨‹è¿è¡Œçš„æ—¶é—´ï¼š$(ps -aux| awk \u0026#39;$2~/^\u0026#39;$P\u0026#39;$/{print $10}\u0026#39;)\u0026#34; echo \u0026#34;è¿›ç¨‹çŠ¶æ€ï¼š$(ps -aux| awk \u0026#39;$2~/^\u0026#39;$P\u0026#39;$/{print $8}\u0026#39;)\u0026#34; echo \u0026#34;è¿›ç¨‹è™šæ‹Ÿå†…å­˜ï¼š$(ps -aux| awk \u0026#39;$2~/^\u0026#39;$P\u0026#39;$/{print $5}\u0026#39;)\u0026#34; echo \u0026#34;è¿›ç¨‹å…±äº«å†…å­˜ï¼š$(ps -aux| awk \u0026#39;$2~/^\u0026#39;$P\u0026#39;$/{print $6}\u0026#39;)\u0026#34; echo -e \u0026#34;\\e[32m--------------------------------\\e[0m\u0026#34; æ ¹æ®è¿›ç¨‹åæ˜¾ç¤ºè¯¥è¿›ç¨‹æ‰€æœ‰ä¿¡æ¯ æ ¹æ®è¾“å…¥çš„ç¨‹åºçš„åå­—æ¨¡ç³Šè¿‡æ»¤å‡ºæ‰€å¯¹åº”çš„ PIDï¼Œå¹¶æ˜¾ç¤ºå‡ºè¯¦ç»†ä¿¡æ¯ï¼Œå¦‚æœæœ‰å¤šä¸ªPIDï¼Œåˆ™å…¨éƒ¨æ˜¾ç¤º\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 #! /bin/bash read -p \u0026#34;è¯·è¾“å…¥è¦æŸ¥è¯¢çš„è¿›ç¨‹åï¼š\u0026#34; NAME N=`ps -aux | grep $NAME | grep -v grep | wc -l` ##ç»Ÿè®¡è¿›ç¨‹æ€»æ•° if [ $N -le 0 ];then echo \u0026#34;è¯¥è¿›ç¨‹åæ²¡æœ‰è¿è¡Œï¼\u0026#34; fi i=1 while [ $N -gt 0 ] do echo -e \u0026#34;\\e[32m***************************************************************\\e[0m\u0026#34; echo \u0026#34;è¿›ç¨‹PID: $(ps -aux | grep $NAME | grep -v grep | awk \u0026#39;NR==\u0026#39;$i\u0026#39;{print $0}\u0026#39;| awk \u0026#39;{print $2}\u0026#39;)\u0026#34; echo \u0026#34;è¿›ç¨‹å‘½ä»¤ï¼š$(ps -aux | grep $NAME | grep -v grep | awk \u0026#39;NR==\u0026#39;$i\u0026#39;{print $0}\u0026#39;| awk \u0026#39;{for (j=11;j\u0026lt;=NF;j++) printf(\u0026#34;%s \u0026#34;,$j)}\u0026#39;)\u0026#34; echo \u0026#34;è¿›ç¨‹æ‰€å±ç”¨æˆ·: $(ps -aux | grep $NAME | grep -v grep | awk \u0026#39;NR==\u0026#39;$i\u0026#39;{print $0}\u0026#39;| awk \u0026#39;{print $1}\u0026#39;)\u0026#34; echo \u0026#34;CPUå ç”¨ç‡ï¼š$(ps -aux | grep $NAME | grep -v grep | awk \u0026#39;NR==\u0026#39;$i\u0026#39;{print $0}\u0026#39;| awk \u0026#39;{print $3}\u0026#39;)%\u0026#34; echo \u0026#34;å†…å­˜å ç”¨ç‡ï¼š$(ps -aux | grep $NAME | grep -v grep | awk \u0026#39;NR==\u0026#39;$i\u0026#39;{print $0}\u0026#39;| awk \u0026#39;{print $4}\u0026#39;)%\u0026#34; echo \u0026#34;è¿›ç¨‹å¼€å§‹è¿è¡Œçš„æ—¶é—´ï¼š$(ps -aux | grep $NAME | grep -v grep | awk \u0026#39;NR==\u0026#39;$i\u0026#39;{print $0}\u0026#39;| awk \u0026#39;{print $9}\u0026#39;)\u0026#34; echo \u0026#34;è¿›ç¨‹è¿è¡Œçš„æ—¶é—´ï¼š$(ps -aux | grep $NAME | grep -v grep | awk \u0026#39;NR==\u0026#39;$i\u0026#39;{print $0}\u0026#39;| awk \u0026#39;{print $10}\u0026#39;)\u0026#34; echo \u0026#34;è¿›ç¨‹çŠ¶æ€ï¼š$(ps -aux | grep $NAME | grep -v grep | awk \u0026#39;NR==\u0026#39;$i\u0026#39;{print $0}\u0026#39;| awk \u0026#39;{print $8}\u0026#39;)\u0026#34; echo \u0026#34;è¿›ç¨‹è™šæ‹Ÿå†…å­˜ï¼š$(ps -aux | grep $NAME | grep -v grep | awk \u0026#39;NR==\u0026#39;$i\u0026#39;{print $0}\u0026#39;| awk \u0026#39;{print $5}\u0026#39;)\u0026#34; echo \u0026#34;è¿›ç¨‹å…±äº«å†…å­˜ï¼š$(ps -aux | grep $NAME | grep -v grep | awk \u0026#39;NR==\u0026#39;$i\u0026#39;{print $0}\u0026#39;| awk \u0026#39;{print $6}\u0026#39;)\u0026#34; echo -e \u0026#34;\\e[32m***************************************************************\\e[0m\u0026#34; let N-- i++ do``` ### æ ¹æ®ç”¨æˆ·åæŸ¥çœ‹è¯¥ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯ ``` shell #! /bin/bash read -p \u0026#34;è¯·è¾“å…¥è¦æŸ¥è¯¢çš„ç”¨æˆ·åï¼š\u0026#34; name echo \u0026#34;------------------------------\u0026#34; n=`cat /etc/passwd | awk -F: \u0026#39;$1~/^\u0026#39;${name}\u0026#39;$/{print}\u0026#39; | wc -l` if [ $n -eq 0 ];then echo -e \u0026#34;\\e[31mè¯¥ç”¨æˆ·ä¸å­˜åœ¨ï¼\\e[0m\u0026#34; echo \u0026#34;------------------------------\u0026#34; else echo \u0026#34;è¯¥ç”¨æˆ·çš„ç”¨æˆ·åï¼š${name}\u0026#34; echo \u0026#34;è¯¥ç”¨æˆ·çš„UIDï¼š$(cat /etc/passwd | awk -F: \u0026#39;$1~/^\u0026#39;${name}\u0026#39;$/{print}\u0026#39;|awk -F: \u0026#39;{print $3}\u0026#39;)\u0026#34; echo \u0026#34;è¯¥ç”¨æˆ·çš„ç»„ä¸ºï¼š$(id ${name} | awk {\u0026#39;print $3\u0026#39;})\u0026#34; echo \u0026#34;è¯¥ç”¨æˆ·çš„GIDä¸ºï¼š$(cat /etc/passwd | awk -F: \u0026#39;$1~/^\u0026#39;${name}\u0026#39;$/{print}\u0026#39;|awk -F: \u0026#39;{print $4}\u0026#39;)\u0026#34; echo \u0026#34;è¯¥ç”¨æˆ·çš„å®¶ç›®å½•ä¸ºï¼š$(cat /etc/passwd | awk -F: \u0026#39;$1~/^\u0026#39;${name}\u0026#39;$/{print}\u0026#39;|awk -F: \u0026#39;{print $6}\u0026#39;)\u0026#34; Login=$(cat /etc/passwd | awk -F: \u0026#39;$1~/^\u0026#39;${name}\u0026#39;$/{print}\u0026#39;|awk -F: \u0026#39;{print $7}\u0026#39;) if [ ${Login} == \u0026#34;/bin/bash\u0026#34; ];then echo -e \u0026#34;\\e[32mè¯¥ç”¨æˆ·æœ‰ç™»å½•ç³»ç»Ÿçš„æƒé™\\e[0m\u0026#34; echo \u0026#34;------------------------------\u0026#34; elif [ ${Login} == \u0026#34;/sbin/nologin\u0026#34; ];then echo -e \u0026#34;\\e[31mè¯¥ç”¨æˆ·æ²¡æœ‰ç™»å½•ç³»ç»Ÿçš„æƒé™ï¼\\e[0m\u0026#34; echo \u0026#34;------------------------------\u0026#34; fi fi ","permalink":"https://zpc2222.github.io/posts/tech/linuxshell/","summary":"Linuxå‘½ä»¤ 1 2 3 4 5 6 7 8 9 10 11 å®ˆæŠ¤è¿›ç¨‹é‡å¯ sudo systemctl daemon-reload é‡å¯dockeræœåŠ¡ sudo systemctl restart docker å…³é—­ dockersudo systemctl stop docker service æ–¹å¼ é‡å¯dockeræœåŠ¡ sudo service docker restart å…³é—­ dockersudo service docker stop","title":"LinuxåŠShellä½¿ç”¨"},{"content":"å°†æœ¬åœ°çš„jarä¸Šä¼ è‡³ç§æœï¼š\n1 mvn deploy:deploy-file --settings=D:\\java\\apache-maven-3.8.6\\conf\\settings.xml -DgroupId=cmbc.sdk -DartifactId=SADK-CMBC -Dversion=3.1.0.8-SNAPSHOT -Dpackaging=jar -Dfile=D:\\javaDemo\\lib\\SADK-CMBC-3.1.0.8.jar -DrepositoryId=releases -Durl=http://192.168.1.1:8081/repository/maven-snapshots æ¨é€åˆ°ä»“åº“ mvn deploy:deploy-file -Dfile=xxx-web\\target\\radp-web-1.0.jar -DgroupId=com.richisland.radp -DartifactId=radp-web -Dversion=1.0 -Dpackaging=jar -DrepositoryId=fd-release â€“Durl=http://xxx.com/repository/release/\næ¨é€zipåŒ…\nmvn deploy:deploy-file -Dfile=package.zip -DgroupId=xxx -DartifactId=package -Dversion=1.1 -Dpackaging=zip -DrepositoryId=fd-release â€“Durl=http://xxx.com/repository/release/\næµæ°´çº¿æ¨é€\nmvn deploy:deploy-file -Dfile=E:\\package.tar.gz -DgroupId=xxx -DartifactId=pipelining -Dversion=1.1 -Dpackaging=gz -DrepositoryId=fd-release â€“Durl=http://xxx.com/repository/release/\n","permalink":"https://zpc2222.github.io/posts/tech/maven/","summary":"å°†æœ¬åœ°çš„jarä¸Šä¼ è‡³ç§æœï¼š 1 mvn deploy:deploy-file --settings=D:\\java\\apache-maven-3.8.6\\conf\\settings.xml -DgroupId=cmbc.sdk -DartifactId=SADK-CMBC -Dversion=3.1.0.8-SNAPSHOT -Dpackaging=jar -Dfile=D:\\javaDemo\\lib\\SADK-CMBC-3.1.0.8.jar -DrepositoryId=releases -Durl=http://192.168.1.1:8081/repository/maven-snapshots æ¨é€åˆ°ä»“åº“ mvn deploy:deploy-file -Dfile=xxx-web\\target\\radp-web-1.0.jar -DgroupId=com.richisland.radp -DartifactId=radp-web -Dversion=1.0 -Dpackaging=jar -DrepositoryId=fd-release â€“Durl=http://xxx.com/repository/r","title":"Mavenä½¿ç”¨"},{"content":"æ¦‚å¿µ ç»„ä»¶ å æ¦‚å¿µ IO æµ å„ç§å„æ ·çš„æµï¼ˆæ–‡ä»¶ã€æ•°ç»„ã€ç¼“å†²ã€ç®¡é“ã€‚ã€‚ã€‚ï¼‰çš„å¤„ç†ï¼ˆè¾“å…¥è¾“å‡ºï¼‰ Channel é€šé“ ä»£è¡¨ä¸€ä¸ªè¿æ¥ï¼Œæ¯ä¸ªClientè¯·å¯¹ä¼šå¯¹åº”åˆ°å…·ä½“çš„ä¸€ä¸ªChannel ChannelPipeline è´£ä»»é“¾ æ¯ä¸ªChanneléƒ½æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªChannelPipelineä¸ä¹‹å¯¹åº”ï¼Œé‡Œé¢æ˜¯å„ç§å„æ ·çš„Handler handler äº‹ä»¶ ç”¨äºå¤„ç†å‡ºå…¥ç«™æ¶ˆæ¯åŠç›¸åº”çš„äº‹ä»¶ï¼Œå®ç°æˆ‘ä»¬è‡ªå·±è¦çš„ä¸šåŠ¡é€»è¾‘ EventLoopGroup I/Oçº¿ç¨‹æ±  è´Ÿè´£å¤„ç†Channelå¯¹åº”çš„I/Oäº‹ä»¶ ChannelInitializer Channelåˆå§‹åŒ–å™¨ ChannelFuture æ‰§è¡Œç»“æœ ä»£è¡¨I/Oæ“ä½œçš„æ‰§è¡Œç»“æœï¼Œé€šè¿‡äº‹ä»¶æœºåˆ¶ï¼Œè·å–æ‰§è¡Œç»“æœï¼Œé€šè¿‡æ·»åŠ ç›‘å¬å™¨ï¼Œæ‰§è¡Œæˆ‘ä»¬æƒ³è¦çš„æ“ä½œ ByteBuf å­—èŠ‚åºåˆ— é€šè¿‡ByteBufæ“ä½œåŸºç¡€çš„å­—èŠ‚æ•°ç»„å’Œç¼“å†²åŒº ServerBootstrap æœåŠ¡å™¨ç«¯å¯åŠ¨è¾…åŠ©å¯¹è±¡ Bootstrap å®¢æˆ·ç«¯å¯åŠ¨è¾…åŠ©å¯¹è±¡ æµç¨‹å›¾ å®¢æˆ·ç«¯ä»£ç ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 import io.netty.buffer.ByteBuf; import io.netty.channel.ChannelHandler; import io.netty.channel.ChannelHandlerContext; import io.netty.channel.SimpleChannelInboundHandler; import io.netty.util.CharsetUtil; @ChannelHandler.Sharable //è¿™ä¸ªæ³¨è§£æ˜¯ä¸ºäº†çº¿ç¨‹å®‰å…¨ï¼Œå¦‚æœä½ ä¸åœ¨ä¹æ˜¯å¦çº¿ç¨‹å®‰å…¨ï¼Œä¸åŠ ä¹Ÿå¯ä»¥ public class ClientHandler extends SimpleChannelInboundHandler\u0026lt;ByteBuf\u0026gt; { //è¿™é‡Œçš„ç±»å‹å¯ä»¥æ˜¯ByteBufï¼Œä¹Ÿå¯ä»¥æ˜¯Stringï¼Œè¿˜å¯ä»¥æ˜¯å¯¹è±¡ï¼Œæ ¹æ®å®é™…æƒ…å†µæ¥ //channelRead0 æ¶ˆæ¯è¯»å–æ–¹æ³•ï¼Œæ³¨æ„åç§°ä¸­æœ‰ä¸ª0 //ChannelHandlerContextï¼šé€šé“ä¸Šä¸‹æ–‡ï¼Œä»£æŒ‡Channelï¼› //ByteBufï¼šå­—èŠ‚åºåˆ—ï¼Œé€šè¿‡ByteBufæ“ä½œåŸºç¡€çš„å­—èŠ‚æ•°ç»„å’Œç¼“å†²åŒºï¼Œå› ä¸ºJDKåŸç”Ÿæ“ä½œå­—èŠ‚éº»çƒ¦ã€æ•ˆç‡ä½ï¼Œæ‰€ä»¥Nettyå¯¹å­—èŠ‚çš„æ“ä½œè¿›è¡Œäº†å°è£…ï¼Œå®ç°äº†æŒ‡æ•°çº§çš„æ€§èƒ½æå‡ï¼ŒåŒæ—¶ä½¿ç”¨æ›´åŠ ä¾¿åˆ©ï¼› @Override protected void channelRead0(ChannelHandlerContext channelHandlerContext, ByteBuf byteBuf) throws Exception { System.out.println(\u0026#34;æ¥æ”¶åˆ°çš„æ¶ˆæ¯ï¼š\u0026#34; + byteBuf.toString(CharsetUtil.UTF_8));//CharsetUtil.UTF_8ï¼šè¿™ä¸ªæ˜¯JDKåŸç”Ÿçš„æ–¹æ³•ï¼Œç”¨äºæŒ‡å®šå­—èŠ‚æ•°ç»„è½¬æ¢ä¸ºå­—ç¬¦ä¸²æ—¶çš„ç¼–ç æ ¼å¼ã€‚ } @Override public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) throws Exception { //å‡ºç°å¼‚å¸¸çš„æ—¶å€™æ‰§è¡Œçš„åŠ¨ä½œï¼ˆæ‰“å°å¹¶å…³é—­é€šé“ï¼‰ System.out.println(\u0026#34;exceptionCaught:\u0026#34; + cause.toString()); if (\u0026#34;java.io.IOException: è¿œç¨‹ä¸»æœºå¼ºè¿«å…³é—­äº†ä¸€ä¸ªç°æœ‰çš„è¿æ¥ã€‚\u0026#34;.equals(cause.toString()) || \u0026#34;java.io.IOException: Connection reset by peer\u0026#34;.equals(cause.toString())) { System.out.println(\u0026#34;ä¸æœåŠ¡ç«¯æ–­è”\u0026#34;); ctx.close().sync(); ctx.flush(); } } } å®¢æˆ·ç«¯å¯ç”¨ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 import io.netty.bootstrap.Bootstrap; import io.netty.buffer.Unpooled; import io.netty.channel.ChannelFuture; import io.netty.channel.ChannelInitializer; import io.netty.channel.EventLoopGroup; import io.netty.channel.nio.NioEventLoopGroup; import io.netty.channel.socket.SocketChannel; import io.netty.channel.socket.nio.NioSocketChannel; import io.netty.util.CharsetUtil; import java.net.InetSocketAddress; public class ClientStart { private final String host; private final int port; public ClientStart(String host, int port) { this.host = host; this.port = port; } public static void main(String[] args) throws Exception { new ClientStart(\u0026#34;192.168.20.125\u0026#34;, 8089).run(); } public void run() throws Exception { /** * @Description é…ç½®ç›¸åº”çš„å‚æ•°ï¼Œæä¾›è¿æ¥åˆ°è¿œç«¯çš„æ–¹æ³• **/ EventLoopGroup group = new NioEventLoopGroup();//I/Oçº¿ç¨‹æ±  try { Bootstrap bs = new Bootstrap();//å®¢æˆ·ç«¯è¾…åŠ©å¯åŠ¨ç±» bs.group(group).channel(NioSocketChannel.class)//å®ä¾‹åŒ–ä¸€ä¸ªChannel .remoteAddress(new InetSocketAddress(host, port)).handler(new ChannelInitializer\u0026lt;SocketChannel\u0026gt;()//é€šé“Channelçš„åˆå§‹åŒ–å·¥ä½œï¼Œå¦‚åŠ å…¥å¤šä¸ªhandlerï¼Œéƒ½åœ¨è¿™é‡Œè¿›è¡Œï¼› { @Override protected void initChannel(SocketChannel socketChannel) throws Exception { /** * è¿æ¥å»ºç«‹åï¼Œéƒ½ä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªç®¡é“pipelineï¼Œè¿™ä¸ªç®¡é“ä¹Ÿè¢«ç§°ä¸ºè´£ä»»é“¾ï¼Œä¿è¯é¡ºåºæ‰§è¡Œï¼ŒåŒæ—¶åˆå¯ä»¥çµæ´»çš„é…ç½®å„ç±»Handlerï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆç²¾å¦™çš„è®¾è®¡ï¼Œæ—¢å‡å°‘äº†çº¿ç¨‹åˆ‡æ¢å¸¦æ¥çš„èµ„æºå¼€é”€ã€é¿å…å¥½å¤šéº»çƒ¦äº‹ï¼ŒåŒæ—¶æ€§èƒ½åˆå¾—åˆ°äº†æå¤§å¢å¼ºã€‚ */ socketChannel.pipeline().addLast(new ClientHandler());//æ·»åŠ æˆ‘ä»¬è‡ªå®šä¹‰çš„Handler } }); //è¿æ¥åˆ°è¿œç¨‹èŠ‚ç‚¹ï¼›ç­‰å¾…è¿æ¥å®Œæˆ ChannelFuture future = bs.connect().sync();//è¿™é‡Œçš„sync()è¡¨ç¤ºé‡‡ç”¨çš„åŒæ­¥æ–¹æ³•ï¼Œè¿™æ ·è¿æ¥å»ºç«‹æˆåŠŸåï¼Œæ‰ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼› //å‘é€æ¶ˆæ¯åˆ°æœåŠ¡å™¨ç«¯ï¼Œç¼–ç æ ¼å¼æ˜¯utf-8 future.channel().writeAndFlush(Unpooled.copiedBuffer(\u0026#34;Hello World\u0026#34;, CharsetUtil.UTF_8)); //é˜»å¡æ“ä½œï¼ŒcloseFuture()å¼€å¯äº†ä¸€ä¸ªchannelçš„ç›‘å¬å™¨ï¼ˆè¿™æœŸé—´channelåœ¨è¿›è¡Œå„é¡¹å·¥ä½œï¼‰ï¼Œç›´åˆ°é“¾è·¯æ–­å¼€ future.channel().closeFuture().sync(); } finally { group.shutdownGracefully().sync(); } } } æœåŠ¡ç«¯å®ç°ï¼š 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 import io.netty.buffer.ByteBuf; import io.netty.buffer.Unpooled; import io.netty.channel.ChannelHandler; import io.netty.channel.ChannelHandlerContext; import io.netty.channel.ChannelInboundHandlerAdapter; import io.netty.util.CharsetUtil; import io.netty.util.ReferenceCountUtil; import static java.lang.System.*; @ChannelHandler.Sharable public class ServerHandler extends ChannelInboundHandlerAdapter { @Override public void channelRead(ChannelHandlerContext ctx, Object msg) throws Exception { //å¤„ç†æ”¶åˆ°çš„æ•°æ®ï¼Œå¹¶åé¦ˆæ¶ˆæ¯åˆ°åˆ°å®¢æˆ·ç«¯ ByteBuf byteBuf = (ByteBuf) msg; byte[] bytes = new byte[byteBuf.readableBytes()]; byteBuf.readBytes(bytes); out.println(\u0026#34;æ”¶åˆ°å®¢æˆ·ç«¯å‘è¿‡æ¥çš„æ¶ˆæ¯: \u0026#34; +new String(bytes, CharsetUtil.UTF_8)); //å†™å…¥å¹¶å‘é€ä¿¡æ¯åˆ°è¿œç«¯ï¼ˆå®¢æˆ·ç«¯ï¼‰ ctx.writeAndFlush(Unpooled.copiedBuffer(\u0026#34;ä½ å¥½ï¼Œæˆ‘æ˜¯æœåŠ¡ç«¯ï¼Œæˆ‘å·²ç»æ”¶åˆ°ä½ å‘é€çš„æ¶ˆæ¯\u0026#34;, CharsetUtil.UTF_8)); // å¼•ç”¨è®¡æ•°å™¨åŠæ—¶ç”³è¯·é‡Šæ”¾ä¸å†å¼•ç”¨çš„å¯¹è±¡ ReferenceCountUtil.release(byteBuf); } @Override public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) throws Exception { //å‡ºç°å¼‚å¸¸çš„æ—¶å€™æ‰§è¡Œçš„åŠ¨ä½œï¼ˆæ‰“å°å¹¶å…³é—­é€šé“ï¼‰ out.println(\u0026#34;exceptionCaught:\u0026#34; + cause.toString()); if (\u0026#34;java.io.IOException: è¿œç¨‹ä¸»æœºå¼ºè¿«å…³é—­äº†ä¸€ä¸ªç°æœ‰çš„è¿æ¥ã€‚\u0026#34;.equals(cause.toString()) || \u0026#34;java.io.IOException: Connection reset by peer\u0026#34;.equals(cause.toString())) { out.println(\u0026#34;ExceptionCaught: Client Disconnect The Connection.\u0026#34;); ctx.close().sync(); ctx.flush(); } } } æœåŠ¡ç«¯å¯åŠ¨: 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 import io.netty.bootstrap.ServerBootstrap; import io.netty.channel.ChannelFuture; import io.netty.channel.ChannelInitializer; import io.netty.channel.EventLoopGroup; import io.netty.channel.nio.NioEventLoopGroup; import io.netty.channel.socket.SocketChannel; import io.netty.channel.socket.nio.NioServerSocketChannel; import java.net.InetAddress; import java.net.InetSocketAddress; import java.net.NetworkInterface; import java.net.SocketException; import java.util.Enumeration; import java.util.LinkedList; import java.util.List; public class ServerStart { private final int port; public ServerStart(int port) { this.port = port; } public static void main(String[] args) throws Exception { new ServerStart(8089).run(); } /** * åˆ›å»ºä¸¤ä¸ªEventLoopGroupçš„å®ä¾‹ï¼Œä¸€ä¸ªè´Ÿè´£æ¥æ”¶å®¢æˆ·ç«¯çš„è¿æ¥ï¼Œå¦ä¸€ä¸ªè´Ÿè´£å¤„ç†æ¶ˆæ¯I/O * @throws Exception */ public void run() throws Exception { String url = getIpAddress().get(0); InetSocketAddress address = new InetSocketAddress(url, port);//è®¾ç½®ç›‘å¬ç«¯å£ //Nettyçš„Reactorçº¿ç¨‹æ± ï¼Œåˆå§‹åŒ–äº†ä¸€ä¸ªNioEventLoopæ•°ç»„ï¼Œç”¨æ¥å¤„ç†I/Oæ“ä½œ,å¦‚æ¥å—æ–°çš„è¿æ¥å’Œè¯»/å†™æ•°æ® // 1.åˆ›å»ºä¸¤ä¸ªäº‹ä»¶ç»„,bossç”¨äºå¤„ç†è¯·æ±‚çš„acceptäº‹ä»¶,workç”¨äºè¯·æ±‚çš„readå’Œwriteäº‹ä»¶ EventLoopGroup bossGroup = new NioEventLoopGroup(); EventLoopGroup workerGroup = new NioEventLoopGroup(); try { ServerBootstrap b = new ServerBootstrap();//ç”¨äºå¯åŠ¨NIOæœåŠ¡ b.group(bossGroup,workerGroup).channel(NioServerSocketChannel.class) //é€šè¿‡å·¥å‚æ–¹æ³•è®¾è®¡æ¨¡å¼å®ä¾‹åŒ–ä¸€ä¸ªchannel .localAddress(address) .childHandler(new ChannelInitializer\u0026lt;SocketChannel\u0026gt;() { //ChannelInitializeræ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¤„ç†ç±»ï¼Œä»–çš„ç›®çš„æ˜¯å¸®åŠ©ä½¿ç”¨è€…é…ç½®ä¸€ä¸ªæ–°çš„Channel,ç”¨äºæŠŠè®¸å¤šè‡ªå®šä¹‰çš„å¤„ç†ç±»å¢åŠ åˆ°piplineä¸Šæ¥ @Override public void initChannel(SocketChannel ch) throws Exception {//ChannelInitializer æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å¤„ç†ç±»ï¼Œä»–çš„ç›®çš„æ˜¯å¸®åŠ©ä½¿ç”¨è€…é…ç½®ä¸€ä¸ªæ–°çš„ Channelã€‚ ch.pipeline().addLast(new ServerHandler());//é…ç½®childHandleræ¥é€šçŸ¥ä¸€ä¸ªå…³äºæ¶ˆæ¯å¤„ç†çš„InfoServerHandlerå®ä¾‹ } }); //ç»‘å®šæœåŠ¡å™¨ï¼Œè¯¥å®ä¾‹å°†æä¾›æœ‰å…³IOæ“ä½œçš„ç»“æœæˆ–çŠ¶æ€çš„ä¿¡æ¯ ChannelFuture channelFuture = b.bind(address).sync(); System.out.println(\u0026#34;åœ¨\u0026#34; + address + \u0026#34;ä¸Šå¼€å¯ç›‘å¬\u0026#34;); //é˜»å¡æ“ä½œï¼ŒcloseFuture()å¼€å¯äº†ä¸€ä¸ªchannelçš„ç›‘å¬å™¨ï¼ˆè¿™æœŸé—´channelåœ¨è¿›è¡Œå„é¡¹å·¥ä½œï¼‰ï¼Œç›´åˆ°é“¾è·¯æ–­å¼€ channelFuture.channel().closeFuture().sync(); } finally { bossGroup.shutdownGracefully().sync();//å…³é—­EventLoopGroupå¹¶é‡Šæ”¾æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬æ‰€æœ‰åˆ›å»ºçš„çº¿ç¨‹ workerGroup.shutdownGracefully().sync();//å…³é—­EventLoopGroupå¹¶é‡Šæ”¾æ‰€æœ‰èµ„æºï¼ŒåŒ…æ‹¬æ‰€æœ‰åˆ›å»ºçš„çº¿ç¨‹ } } private static List\u0026lt;String\u0026gt; getIpAddress() { List\u0026lt;String\u0026gt; list = new LinkedList\u0026lt;\u0026gt;(); try { for (Enumeration\u0026lt;NetworkInterface\u0026gt; en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements(); ) { NetworkInterface intf = en.nextElement(); String name = intf.getName(); if (!name.contains(\u0026#34;docker\u0026#34;) \u0026amp;\u0026amp; !name.contains(\u0026#34;lo\u0026#34;)) { for (Enumeration\u0026lt;InetAddress\u0026gt; enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements(); ) { InetAddress inetAddress = enumIpAddr.nextElement(); if (!inetAddress.isLoopbackAddress()) { String ipaddress = inetAddress.getHostAddress(); if (!ipaddress.contains(\u0026#34;::\u0026#34;) \u0026amp;\u0026amp; !ipaddress.contains(\u0026#34;0:0:\u0026#34;) \u0026amp;\u0026amp; !ipaddress.contains(\u0026#34;fe80\u0026#34;)) { list.add(ipaddress); } } } } } } catch (SocketException ex) { String ip = \u0026#34;127.0.0.1\u0026#34;; list.add(ip); } return list; } } ","permalink":"https://zpc2222.github.io/posts/tech/netty-in-action/","summary":"æ¦‚å¿µ ç»„ä»¶ å æ¦‚å¿µ IO æµ å„ç§å„æ ·çš„æµï¼ˆæ–‡ä»¶ã€æ•°ç»„ã€ç¼“å†²ã€ç®¡é“ã€‚ã€‚ã€‚ï¼‰çš„å¤„ç†ï¼ˆè¾“å…¥è¾“å‡ºï¼‰ Channel é€šé“ ä»£è¡¨ä¸€ä¸ªè¿æ¥ï¼Œæ¯ä¸ªClientè¯·å¯¹ä¼šå¯¹åº”åˆ°å…·ä½“çš„ä¸€ä¸ªC","title":"Nettyå®æˆ˜"},{"content":"Nginxçš„ä¸€äº›ä½¿ç”¨å¿ƒå¾— å¸¸ç”¨å‘½ä»¤ å¯åŠ¨ 1 2 3 4 5 è¿›å…¥nginxå®‰è£…è·¯å¾„ä¸‹æ‰§è¡Œstart nginx å‘½ä»¤ /usr/sbin/nginx (nginxå®‰è£…è·¯å¾„) service nginx start åœæ­¢ 1 2 3 4 5 6 7 /usr/sbin/nginx -s stop nginx -s stop å‘½ä»¤ ps -ef|grep nginx pkill -9 nginx (å¼ºåˆ¶åœæ­¢) é‡æ–°è½½å…¥é…ç½®/é‡å¯ 1 2 3 4 5 6 7 sudo /usr/sbin/nginx -s stop ;sudo /usr/sbin/nginx nginx -s reload è¿›å…¥nginxå¯æ‰§è¡Œç›®å½•sbinä¸‹ï¼Œè¾“å…¥å‘½ä»¤./nginx -s reload æŸ¥æ‰¾å½“å‰nginxè¿›ç¨‹å·ï¼Œç„¶åè¾“å…¥å‘½ä»¤ï¼škill -HUP è¿›ç¨‹å· å®ç°é‡å¯nginxæœåŠ¡ æŸ¥çœ‹å¯åŠ¨æƒ…å†µ 1 ps -ef | grep nginx nginxæ£€æŸ¥é…ç½® 1 nginx -t å‡ºç°æ˜¾ç¤ºnginx.conf å³å¯\né…ç½® 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 user www-data; worker_processes auto; pid /run/nginx.pid; include /etc/nginx/modules-enabled/*.conf; events { worker_connections 768; # multi_accept on; } http { ## # Basic Settings ## sendfile on; tcp_nopush on; tcp_nodelay on; keepalive_timeout 65; types_hash_max_size 2048; # server_tokens off; # server_names_hash_bucket_size 64; # server_name_in_redirect off; include /etc/nginx/mime.types; default_type application/octet-stream; ## # SSL Settings ## ssl_protocols TLSv1 TLSv1.1 TLSv1.2; # Dropping SSLv3, ref: POODLE ssl_prefer_server_ciphers on; ## # Logging Settings ## access_log /var/log/nginx/access.log; error_log /var/log/nginx/error.log; ## # Gzip Settings ## gzip on; # gzip_vary on; # gzip_proxied any; # gzip_comp_level 6; # gzip_buffers 16 8k; # gzip_http_version 1.1; # gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript; ## # Virtual Host Configs ## server { listen 80; server_name 192.168.1.100; client_max_body_size 200m; #ä¸Šä¼ æ–‡ä»¶çš„å¤§å° proxy_set_header Host $http_host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; proxy_send_timeout 180s; # è®¾ç½®å‘é€è¶…æ—¶æ—¶é—´ï¼Œ proxy_read_timeout 180s; # è®¾ç½®è¯»å–è¶…æ—¶æ—¶é—´ã€‚ #webå…¥å£å·¥ç¨‹ location / { root /home/vue/dist; index index.html index.htm; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_ssl_session_reuse off; charset utf-8; } location /admin { proxy_set_header Host $host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_pass http://127.0.0.1:8081; } location /app { proxy_set_header Host $host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_pass http://127.0.0.1:8080; } location /dashboard { proxy_set_header Host $host; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_pass http://127.0.0.1:9080; } } include /etc/nginx/conf.d/*.conf; include /etc/nginx/sites-enabled/*; } æ ¹æ®ä¸Šé¢çš„nginxé…ç½®æ–‡ä»¶,å¯ä»¥å°†nginxçš„é…ç½®åˆ†ä¸ºä»¥ä¸‹çš„ç»„æˆç»“æ„\n1 2 3 4 5 6 7 8 9 ... #å…¨å±€å¿« events { #eventså¿« } http{ #httpå— server { #serverå¿« location { #locationå¿« } } } æ¯å—çš„ç»“æ„åŠŸèƒ½ (1)ã€å…¨å±€å—: é…ç½®å½±å“nginxå…¨å±€çš„æŒ‡ä»¤ã€‚ä¸€èˆ¬æœ‰è¿è¡ŒnginxæœåŠ¡å™¨çš„ç”¨æˆ·ç»„ï¼Œnginxè¿›ç¨‹pidå­˜æ”¾è·¯å¾„ï¼Œæ—¥å¿—å­˜æ”¾è·¯å¾„ï¼Œé…ç½®æ–‡ä»¶å¼•å…¥ï¼Œå…è®¸ç”Ÿæˆworker processæ•°ç­‰ã€‚\n(2)ã€eventså—: é…ç½®å½±å“nginxæœåŠ¡å™¨æˆ–ä¸ç”¨æˆ·çš„ç½‘ç»œè¿æ¥ã€‚æœ‰æ¯ä¸ªè¿›ç¨‹çš„æœ€å¤§è¿æ¥æ•°ï¼Œé€‰å–å“ªç§äº‹ä»¶é©±åŠ¨æ¨¡å‹å¤„ç†è¿æ¥è¯·æ±‚ï¼Œæ˜¯å¦å…è®¸åŒæ—¶æ¥å—å¤šä¸ªç½‘è·¯è¿æ¥ï¼Œâ€ƒå¼€å¯å¤šä¸ªç½‘ç»œè¿æ¥åºåˆ—åŒ–ç­‰\n(3)ã€httpå—: å¯ä»¥é…ç½®å¤šä¸ªserver,é…ç½®ä»£ç†ã€ç¼“å­˜ã€æ—¥å¿—å®šä¹‰ç­‰èƒ½å’Œç¬¬ä¸‰æ–¹æ¨¡å—çš„é…ç½®ã€‚å¦‚æ–‡ä»¶å¼•å…¥ï¼Œmime-typeå®šä¹‰ï¼Œæ—¥å¿—è‡ªå®šä¹‰ï¼Œæ˜¯å¦ä½¿ç”¨sendfileä¼ è¾“æ–‡ä»¶ï¼Œè¿æ¥è¶…æ—¶æ—¶é—´ï¼Œå•è¿æ¥è¯·æ±‚æ•°ç­‰ã€‚\n(4)ã€serverå—: é…ç½®è™šæ‹Ÿä¸»æœºçš„ç›¸å…³å‚æ•°ï¼Œä¸€ä¸ªhttpä¸­å¯ä»¥æœ‰å¤šä¸ªserverã€‚\n(5)ã€locationå—: é…ç½®è¯·æ±‚çš„è·¯ç”±ï¼Œä»¥åŠå„ç§é¡µé¢çš„å¤„ç†æƒ…å†µã€‚ é…ç½®æ–‡ä»¶ä¸­å¸¸ç”¨çš„å˜é‡,å¯ä»¥ç”¨äºè¯·æ±‚æ‹¦æˆªæˆ–è€…åŒ¹é…è·¯ç”±\n1.$remote_addr ä¸ $http_x_forwarded_for ç”¨ä»¥è®°å½•å®¢æˆ·ç«¯çš„ipåœ°å€ï¼› 2.$remote_user ï¼šç”¨æ¥è®°å½•å®¢æˆ·ç«¯ç”¨æˆ·åç§°ï¼› 3.$time_local ï¼š ç”¨æ¥è®°å½•è®¿é—®æ—¶é—´ä¸æ—¶åŒºï¼› 4.$request ï¼š ç”¨æ¥è®°å½•è¯·æ±‚çš„urlä¸httpåè®®ï¼› 5.$status ï¼š ç”¨æ¥è®°å½•è¯·æ±‚çŠ¶æ€ï¼›æˆåŠŸæ˜¯200ï¼› 6.$body_bytes_s ent ï¼šè®°å½•å‘é€ç»™å®¢æˆ·ç«¯æ–‡ä»¶ä¸»ä½“å†…å®¹å¤§å°ï¼› 7.$http_referer ï¼šç”¨æ¥è®°å½•ä»é‚£ä¸ªé¡µé¢é“¾æ¥è®¿é—®è¿‡æ¥çš„ï¼› 8.$http_user_agent ï¼šè®°å½•å®¢æˆ·ç«¯æµè§ˆå™¨çš„ç›¸å…³ä¿¡æ¯ï¼›\nå‚æ•°è¯´æ˜ï¼š 1ã€listenï¼šnginxç›‘å¬çš„ç«¯å£ 1ã€server_nameï¼šnginxæœåŠ¡çš„ipåœ°å€æˆ–è€…åŸŸå 3ã€locationï¼šé…ç½®è·¯ç”±è®¿é—®ä¿¡æ¯\nlocation é…ç½®å‚æ•°ï¼š 1ã€ = ï¼šç”¨äºä¸å«æ­£åˆ™è¡¨è¾¾å¼çš„ uri å‰ï¼Œè¦æ±‚è¯·æ±‚å­—ç¬¦ä¸²ä¸ uri ä¸¥æ ¼åŒ¹é…ï¼Œå¦‚æœåŒ¹é… æˆåŠŸï¼Œå°±åœæ­¢ç»§ç»­å‘ä¸‹æœç´¢å¹¶ç«‹å³å¤„ç†è¯¥è¯·æ±‚ã€‚ 2ã€ ~ï¼šç”¨äºè¡¨ç¤º uri åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”åŒºåˆ†å¤§å°å†™ã€‚ 3ã€ ~*ï¼šç”¨äºè¡¨ç¤º uri åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œå¹¶ä¸”ä¸åŒºåˆ†å¤§å°å†™ã€‚ 4ã€ ^~ï¼šç”¨äºä¸å«æ­£åˆ™è¡¨è¾¾å¼çš„ uri å‰ï¼Œè¦æ±‚ Nginx æœåŠ¡å™¨æ‰¾åˆ°æ ‡è¯† uri å’Œè¯·æ±‚å­—ç¬¦ä¸²åŒ¹é…åº¦æœ€é«˜çš„ location åï¼Œç«‹å³ä½¿ç”¨æ­¤ location å¤„ç†è¯·æ±‚ï¼Œè€Œä¸å†ä½¿ç”¨ locationå—ä¸­çš„æ­£åˆ™ uri å’Œè¯·æ±‚å­—ç¬¦ä¸²åšåŒ¹é…ã€‚ æ³¨æ„ï¼šå¦‚æœ uri åŒ…å«æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆ™å¿…é¡»è¦æœ‰~ æˆ–è€… ~*æ ‡è¯†ã€‚\nproxy_passå¸¦æ–œæ  proxy_passæœ«å°¾æœ‰æ–œæ  / ï¼Œproxy_passä¸æ‹¼æ¥locationçš„è·¯å¾„\n1 2 3 location /api/ { proxy_pass http://127.0.0.1:8000/; } è¯·æ±‚åœ°å€ï¼šhttp://localhost/api/test è½¬å‘åœ°å€ï¼šhttp://127.0.0.1:8000/test proxy_passæœ«å°¾æ— æ–œæ  / ï¼Œproxy_passä¼šæ‹¼æ¥locationçš„è·¯å¾„\n1 2 3 location /api/ { proxy_pass http://127.0.0.1:8000; } è¯·æ±‚åœ°å€ï¼šhttp://localhost/api/test è½¬å‘åœ°å€ï¼šhttp://127.0.0.1:8000/api/test\nè´Ÿè½½å‡è¡¡ åœ¨ nginx é…ç½®æ–‡ä»¶ä¸­è¿›è¡Œè´Ÿè½½å‡è¡¡çš„é…ç½®\nåœ¨httpä¸­æ·»åŠ  upstream ï¼Œåœ¨upstream ä¸­æ·»åŠ æœåŠ¡åˆ—è¡¨ï¼Œè®¾ç½®è´Ÿè½½å‡è¡¡ç­–ç•¥ åœ¨location ä¸­æŒ‡å®šupstream åç§° 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 http { ..... upstream myservere { server 192.168.10.196:8001 weight=1; server 192.168.10.196:8002 weight=5; } server { listen 9001; server_name localhost; location / { proxy_pass http://myservere/; } } } è´Ÿè½½å‡è¡¡ç­–ç•¥ è½®è¯¢ï¼ˆé»˜è®¤ï¼‰ æ¯ä¸ªè¯·æ±‚æŒ‰æ—¶é—´é¡ºåºé€ä¸€åˆ†é…åˆ°ä¸åŒçš„åç«¯æœåŠ¡å™¨ï¼Œå¦‚æœåç«¯æœåŠ¡å™¨ down æ‰ï¼Œèƒ½è‡ªåŠ¨å‰”é™¤ã€‚\nweight weight ä»£è¡¨æƒé‡ï¼Œé»˜è®¤ä¸º 1ï¼Œæƒé‡è¶Šé«˜è¢«åˆ†é…çš„å®¢æˆ·ç«¯è¶Šå¤š\næŒ‡å®šè½®è¯¢å‡ ç‡ï¼Œ weight å’Œè®¿é—®æ¯”ç‡æˆæ­£æ¯”ï¼Œç”¨äºåç«¯æœåŠ¡å™¨æ€§èƒ½ä¸å‡çš„æƒ…å†µã€‚ ä¾‹å¦‚ï¼š\n1 2 3 4 upstream myservere { server 192.168.10.196:8001 weight=1; server 192.168.10.196:8002 weight=5; } ip_hash æ¯ä¸ªè¯·æ±‚æŒ‰è®¿é—® ip çš„ hash ç»“æœåˆ†é…ï¼Œè¿™æ ·æ¯ä¸ªè®¿å®¢å›ºå®šè®¿é—®ä¸€ä¸ªåç«¯æœåŠ¡å™¨ï¼Œå¯ä»¥è§£å†³ session çš„é—®é¢˜ã€‚ ä¾‹å¦‚ï¼š\n1 2 3 4 5 upstream myservere { ip_hash; server 192.168.10.196:8001; server 192.168.10.196:8002; } fairï¼ˆç¬¬ä¸‰æ–¹ï¼‰ æŒ‰åç«¯æœåŠ¡å™¨çš„å“åº”æ—¶é—´æ¥åˆ†é…è¯·æ±‚ï¼Œå“åº”æ—¶é—´çŸ­çš„ä¼˜å…ˆåˆ†é…ã€‚\n1 2 3 4 5 upstream myservere { server 192.168.10.196:8001; server 192.168.10.196:8002; fair; } websocketé…ç½®é¡¹ websocketé…ç½®é¡¹ è¶…æ—¶æ—¶é—´è¦é…ç½®ä¹…ç‚¹,é»˜è®¤90ç§’å¤ªçŸ­ï¼Œå‰ç«¯ä¹Ÿè¦å‘å¿ƒè·³ï¼Œé˜²æ­¢æ–­è”\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 @ServerEndpoint(value=\u0026#34;/webSocket/notice\u0026#34;) server { listen 80; server_name åŸŸå; location /webSocket { proxy_pass http://radp:8888/webSocket/notice; // ä»£ç†è½¬å‘åœ°å€ proxy_http_version 1.1; proxy_read_timeout 1800s; // è¶…æ—¶è®¾ç½® // å¯ç”¨æ”¯æŒwebsocketè¿æ¥ proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection \u0026#34;upgrade\u0026#34;; } location /upload { // é™æ€èµ„æºåœ°å€ root /mnt/resources; } } JavaæœåŠ¡è½¬å‘ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 JavaæœåŠ¡ è½¬å‘ location /rdapapi/ { client_max_body_size 100M; proxy_pass http://radp:8888/; proxy_connect_timeout 300s; proxy_send_timeout 900; proxy_read_timeout 900; proxy_buffer_size 32k; proxy_buffers 4 64k; proxy_busy_buffers_size 128k; proxy_redirect default; proxy_hide_header Vary; proxy_set_header Accept-Encoding \u0026#39;\u0026#39;; proxy_set_header Referer $http_referer; proxy_set_header Cookie $http_cookie; proxy_set_header Host $host:$server_port; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header HTTP_X_FORWARDED_FOR $remote_addr; proxy_set_header X-Forwarded-Proto $scheme; proxy_set_header X-NginX-Proxy true; proxy_http_version 1.1; proxy_set_header Connection \u0026#34;\u0026#34;; } tips Linux æœåŠ¡å™¨ä¸Šé˜²ç«å¢™ä¼šç«¯å£æ‹¦æˆªï¼Œæ‰€ä»¥éœ€è¦åœ¨é˜²ç«å¢™ä¸­å¼€æ”¾80 ç«¯å£ï¼Œä¹Ÿå¯ä»¥ç›´æ¥å…³é—­é˜²ç«å¢™ï¼Œè¿™å„¿æä¾›å…è®¸80ç«¯å£æ–¹æ³•\n1 2 3 4 5 # å…è®¸80ç«¯å£ firewall-cmd --permanent --add-port=80/tcp --zone=public # é‡æ–°åŠ è½½é˜²ç«å¢™é…ç½® firewall-cmd --reload ","permalink":"https://zpc2222.github.io/posts/tech/nginx/","summary":"Nginxçš„ä¸€äº›ä½¿ç”¨å¿ƒå¾— å¸¸ç”¨å‘½ä»¤ å¯åŠ¨ 1 2 3 4 5 è¿›å…¥nginxå®‰è£…è·¯å¾„ä¸‹æ‰§è¡Œstart nginx å‘½ä»¤ /usr/sbin/nginx (nginxå®‰è£…è·¯å¾„) service nginx start åœæ­¢ 1 2 3 4 5 6 7 /usr/sbin/nginx","title":"Nginx"},{"content":"ç”±æ­¤å¼€å§‹ - Obsidian ä¸­æ–‡å¸®åŠ© - Obsidian Publish\nObsidianæ˜¯åŸºäºMarkdownæ–‡ä»¶çš„æœ¬åœ°çŸ¥è¯†ç®¡ç†è½¯ä»¶ï¼Œå¹¶ä¸”å¼€å‘è€…æ‰¿è¯ºObsidianå¯¹äºä¸ªäººä½¿ç”¨è€…æ°¸ä¹…å…è´¹ã€‚\nMarkdownæ–‡ä»¶ä½“ç§¯å°ã€è¯­æ³•ç®€å•ã€ä¾¿äºè¿ç§»ã€‚ç›¸è¾ƒäºå…¶ä»–åŒå‘é“¾æ¥è½¯ä»¶è¿ç§»åæ•´ä¸ªåŒå‘é“¾æ¥ã€ç½‘ç»œå…³ç³»å´©æºƒï¼ŒObsidianæ˜¯é€šè¿‡Markdownæ–‡ä»¶ä¸­çš„è¯­æ³•è¿›è¡Œå…³è”çš„ï¼Œåªéœ€è¦å¤åˆ¶ç²˜è´´Obsidiané€‰ä¸­çš„åº“å°±å¯ä»¥è½»æ¾å®ç°å®Œæ•´åœ°è¿ç§»ã€‚ï¼ˆè™½ç„¶é…ç½®å’Œæ’ä»¶éœ€è¦é‡æ–°è®¾ç½®ï¼‰\n","permalink":"https://zpc2222.github.io/posts/tools/obsidian/","summary":"ç”±æ­¤å¼€å§‹ - Obsidian ä¸­æ–‡å¸®åŠ© - Obsidian Publish Obsidianæ˜¯åŸºäºMarkdownæ–‡ä»¶çš„æœ¬åœ°çŸ¥è¯†ç®¡ç†è½¯ä»¶ï¼Œå¹¶ä¸”å¼€å‘è€…æ‰¿è¯ºObsidianå¯¹äºä¸ªäººä½¿ç”¨è€…æ°¸ä¹…å…è´¹","title":"obsidian"},{"content":" 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 ### 1.å¯åŠ¨nameserver nohup sh bin/mqnamesrv \u0026amp; #### 2.å¯åŠ¨broker nohup sh bin/mqbroker -n 192.168.1.100:9876 -c conf/broker.conf autoCreateTopicEnable=true \u0026amp; ## æŸ¥çœ‹æ—¥å¿— tail -f ~/logs/rocketmqlogs/namesrv.log tail -f ~/logs/rocketmqlogs/broker.log æŸ¥çœ‹æ‰€æœ‰topic sh mqadmin topicList -n 192.168.1.100:9876 ## 1.å…³é—­NameServer sh bin/mqshutdown namesrv ## 2.å…³é—­Broker sh bin/mqshutdown broker ","permalink":"https://zpc2222.github.io/posts/tech/rocketmq/","summary":"1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 ### 1.å¯åŠ¨nameserver nohup sh bin/mqnamesrv \u0026amp; #### 2.å¯åŠ¨broker nohup sh bin/mqbroker -n 192.168.1.100:9876 -c conf/broker.conf autoCreateTopicEnable=true \u0026amp; ## æŸ¥çœ‹æ—¥å¿— tail -f ~/logs/rocketmqlogs/namesrv.log tail -f ~/logs/rocketmqlogs/broker.log æŸ¥çœ‹æ‰€æœ‰t","title":"rocketMQ"},{"content":"windowså‘½ä»¤ æŸ¥çœ‹ç«¯å£å ç”¨PID netstat -aon|findstr \u0026ldquo;9000\u0026rdquo;\næŸ¥çœ‹è¿›ç¨‹ tasklist|findstr \u0026ldquo;9088\u0026rdquo; æ€è¿›ç¨‹ taskkill /T /F /PID 9088\n","permalink":"https://zpc2222.github.io/posts/tech/windows/","summary":"windowså‘½ä»¤ æŸ¥çœ‹ç«¯å£å ç”¨PID netstat -aon|findstr \u0026ldquo;9000\u0026rdquo; æŸ¥çœ‹è¿›ç¨‹ tasklist|findstr \u0026ldquo;9088\u0026rdquo; æ€è¿›ç¨‹ taskkill /T /F /PID 9088","title":"Windows"},{"content":"ioç®€ä»‹ tag-placeholder\nIO æŒ‡è®¡ç®—æœºä¸å¤–éƒ¨ä¸–ç•Œæˆ–è€…ä¸€ä¸ªç¨‹åºä¸è®¡ç®—æœºçš„å…¶ä½™éƒ¨åˆ†çš„ä¹‹é—´çš„æ¥å£ åœ¨ Java ç¼–ç¨‹ä¸­ï¼Œç›´åˆ°æœ€è¿‘ä¸€ç›´ä½¿ç”¨ æµ çš„æ–¹å¼å®Œæˆ I/Oã€‚æ‰€æœ‰ I/O éƒ½è¢«è§†ä¸ºå•ä¸ªçš„å­—èŠ‚çš„ç§»åŠ¨ï¼Œé€šè¿‡ä¸€ä¸ªç§°ä¸º Stream çš„å¯¹è±¡ä¸€æ¬¡ç§»åŠ¨ä¸€ä¸ªå­—èŠ‚ã€‚æµ I/O ç”¨äºä¸å¤–éƒ¨ä¸–ç•Œæ¥è§¦ã€‚å®ƒä¹Ÿåœ¨å†…éƒ¨ä½¿ç”¨ï¼Œç”¨äºå°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚ï¼Œç„¶åå†è½¬æ¢å›å¯¹è±¡ã€‚\nAIO Java AIOå³Asyncéé˜»å¡ï¼Œæ˜¯å¼‚æ­¥éé˜»å¡çš„IOã€‚\nBIO Java BIOå³Block I/O ï¼Œ åŒæ­¥å¹¶é˜»å¡çš„IOã€‚ BIOå°±æ˜¯ä¼ ç»Ÿçš„java.ioåŒ…ä¸‹é¢çš„ä»£ç å®ç°ã€‚\nNIO NIO ä¸åŸæ¥çš„ I/O æœ‰åŒæ ·çš„ä½œç”¨å’Œç›®çš„, ä»–ä»¬ä¹‹é—´æœ€é‡è¦çš„åŒºåˆ«æ˜¯æ•°æ®æ‰“åŒ…å’Œä¼ è¾“çš„æ–¹å¼ã€‚åŸæ¥çš„ I/O ä»¥æµçš„æ–¹å¼å¤„ç†æ•°æ®ï¼Œè€Œ NIO ä»¥å—çš„æ–¹å¼å¤„ç†æ•°æ® é¢å‘æµ çš„ I/O ç³»ç»Ÿä¸€æ¬¡ä¸€ä¸ªå­—èŠ‚åœ°å¤„ç†æ•°æ®ã€‚ä¸€ä¸ªè¾“å…¥æµäº§ç”Ÿä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ï¼Œä¸€ä¸ªè¾“å‡ºæµæ¶ˆè´¹ä¸€ä¸ªå­—èŠ‚çš„æ•°æ®ã€‚ä¸ºæµå¼æ•°æ®åˆ›å»ºè¿‡æ»¤å™¨éå¸¸å®¹æ˜“ã€‚é“¾æ¥å‡ ä¸ªè¿‡æ»¤å™¨ï¼Œä»¥ä¾¿æ¯ä¸ªè¿‡æ»¤å™¨åªè´Ÿè´£å•ä¸ªå¤æ‚å¤„ç†æœºåˆ¶çš„ä¸€éƒ¨åˆ†ï¼Œè¿™æ ·ä¹Ÿæ˜¯ç›¸å¯¹ç®€å•çš„ã€‚ä¸åˆ©çš„ä¸€é¢æ˜¯ï¼Œé¢å‘æµçš„ I/O é€šå¸¸ç›¸å½“æ…¢ã€‚\nä¸€ä¸ª é¢å‘å— çš„ I/O ç³»ç»Ÿä»¥å—çš„å½¢å¼å¤„ç†æ•°æ®ã€‚æ¯ä¸€ä¸ªæ“ä½œéƒ½åœ¨ä¸€æ­¥ä¸­äº§ç”Ÿæˆ–è€…æ¶ˆè´¹ä¸€ä¸ªæ•°æ®å—ã€‚æŒ‰å—å¤„ç†æ•°æ®æ¯”æŒ‰(æµå¼çš„)å­—èŠ‚å¤„ç†æ•°æ®è¦å¿«å¾—å¤šã€‚ä½†æ˜¯é¢å‘å—çš„ I/O ç¼ºå°‘ä¸€äº›é¢å‘æµçš„ I/O æ‰€å…·æœ‰çš„ä¼˜é›…æ€§å’Œç®€å•æ€§ã€‚\nåŒºåˆ«åŠè”ç³» BIO ï¼ˆBlocking I/Oï¼‰ï¼šåŒæ­¥é˜»å¡I/Oæ¨¡å¼ï¼Œæ•°æ®çš„è¯»å–å†™å…¥å¿…é¡»é˜»å¡åœ¨ä¸€ä¸ªçº¿ç¨‹å†…ç­‰å¾…å…¶å®Œæˆã€‚è¿™é‡Œå‡è®¾ä¸€ä¸ªçƒ§å¼€æ°´çš„åœºæ™¯ï¼Œæœ‰ä¸€æ’æ°´å£¶åœ¨çƒ§å¼€æ°´ï¼ŒBIOçš„å·¥ä½œæ¨¡å¼å°±æ˜¯ï¼Œ å«ä¸€ä¸ªçº¿ç¨‹åœç•™åœ¨ä¸€ä¸ªæ°´å£¶é‚£ï¼Œç›´åˆ°è¿™ä¸ªæ°´å£¶çƒ§å¼€ï¼Œæ‰å»å¤„ç†ä¸‹ä¸€ä¸ªæ°´å£¶ã€‚ä½†æ˜¯å®é™…ä¸Šçº¿ç¨‹åœ¨ç­‰å¾…æ°´å£¶çƒ§å¼€çš„æ—¶é—´æ®µä»€ä¹ˆéƒ½æ²¡æœ‰åšã€‚\nNIO ï¼ˆNew I/Oï¼‰ï¼šåŒæ—¶æ”¯æŒé˜»å¡ä¸éé˜»å¡æ¨¡å¼ï¼Œä½†è¿™é‡Œæˆ‘ä»¬ä»¥å…¶åŒæ­¥éé˜»å¡I/Oæ¨¡å¼æ¥è¯´æ˜ï¼Œé‚£ä¹ˆä»€ä¹ˆå«åšåŒæ­¥éé˜»å¡ï¼Ÿå¦‚æœè¿˜æ‹¿çƒ§å¼€æ°´æ¥è¯´ï¼ŒNIOçš„åšæ³•æ˜¯å«ä¸€ä¸ªçº¿ç¨‹ä¸æ–­çš„è½®è¯¢æ¯ä¸ªæ°´å£¶çš„çŠ¶æ€ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰æ°´å£¶çš„çŠ¶æ€å‘ç”Ÿäº†æ”¹å˜ï¼Œä»è€Œè¿›è¡Œä¸‹ä¸€æ­¥çš„æ“ä½œã€‚\nAIO ï¼ˆ Asynchronous I/Oï¼‰ï¼šå¼‚æ­¥éé˜»å¡I/Oæ¨¡å‹ã€‚å¼‚æ­¥éé˜»å¡ä¸åŒæ­¥éé˜»å¡çš„åŒºåˆ«åœ¨å“ªé‡Œï¼Ÿå¼‚æ­¥éé˜»å¡æ— éœ€ä¸€ä¸ªçº¿ç¨‹å»è½®è¯¢æ‰€æœ‰IOæ“ä½œçš„çŠ¶æ€æ”¹å˜ï¼Œåœ¨ç›¸åº”çš„çŠ¶æ€æ”¹å˜åï¼Œç³»ç»Ÿä¼šé€šçŸ¥å¯¹åº”çš„çº¿ç¨‹æ¥å¤„ç†ã€‚å¯¹åº”åˆ°çƒ§å¼€æ°´ä¸­å°±æ˜¯ï¼Œä¸ºæ¯ä¸ªæ°´å£¶ä¸Šé¢è£…äº†ä¸€ä¸ªå¼€å…³ï¼Œæ°´çƒ§å¼€ä¹‹åï¼Œæ°´å£¶ä¼šè‡ªåŠ¨é€šçŸ¥æˆ‘æ°´çƒ§å¼€äº†ã€‚\nå„è‡ªé€‚ç”¨åœºæ™¯ BIOæ–¹å¼é€‚ç”¨äºè¿æ¥æ•°ç›®æ¯”è¾ƒå°ä¸”å›ºå®šçš„æ¶æ„ï¼Œè¿™ç§æ–¹å¼å¯¹æœåŠ¡å™¨èµ„æºè¦æ±‚æ¯”è¾ƒé«˜ï¼Œå¹¶å‘å±€é™äºåº”ç”¨ä¸­ï¼ŒJDK1.4ä»¥å‰çš„å”¯ä¸€é€‰æ‹©ï¼Œä½†ç¨‹åºç›´è§‚ç®€å•æ˜“ç†è§£ã€‚\nNIOæ–¹å¼é€‚ç”¨äºè¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒçŸ­ï¼ˆè½»æ“ä½œï¼‰çš„æ¶æ„ï¼Œæ¯”å¦‚èŠå¤©æœåŠ¡å™¨ï¼Œå¹¶å‘å±€é™äºåº”ç”¨ä¸­ï¼Œç¼–ç¨‹æ¯”è¾ƒå¤æ‚ï¼ŒJDK1.4å¼€å§‹æ”¯æŒã€‚\nAIOæ–¹å¼é€‚ç”¨äºè¿æ¥æ•°ç›®å¤šä¸”è¿æ¥æ¯”è¾ƒé•¿ï¼ˆé‡æ“ä½œï¼‰çš„æ¶æ„ï¼Œæ¯”å¦‚ç›¸å†ŒæœåŠ¡å™¨ï¼Œå……åˆ†è°ƒç”¨OSå‚ä¸å¹¶å‘æ“ä½œï¼Œç¼–ç¨‹æ¯”è¾ƒå¤æ‚ï¼ŒJDK7å¼€å§‹æ”¯æŒ\n","permalink":"https://zpc2222.github.io/posts/tech/network-programming-io/","summary":"ioç®€ä»‹ tag-placeholder IO æŒ‡è®¡ç®—æœºä¸å¤–éƒ¨ä¸–ç•Œæˆ–è€…ä¸€ä¸ªç¨‹åºä¸è®¡ç®—æœºçš„å…¶ä½™éƒ¨åˆ†çš„ä¹‹é—´çš„æ¥å£ åœ¨ Java ç¼–ç¨‹ä¸­ï¼Œç›´åˆ°æœ€è¿‘ä¸€ç›´ä½¿ç”¨ æµ çš„æ–¹å¼å®Œæˆ I/Oã€‚æ‰€æœ‰ I/O éƒ½è¢«è§†ä¸ºå•ä¸ªçš„","title":"ç½‘ç»œç¼–ç¨‹IO"},{"content":" æˆ‘çš„éŸ³ä¹æ­Œå• éŸ³ä¹æ’ä»¶ å†™å…¥åï¼Œæ ¹æ®idï¼Œserverè‡ªè¡Œä¿®æ”¹ï¼Œç½‘æ˜“äº‘ï¼ŒQQéŸ³ä¹ï¼Œé…·ç‹—éƒ½æ”¯æŒï¼›ç›®å‰éä¼šå‘˜å·²ç»æ— æ³•ç™½å«–å¬æ­Œäº†ï¼Œåªèƒ½å¬å…è´¹æ­Œæ›²\n1 2 3 4 5 6 \u0026lt;link rel=\u0026#34;stylesheet\u0026#34; href=\u0026#34;https://cdn.jsdelivr.net/npm/aplayer@1.7.0/dist/APlayer.min.css\u0026#34;\u0026gt; \u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/npm/aplayer@1.7.0/dist/APlayer.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;script src=\u0026#34;https://cdn.jsdelivr.net/npm/meting@1.1.0/dist/Meting.min.js\u0026#34;\u0026gt;\u0026lt;/script\u0026gt; \u0026lt;div class=\u0026#34;aplayer\u0026#34; data-id=\u0026#34;2384590275\u0026#34; data-server=\u0026#34;tencent\u0026#34; data-type=\u0026#34;playlist\u0026#34; data-mode=\u0026#34;circulation\u0026#34; data-autopla=\u0026#34;true\u0026#34;\u0026gt;\u0026lt;/div\u0026gt; å‚æ•°è¯´æ˜ ä¸»è¦å‚æ•° å€¼ data-id æ­Œæ›²/ä¸“è¾‘/æ­Œå• ID data-server neteaseï¼ˆç½‘æ˜“äº‘éŸ³ä¹ï¼‰tencentï¼ˆQQéŸ³ä¹ï¼‰ xiamiï¼ˆè™¾ç±³ï¼‰ kugouï¼ˆé…·ç‹—ï¼‰ data-type song ï¼ˆå•æ›²ï¼‰ album ï¼ˆä¸“è¾‘ï¼‰ playlist ï¼ˆæ­Œå•ï¼‰ search ï¼ˆæœç´¢ï¼‰ data-mode random ï¼ˆéšæœºï¼‰ single ï¼ˆå•æ›²ï¼‰ circulation ï¼ˆåˆ—è¡¨å¾ªç¯ï¼‰ order ï¼ˆåˆ—è¡¨ï¼‰ data-autoplay falseï¼ˆæ‰‹åŠ¨æ’­æ”¾ï¼‰ trueï¼ˆè‡ªåŠ¨æ’­æ”¾ï¼‰ å“”å“©å“”å“©è§†é¢‘ å†™å¥½äº†bilibili.htmlä¸­ï¼Œåœ¨markdowné‡ŒåµŒå…¥è§†é¢‘çš„è¯ï¼Œç”¨ä»¥ä¸‹å½¢å¼å†™å°±okäº†ï¼š \u003c!DOCTYPE HTML\u003e å¦‚æœéœ€è¦æŒ‡å®špart \u003c!DOCTYPE HTML\u003e ","permalink":"https://zpc2222.github.io/posts/blog/blog-music/","summary":"æˆ‘çš„éŸ³ä¹æ­Œå• éŸ³ä¹æ’ä»¶ å†™å…¥åï¼Œæ ¹æ®idï¼Œserverè‡ªè¡Œä¿®æ”¹ï¼Œç½‘æ˜“äº‘ï¼ŒQQéŸ³ä¹ï¼Œé…·ç‹—éƒ½æ”¯æŒï¼›ç›®å‰éä¼šå‘˜å·²ç»æ— æ³•ç™½å«–å¬æ­Œäº†ï¼Œåªèƒ½å¬å…è´¹æ­Œæ›² 1 2 3","title":"éŸ³ä¹"},{"content":" æ²¸æœˆæœˆçš„åšå®¢ å…³æ³¨äº’è”ç½‘ä»¥åŠåˆ†äº«ITè½¯ä»¶å¼€å‘ç»éªŒçš„ä¸ªäººåšå®¢ ğŸ‘‰å‹é“¾æ ¼å¼ åç§°ï¼š æˆ‘çš„ä¸ªäººå°ç«™ ç½‘å€ï¼š https://zpc2222.github.io å›¾æ ‡ï¼š https://zpc2222.github.io/img/Q.gif æè¿°ï¼š ä¸€ä¸ªè®°å½•æŠ€æœ¯ã€é˜…è¯»ã€ç”Ÿæ´»çš„åšå®¢ ğŸ‘‰å‹é“¾ç”³è¯·è¦æ±‚ ç§‰æ‰¿äº’æ¢å‹é“¾åŸåˆ™ã€æ–‡ç« å®šæœŸæ›´æ–°ã€ä¸èƒ½æœ‰å¤ªå¤šå¹¿å‘Šã€ä¸ªäººæè¿°å­—æ•°æ§åˆ¶åœ¨15å­—å†…\nğŸ‘‰å¹¿å‘Šä½æ‹›ç§Ÿ ","permalink":"https://zpc2222.github.io/links/","summary":"æ²¸æœˆæœˆçš„åšå®¢ å…³æ³¨äº’è”ç½‘ä»¥åŠåˆ†äº«ITè½¯ä»¶å¼€å‘ç»éªŒçš„ä¸ªäººåšå®¢ ğŸ‘‰å‹é“¾æ ¼å¼ åç§°ï¼š æˆ‘çš„ä¸ªäººå°ç«™ ç½‘å€ï¼š https://zpc2222.github.io å›¾æ ‡ï¼š https://zpc2222.github.io/img/Q.gif æè¿°ï¼š ä¸€ä¸ªè®°å½•æŠ€æœ¯ã€é˜…è¯»ã€ç”Ÿæ´»çš„åšå®¢ ğŸ‘‰å‹","title":"ğŸ¤å‹é“¾"}]