<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Java常用工具类 | 我的个人小站</title><meta name=keywords content="netty,网络编程"><meta name=description content="一些常用的工具类，自用"><meta name=author content="
作者:&nbsp;藏锋"><link rel=canonical href=https://zpc2222.github.io/posts/tech/java%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://zpc2222.github.io/img/Q.gif><link rel=icon type=image/png sizes=16x16 href=https://zpc2222.github.io/img/Q.gif><link rel=icon type=image/png sizes=32x32 href=https://zpc2222.github.io/img/Q.gif><link rel=apple-touch-icon href=https://zpc2222.github.io/img/Q.gif><link rel=mask-icon href=https://zpc2222.github.io/img/Q.gif><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>var _hmt=_hmt||[];(function(){var e,t=document.createElement("script");t.src="",e=document.getElementsByTagName("script")[0],e.parentNode.insertBefore(t,e)})()</script><meta property="og:title" content="Java常用工具类"><meta property="og:description" content="一些常用的工具类，自用"><meta property="og:type" content="article"><meta property="og:url" content="https://zpc2222.github.io/posts/tech/java%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-09-05T00:17:58+08:00"><meta property="article:modified_time" content="2022-09-05T00:17:58+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Java常用工具类"><meta name=twitter:description content="一些常用的工具类，自用"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":2,"name":"📚文章","item":"https://zpc2222.github.io/posts/"},{"@type":"ListItem","position":3,"name":"👨🏻‍💻 技术","item":"https://zpc2222.github.io/posts/tech/"},{"@type":"ListItem","position":4,"name":"Java常用工具类","item":"https://zpc2222.github.io/posts/tech/java%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Java常用工具类","name":"Java常用工具类","description":"一些常用的工具类，自用","keywords":["netty","网络编程"],"articleBody":"IP查询的一些方法 IP_URL = “http://whois.pconline.com.cn/ipJson.jsp?ip=%s\u0026json=true\"\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 /** * 获取ip地址 */ public static String getIp(HttpServletRequest request) { String ip = request.getHeader(\"x-forwarded-for\"); if (ip == null || ip.length() == 0 || UNKNOWN.equalsIgnoreCase(ip)) { ip = request.getHeader(\"Proxy-Client-IP\"); } if (ip == null || ip.length() == 0 || UNKNOWN.equalsIgnoreCase(ip)) { ip = request.getHeader(\"WL-Proxy-Client-IP\"); } if (ip == null || ip.length() == 0 || UNKNOWN.equalsIgnoreCase(ip)) { ip = request.getRemoteAddr(); } String comma = \",\"; String localhost = \"127.0.0.1\"; if (ip.contains(comma)) { ip = ip.split(\",\")[0]; } if (localhost.equals(ip)) { // 获取本机真正的ip地址 try { ip = InetAddress.getLocalHost().getHostAddress(); } catch (UnknownHostException e) { e.printStackTrace(); } } return ip; } /** * 根据ip获取详细地址 */ public static String getCityInfo(String ip) { String api = String.format(IP_URL, ip); JSONObject object = JSONUtil.parseObj(HttpUtil.get(api)); return object.get(\"addr\", String.class); } /** * 获得当天是周几 */ public static String getWeekDay() { String[] weekDays = {\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"}; Calendar cal = Calendar.getInstance(); cal.setTime(new Date()); int w = cal.get(Calendar.DAY_OF_WEEK) - 1; if (w \u003c 0) { w = 0; } return weekDays[w]; } public static String getBrowser(HttpServletRequest request) { UserAgent userAgent = UserAgent.parseUserAgentString(request.getHeader(\"User-Agent\")); Browser browser = userAgent.getBrowser(); return browser.getName(); } /** * 导出excel */public static void downloadExcel(List\u003cMap\u003cString, Object\u003e\u003e list, HttpServletResponse response) throws IOException { String tempPath = System.getProperty(\"java.io.tmpdir\") + IdUtil.fastSimpleUUID() + \".xlsx\"; File file = new File(tempPath); BigExcelWriter writer = ExcelUtil.getBigWriter(file); // 一次性写出内容，使用默认样式，强制输出标题 writer.write(list, true); //response为HttpServletResponse对象 response.setContentType(\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8\"); //test.xls是弹出下载对话框的文件名，不能为中文，中文请自行编码 response.setHeader(\"Content-Disposition\", \"attachment;filename=file.xlsx\"); ServletOutputStream out = response.getOutputStream(); // 终止后删除临时文件 file.deleteOnExit(); writer.flush(out, true); //此处记得关闭输出Servlet流 IoUtil.close(out); } /** * 将文件名解析成文件的上传路径 */ public static File upload(MultipartFile file, String filePath) { String suffix = getExtensionName(file.getOriginalFilename()); StringBuffer nowStr = fileRename(); try { String fileName = nowStr + \".\" + suffix; String path = filePath + fileName; // getCanonicalFile 可解析正确各种路径 File dest = new File(path).getCanonicalFile(); // 检测是否存在目录 if (!dest.getParentFile().exists()) { dest.getParentFile().mkdirs(); } // 文件写入 file.transferTo(dest); return dest; } catch (Exception e) { e.printStackTrace(); } return null; } /** * MultipartFile转File */public static File toFile(MultipartFile multipartFile) { // 获取文件名 String fileName = multipartFile.getOriginalFilename(); // 获取文件后缀 String prefix = \".\" + getExtensionName(fileName); File file = null; try { // 用uuid作为文件名，防止生成的临时文件重复 file = File.createTempFile(IdUtil.simpleUUID(), prefix); // MultipartFile to File multipartFile.transferTo(file); } catch (IOException e) { e.printStackTrace(); } return file; } /** * 获取文件扩展名，不带 . */public static String getExtensionName(String filename) { if ((filename != null) \u0026\u0026 (filename.length() \u003e 0)) { int dot = filename.lastIndexOf('.'); if ((dot \u003e -1) \u0026\u0026 (dot \u003c (filename.length() - 1))) { return filename.substring(dot + 1); } } return filename; } public static String getFileType(String type) { String documents = \"txt doc pdf ppt pps xlsx xls docx\"; String music = \"mp3 wav wma mpa ram ra aac aif m4a\"; String video = \"avi mpg mpe mpeg asf wmv mov qt rm mp4 flv m4v webm ogv ogg\"; String image = \"bmp dib pcp dif wmf gif jpg tif eps psd cdr iff tga pcd mpt png jpeg\"; if (image.contains(type)) { return \"pic\"; } else if (documents.contains(type)) { return \"txt\"; } else if (music.contains(type)) { return \"music\"; } else if (video.contains(type)) { return \"vedio\"; } else { return \"other\"; } } 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 package com.ruoyi.common.core.utils.ip; import java.net.InetAddress; import java.net.UnknownHostException; import javax.servlet.http.HttpServletRequest; import com.ruoyi.common.core.utils.StringUtils; /** * 获取IP方法 * * @author zpc */public class IpUtils { /** * 获取客户端IP ** @param request 请求对象 * @return IP地址 */ public static String getIpAddr(HttpServletRequest request) { if (request == null) { return \"unknown\"; } String ip = request.getHeader(\"x-forwarded-for\"); if (ip == null || ip.length() == 0 || \"unknown\".equalsIgnoreCase(ip)) { ip = request.getHeader(\"Proxy-Client-IP\"); } if (ip == null || ip.length() == 0 || \"unknown\".equalsIgnoreCase(ip)) { ip = request.getHeader(\"X-Forwarded-For\"); } if (ip == null || ip.length() == 0 || \"unknown\".equalsIgnoreCase(ip)) { ip = request.getHeader(\"WL-Proxy-Client-IP\"); } if (ip == null || ip.length() == 0 || \"unknown\".equalsIgnoreCase(ip)) { ip = request.getHeader(\"X-Real-IP\"); } if (ip == null || ip.length() == 0 || \"unknown\".equalsIgnoreCase(ip)) { ip = request.getRemoteAddr(); } return \"0:0:0:0:0:0:0:1\".equals(ip) ? \"127.0.0.1\" : getMultistageReverseProxyIp(ip); } /** * 检查是否为内部IP地址 * * @param ip IP地址 * @return 结果 */ public static boolean internalIp(String ip) { byte[] addr = textToNumericFormatV4(ip); return internalIp(addr) || \"127.0.0.1\".equals(ip); } /** * 检查是否为内部IP地址 * * @param addr byte地址 * @return 结果 */ private static boolean internalIp(byte[] addr) { if (StringUtils.isNull(addr) || addr.length \u003c 2) { return true; } final byte b0 = addr[0]; final byte b1 = addr[1]; // 10.x.x.x/8 final byte SECTION_1 = 0x0A; // 172.16.x.x/12 final byte SECTION_2 = (byte) 0xAC; final byte SECTION_3 = (byte) 0x10; final byte SECTION_4 = (byte) 0x1F; // 192.168.x.x/16 final byte SECTION_5 = (byte) 0xC0; final byte SECTION_6 = (byte) 0xA8; switch (b0) { case SECTION_1: return true; case SECTION_2: if (b1 \u003e= SECTION_3 \u0026\u0026 b1 \u003c= SECTION_4) { return true; } case SECTION_5: switch (b1) { case SECTION_6: return true; } default: return false; } } /** * 将IPv4地址转换成字节 * * @param text IPv4地址 * @return byte 字节 */ public static byte[] textToNumericFormatV4(String text) { if (text.length() == 0) { return null; } byte[] bytes = new byte[4]; String[] elements = text.split(\"\\\\.\", -1); try { long l; int i; switch (elements.length) { case 1: l = Long.parseLong(elements[0]); if ((l \u003c 0L) || (l \u003e 4294967295L)) { return null; } bytes[0] = (byte) (int) (l \u003e\u003e 24 \u0026 0xFF); bytes[1] = (byte) (int) ((l \u0026 0xFFFFFF) \u003e\u003e 16 \u0026 0xFF); bytes[2] = (byte) (int) ((l \u0026 0xFFFF) \u003e\u003e 8 \u0026 0xFF); bytes[3] = (byte) (int) (l \u0026 0xFF); break; case 2: l = Integer.parseInt(elements[0]); if ((l \u003c 0L) || (l \u003e 255L)) { return null; } bytes[0] = (byte) (int) (l \u0026 0xFF); l = Integer.parseInt(elements[1]); if ((l \u003c 0L) || (l \u003e 16777215L)) { return null; } bytes[1] = (byte) (int) (l \u003e\u003e 16 \u0026 0xFF); bytes[2] = (byte) (int) ((l \u0026 0xFFFF) \u003e\u003e 8 \u0026 0xFF); bytes[3] = (byte) (int) (l \u0026 0xFF); break; case 3: for (i = 0; i \u003c 2; ++i) { l = Integer.parseInt(elements[i]); if ((l \u003c 0L) || (l \u003e 255L)) { return null; } bytes[i] = (byte) (int) (l \u0026 0xFF); } l = Integer.parseInt(elements[2]); if ((l \u003c 0L) || (l \u003e 65535L)) { return null; } bytes[2] = (byte) (int) (l \u003e\u003e 8 \u0026 0xFF); bytes[3] = (byte) (int) (l \u0026 0xFF); break; case 4: for (i = 0; i \u003c 4; ++i) { l = Integer.parseInt(elements[i]); if ((l \u003c 0L) || (l \u003e 255L)) { return null; } bytes[i] = (byte) (int) (l \u0026 0xFF); } break; default: return null; } } catch (NumberFormatException e) { return null; } return bytes; } /** * 获取IP地址 * * @return 本地IP地址 */ public static String getHostIp() { try { return InetAddress.getLocalHost().getHostAddress(); } catch (UnknownHostException e) { } return \"127.0.0.1\"; } /** * 获取主机名 * * @return 本地主机名 */ public static String getHostName() { try { return InetAddress.getLocalHost().getHostName(); } catch (UnknownHostException e) { } return \"未知\"; } /** * 从多级反向代理中获得第一个非unknown IP地址 * * @param ip 获得的IP地址 * @return 第一个非unknown IP地址 */ public static String getMultistageReverseProxyIp(String ip) { // 多级反向代理检测 if (ip != null \u0026\u0026 ip.indexOf(\",\") \u003e 0) { final String[] ips = ip.trim().split(\",\"); for (String subIp : ips) { if (false == isUnknown(subIp)) { ip = subIp; break; } } } return ip; } /** * 检测给定字符串是否为未知，多用于检测HTTP请求相关 * * @param checkString 被检测的字符串 * @return 是否未知 */ public static boolean isUnknown(String checkString) { return StringUtils.isBlank(checkString) || \"unknown\".equalsIgnoreCase(checkString); } } 文件流上传 1 2 3 4 5 6 7 8 9 10 11 12 13 14 long begin=System.currentTimeMillis(); InputStream fis=multipartFile.getInputStream(); dest = new File(newFileName); FileOutputStream fos=new FileOutputStream(dest); //先定义一个字节缓冲区，减少I/O次数，提高读写效率 byte[] buffer=new byte[10240]; int size=0; while((size=fis.read(buffer))!=-1){ fos.write(buffer, 0, size); } fis.close(); fos.close(); long end=System.currentTimeMillis(); log.info(\"使用文件输入流和文件输出流实现文件的复制完毕！耗时：{} 毫秒\",(end-begin)); COS文件上传 ","wordCount":"2155","inLanguage":"en","datePublished":"2022-09-05T00:17:58+08:00","dateModified":"2022-09-05T00:17:58+08:00","author":[{"@type":"Person","name":"藏锋"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://zpc2222.github.io/posts/tech/java%E5%B8%B8%E7%94%A8%E5%B7%A5%E5%85%B7%E7%B1%BB/"},"publisher":{"@type":"Organization","name":"我的个人小站","logo":{"@type":"ImageObject","url":"https://zpc2222.github.io/img/Q.gif"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><script async src=https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js></script><header class=header><nav class=nav><div class=logo><a href=https://zpc2222.github.io accesskey=h title="我的个人小站 (Alt + H)"><img src=https://zpc2222.github.io/img/Q.gif alt=logo aria-label=logo height=35>我的个人小站</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://zpc2222.github.io/search title="🔍 搜索 (Alt + /)" accesskey=/><span>🔍 搜索</span></a></li><li><a href=https://zpc2222.github.io/ title="🏠 主页"><span>🏠 主页</span></a></li><li><a href=https://zpc2222.github.io/posts title="📚 文章"><span>📚 文章</span></a></li><li><a href=https://zpc2222.github.io/tags title="🧩 标签"><span>🧩 标签</span></a></li><li><a href=https://zpc2222.github.io/archives/ title="⏱ 时间轴"><span>⏱ 时间轴</span></a></li><li><a href=https://zpc2222.github.io/music title="🎵 听听歌"><span>🎵 听听歌</span></a></li><li><a href=https://zpc2222.github.io/about title="🙋🏻‍♂️ 关于"><span>🙋🏻‍♂️ 关于</span></a></li><li><a href=https://zpc2222.github.io/links title="🤝 友链"><span>🤝 友链</span></a></li></ul></nav></header><main class="main page"><article class=post-single><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://zpc2222.github.io>主页</a>&nbsp;»&nbsp;<a href=https://zpc2222.github.io/posts/>📚文章</a>&nbsp;»&nbsp;<a href=https://zpc2222.github.io/posts/tech/>👨🏻‍💻 技术</a></div><h1 class=post-title>Java常用工具类</h1><div class=post-description>一些常用的工具类，自用</div><div class=post-meta>创建:&nbsp;<span title='2022-09-05 00:17:58 +0800 +0800'>2022-09-05</span>&nbsp;|&nbsp;更新:&nbsp;2022-09-05&nbsp;|&nbsp;字数:&nbsp;2155字&nbsp;|&nbsp;时长:&nbsp;5分钟&nbsp;|&nbsp;
作者:&nbsp;藏锋
&nbsp;|&nbsp;标签: &nbsp;<ul class=post-tags-meta><a href=https://zpc2222.github.io/tags/java/>java</a>
<a href=https://zpc2222.github.io/tags/%E5%B7%A5%E5%85%B7%E7%B1%BB/>、工具类</a></ul><span id=busuanzi_container_page_pv>&nbsp;| 访问: <span id=busuanzi_value_page_pv></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>文章目录</span></summary><div class=inner><ul><li><a href=#ip%e6%9f%a5%e8%af%a2%e7%9a%84%e4%b8%80%e4%ba%9b%e6%96%b9%e6%b3%95 aria-label=IP查询的一些方法>IP查询的一些方法</a></li><li><a href=#%e6%96%87%e4%bb%b6%e6%b5%81%e4%b8%8a%e4%bc%a0 aria-label=文件流上传>文件流上传</a></li><li><a href=#cos%e6%96%87%e4%bb%b6%e4%b8%8a%e4%bc%a0 aria-label=COS文件上传>COS文件上传</a></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")})},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><h1 id=ip查询的一些方法>IP查询的一些方法<a hidden class=anchor aria-hidden=true href=#ip查询的一些方法>#</a></h1><p>IP_URL = &ldquo;<a href="http://whois.pconline.com.cn/ipJson.jsp?ip=%25s&json=true%22">http://whois.pconline.com.cn/ipJson.jsp?ip=%s&json=true"</a></p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">100
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">101
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">102
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">103
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">104
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">105
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">106
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">107
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">108
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">109
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">110
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">111
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">112
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">113
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">114
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">115
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">116
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">117
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">118
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">119
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">120
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">121
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">122
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">123
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">124
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">125
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">126
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">127
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">128
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">129
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">130
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">131
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">132
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">133
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">134
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">135
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">136
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">137
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">138
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">139
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">140
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">141
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">142
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">143
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">144
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">145
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">146
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">147
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">148
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">149
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">150
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">151
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">152
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">153
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>* 获取ip地址  
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getIp</span><span style=color:#f92672>(</span>HttpServletRequest request<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>   String ip <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;x-forwarded-for&#34;</span><span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>ip <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>||</span> ip<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> 0 <span style=color:#f92672>||</span> UNKNOWN<span style=color:#f92672>.</span><span style=color:#a6e22e>equalsIgnoreCase</span><span style=color:#f92672>(</span>ip<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>       ip <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Proxy-Client-IP&#34;</span><span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>ip <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>||</span> ip<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> 0 <span style=color:#f92672>||</span> UNKNOWN<span style=color:#f92672>.</span><span style=color:#a6e22e>equalsIgnoreCase</span><span style=color:#f92672>(</span>ip<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>       ip <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;WL-Proxy-Client-IP&#34;</span><span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>ip <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>||</span> ip<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> 0 <span style=color:#f92672>||</span> UNKNOWN<span style=color:#f92672>.</span><span style=color:#a6e22e>equalsIgnoreCase</span><span style=color:#f92672>(</span>ip<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>       ip <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span><span style=color:#a6e22e>getRemoteAddr</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>   String comma <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;,&#34;</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>   String localhost <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;127.0.0.1&#34;</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>ip<span style=color:#f92672>.</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>comma<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>       ip <span style=color:#f92672>=</span> ip<span style=color:#f92672>.</span><span style=color:#a6e22e>split</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;,&#34;</span><span style=color:#f92672>)[</span>0<span style=color:#f92672>];</span>  
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>localhost<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>ip<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#75715e>// 获取本机真正的ip地址  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>       <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>           ip <span style=color:#f92672>=</span> InetAddress<span style=color:#f92672>.</span><span style=color:#a6e22e>getLocalHost</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getHostAddress</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>       <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>UnknownHostException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>           e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>       <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>return</span> ip<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>* 根据ip获取详细地址  
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getCityInfo</span><span style=color:#f92672>(</span>String ip<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>   String api <span style=color:#f92672>=</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>format</span><span style=color:#f92672>(</span>IP_URL<span style=color:#f92672>,</span> ip<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>   JSONObject object <span style=color:#f92672>=</span> JSONUtil<span style=color:#f92672>.</span><span style=color:#a6e22e>parseObj</span><span style=color:#f92672>(</span>HttpUtil<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>api<span style=color:#f92672>));</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>return</span> object<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;addr&#34;</span><span style=color:#f92672>,</span> String<span style=color:#f92672>.</span><span style=color:#a6e22e>class</span><span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>* 获得当天是周几  
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getWeekDay</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>   String<span style=color:#f92672>[]</span> weekDays <span style=color:#f92672>=</span> <span style=color:#f92672>{</span><span style=color:#e6db74>&#34;Sun&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Mon&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Tue&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Wed&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Thu&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Fri&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;Sat&#34;</span><span style=color:#f92672>};</span>  
</span></span><span style=display:flex><span>   Calendar cal <span style=color:#f92672>=</span> Calendar<span style=color:#f92672>.</span><span style=color:#a6e22e>getInstance</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>   cal<span style=color:#f92672>.</span><span style=color:#a6e22e>setTime</span><span style=color:#f92672>(</span><span style=color:#66d9ef>new</span> Date<span style=color:#f92672>());</span>  
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>int</span> w <span style=color:#f92672>=</span> cal<span style=color:#f92672>.</span><span style=color:#a6e22e>get</span><span style=color:#f92672>(</span>Calendar<span style=color:#f92672>.</span><span style=color:#a6e22e>DAY_OF_WEEK</span><span style=color:#f92672>)</span> <span style=color:#f92672>-</span> 1<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>w <span style=color:#f92672>&lt;</span> 0<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>       w <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>return</span> weekDays<span style=color:#f92672>[</span>w<span style=color:#f92672>];</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getBrowser</span><span style=color:#f92672>(</span>HttpServletRequest request<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>   UserAgent userAgent <span style=color:#f92672>=</span> UserAgent<span style=color:#f92672>.</span><span style=color:#a6e22e>parseUserAgentString</span><span style=color:#f92672>(</span>request<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;User-Agent&#34;</span><span style=color:#f92672>));</span>  
</span></span><span style=display:flex><span>   Browser browser <span style=color:#f92672>=</span> userAgent<span style=color:#f92672>.</span><span style=color:#a6e22e>getBrowser</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>return</span> browser<span style=color:#f92672>.</span><span style=color:#a6e22e>getName</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>* 导出excel  
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>void</span> <span style=color:#a6e22e>downloadExcel</span><span style=color:#f92672>(</span>List<span style=color:#f92672>&lt;</span>Map<span style=color:#f92672>&lt;</span>String<span style=color:#f92672>,</span> Object<span style=color:#f92672>&gt;&gt;</span> list<span style=color:#f92672>,</span> HttpServletResponse response<span style=color:#f92672>)</span> <span style=color:#66d9ef>throws</span> IOException <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>   String tempPath <span style=color:#f92672>=</span> System<span style=color:#f92672>.</span><span style=color:#a6e22e>getProperty</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;java.io.tmpdir&#34;</span><span style=color:#f92672>)</span> <span style=color:#f92672>+</span> IdUtil<span style=color:#f92672>.</span><span style=color:#a6e22e>fastSimpleUUID</span><span style=color:#f92672>()</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;.xlsx&#34;</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>   File file <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> File<span style=color:#f92672>(</span>tempPath<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>   BigExcelWriter writer <span style=color:#f92672>=</span> ExcelUtil<span style=color:#f92672>.</span><span style=color:#a6e22e>getBigWriter</span><span style=color:#f92672>(</span>file<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>   <span style=color:#75715e>// 一次性写出内容，使用默认样式，强制输出标题  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>   writer<span style=color:#f92672>.</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span>list<span style=color:#f92672>,</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>   <span style=color:#75715e>//response为HttpServletResponse对象  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>   response<span style=color:#f92672>.</span><span style=color:#a6e22e>setContentType</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=utf-8&#34;</span><span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>   <span style=color:#75715e>//test.xls是弹出下载对话框的文件名，不能为中文，中文请自行编码  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>   response<span style=color:#f92672>.</span><span style=color:#a6e22e>setHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Content-Disposition&#34;</span><span style=color:#f92672>,</span> <span style=color:#e6db74>&#34;attachment;filename=file.xlsx&#34;</span><span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>   ServletOutputStream out <span style=color:#f92672>=</span> response<span style=color:#f92672>.</span><span style=color:#a6e22e>getOutputStream</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>   <span style=color:#75715e>// 终止后删除临时文件  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>   file<span style=color:#f92672>.</span><span style=color:#a6e22e>deleteOnExit</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>   writer<span style=color:#f92672>.</span><span style=color:#a6e22e>flush</span><span style=color:#f92672>(</span>out<span style=color:#f92672>,</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>   <span style=color:#75715e>//此处记得关闭输出Servlet流  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>   IoUtil<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>(</span>out<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>* 将文件名解析成文件的上传路径  
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span>  
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> File <span style=color:#a6e22e>upload</span><span style=color:#f92672>(</span>MultipartFile file<span style=color:#f92672>,</span> String filePath<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>    
</span></span><span style=display:flex><span>   String suffix <span style=color:#f92672>=</span> getExtensionName<span style=color:#f92672>(</span>file<span style=color:#f92672>.</span><span style=color:#a6e22e>getOriginalFilename</span><span style=color:#f92672>());</span>  
</span></span><span style=display:flex><span>   StringBuffer nowStr <span style=color:#f92672>=</span> fileRename<span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>       String fileName <span style=color:#f92672>=</span> nowStr <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34;.&#34;</span> <span style=color:#f92672>+</span> suffix<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>       String path <span style=color:#f92672>=</span> filePath <span style=color:#f92672>+</span> fileName<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>       <span style=color:#75715e>// getCanonicalFile 可解析正确各种路径  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>       File dest <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> File<span style=color:#f92672>(</span>path<span style=color:#f92672>).</span><span style=color:#a6e22e>getCanonicalFile</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>       <span style=color:#75715e>// 检测是否存在目录  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>       <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>dest<span style=color:#f92672>.</span><span style=color:#a6e22e>getParentFile</span><span style=color:#f92672>().</span><span style=color:#a6e22e>exists</span><span style=color:#f92672>())</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>           dest<span style=color:#f92672>.</span><span style=color:#a6e22e>getParentFile</span><span style=color:#f92672>().</span><span style=color:#a6e22e>mkdirs</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>       <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>       <span style=color:#75715e>// 文件写入  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>       file<span style=color:#f92672>.</span><span style=color:#a6e22e>transferTo</span><span style=color:#f92672>(</span>dest<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>return</span> dest<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>Exception e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>       e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>* MultipartFile转File  
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> File <span style=color:#a6e22e>toFile</span><span style=color:#f92672>(</span>MultipartFile multipartFile<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>   <span style=color:#75715e>// 获取文件名  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>   String fileName <span style=color:#f92672>=</span> multipartFile<span style=color:#f92672>.</span><span style=color:#a6e22e>getOriginalFilename</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>   <span style=color:#75715e>// 获取文件后缀  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>   String prefix <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;.&#34;</span> <span style=color:#f92672>+</span> getExtensionName<span style=color:#f92672>(</span>fileName<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>   File file <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>try</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#75715e>// 用uuid作为文件名，防止生成的临时文件重复  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>       file <span style=color:#f92672>=</span> File<span style=color:#f92672>.</span><span style=color:#a6e22e>createTempFile</span><span style=color:#f92672>(</span>IdUtil<span style=color:#f92672>.</span><span style=color:#a6e22e>simpleUUID</span><span style=color:#f92672>(),</span> prefix<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>       <span style=color:#75715e>// MultipartFile to File  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>       multipartFile<span style=color:#f92672>.</span><span style=color:#a6e22e>transferTo</span><span style=color:#f92672>(</span>file<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span> <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>IOException e<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>       e<span style=color:#f92672>.</span><span style=color:#a6e22e>printStackTrace</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>return</span> file<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span><span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>* 获取文件扩展名，不带 .  
</span></span></span><span style=display:flex><span><span style=color:#75715e>*/</span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getExtensionName</span><span style=color:#f92672>(</span>String filename<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>if</span> <span style=color:#f92672>((</span>filename <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>(</span>filename<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>()</span> <span style=color:#f92672>&gt;</span> 0<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>int</span> dot <span style=color:#f92672>=</span> filename<span style=color:#f92672>.</span><span style=color:#a6e22e>lastIndexOf</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#39;.&#39;</span><span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>if</span> <span style=color:#f92672>((</span>dot <span style=color:#f92672>&gt;</span> <span style=color:#f92672>-</span>1<span style=color:#f92672>)</span> <span style=color:#f92672>&amp;&amp;</span> <span style=color:#f92672>(</span>dot <span style=color:#f92672>&lt;</span> <span style=color:#f92672>(</span>filename<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>()</span> <span style=color:#f92672>-</span> 1<span style=color:#f92672>)))</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>           <span style=color:#66d9ef>return</span> filename<span style=color:#f92672>.</span><span style=color:#a6e22e>substring</span><span style=color:#f92672>(</span>dot <span style=color:#f92672>+</span> 1<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>       <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>return</span> filename<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getFileType</span><span style=color:#f92672>(</span>String type<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>   String documents <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;txt doc pdf ppt pps xlsx xls docx&#34;</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>   String music <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;mp3 wav wma mpa ram ra aac aif m4a&#34;</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>   String video <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;avi mpg mpe mpeg asf wmv mov qt rm mp4 flv m4v webm ogv ogg&#34;</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>   String image <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;bmp dib pcp dif wmf gif jpg tif eps psd cdr iff tga pcd mpt png jpeg&#34;</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>   <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>image<span style=color:#f92672>.</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>type<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;pic&#34;</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>documents<span style=color:#f92672>.</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>type<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;txt&#34;</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>music<span style=color:#f92672>.</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>type<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;music&#34;</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>video<span style=color:#f92672>.</span><span style=color:#a6e22e>contains</span><span style=color:#f92672>(</span>type<span style=color:#f92672>))</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;vedio&#34;</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span> <span style=color:#66d9ef>else</span> <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>       <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;other&#34;</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>   <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">100
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">101
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">102
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">103
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">104
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">105
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">106
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">107
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">108
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">109
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">110
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">111
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">112
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">113
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">114
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">115
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">116
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">117
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">118
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">119
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">120
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">121
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">122
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">123
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">124
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">125
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">126
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">127
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">128
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">129
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">130
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">131
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">132
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">133
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">134
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">135
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">136
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">137
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">138
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">139
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">140
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">141
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">142
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">143
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">144
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">145
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">146
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">147
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">148
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">149
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">150
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">151
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">152
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">153
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">154
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">155
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">156
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">157
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">158
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">159
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">160
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">161
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">162
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">163
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">164
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">165
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">166
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">167
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">168
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">169
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">170
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">171
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">172
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">173
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">174
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">175
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">176
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">177
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">178
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">179
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">180
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">181
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">182
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">183
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">184
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">185
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">186
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">187
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">188
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">189
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">190
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">191
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">192
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">193
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">194
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">195
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">196
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">197
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">198
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">199
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">200
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">201
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">202
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">203
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">204
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">205
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">206
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">207
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">208
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">209
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">210
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">211
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">212
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">213
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">214
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">215
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">216
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">217
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">218
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">219
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">220
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">221
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">222
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">223
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">224
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">225
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">226
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">227
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">228
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">229
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">230
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">231
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">232
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">233
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">234
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">235
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">236
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">237
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">238
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">239
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">240
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">241
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">242
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">243
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">244
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">245
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">246
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">247
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">248
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">249
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">250
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">251
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">252
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">253
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">254
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">255
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">256
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">257
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=display:flex><span><span style=color:#f92672>package</span> com.ruoyi.common.core.utils.ip<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.net.InetAddress<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> java.net.UnknownHostException<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> javax.servlet.http.HttpServletRequest<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> com.ruoyi.common.core.utils.StringUtils<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span><span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e> * 获取IP方法  
</span></span></span><span style=display:flex><span><span style=color:#75715e> *   
</span></span></span><span style=display:flex><span><span style=color:#75715e>* @author zpc  
</span></span></span><span style=display:flex><span><span style=color:#75715e> */</span><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>IpUtils</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 获取客户端IP  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     ** @param request 请求对象  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return IP地址  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getIpAddr</span><span style=color:#f92672>(</span>HttpServletRequest request<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>request <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>        String ip <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;x-forwarded-for&#34;</span><span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>ip <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>||</span> ip<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> 0 <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equalsIgnoreCase</span><span style=color:#f92672>(</span>ip<span style=color:#f92672>))</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>            ip <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;Proxy-Client-IP&#34;</span><span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>ip <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>||</span> ip<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> 0 <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equalsIgnoreCase</span><span style=color:#f92672>(</span>ip<span style=color:#f92672>))</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>            ip <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;X-Forwarded-For&#34;</span><span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>ip <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>||</span> ip<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> 0 <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equalsIgnoreCase</span><span style=color:#f92672>(</span>ip<span style=color:#f92672>))</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>            ip <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;WL-Proxy-Client-IP&#34;</span><span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>ip <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>||</span> ip<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> 0 <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equalsIgnoreCase</span><span style=color:#f92672>(</span>ip<span style=color:#f92672>))</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>            ip <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span><span style=color:#a6e22e>getHeader</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;X-Real-IP&#34;</span><span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>ip <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>||</span> ip<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> 0 <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equalsIgnoreCase</span><span style=color:#f92672>(</span>ip<span style=color:#f92672>))</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>            ip <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span><span style=color:#a6e22e>getRemoteAddr</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;0:0:0:0:0:0:0:1&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>ip<span style=color:#f92672>)</span> <span style=color:#f92672>?</span> <span style=color:#e6db74>&#34;127.0.0.1&#34;</span> <span style=color:#f92672>:</span> getMultistageReverseProxyIp<span style=color:#f92672>(</span>ip<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 检查是否为内部IP地址  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *   
</span></span></span><span style=display:flex><span><span style=color:#75715e>* @param ip IP地址  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return 结果  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>internalIp</span><span style=color:#f92672>(</span>String ip<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> addr <span style=color:#f92672>=</span> textToNumericFormatV4<span style=color:#f92672>(</span>ip<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> internalIp<span style=color:#f92672>(</span>addr<span style=color:#f92672>)</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;127.0.0.1&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span>ip<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 检查是否为内部IP地址  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *   
</span></span></span><span style=display:flex><span><span style=color:#75715e>* @param addr byte地址  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return 结果  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>private</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>internalIp</span><span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> addr<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>StringUtils<span style=color:#f92672>.</span><span style=color:#a6e22e>isNull</span><span style=color:#f92672>(</span>addr<span style=color:#f92672>)</span> <span style=color:#f92672>||</span> addr<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span> <span style=color:#f92672>&lt;</span> 2<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>byte</span> b0 <span style=color:#f92672>=</span> addr<span style=color:#f92672>[</span>0<span style=color:#f92672>];</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>byte</span> b1 <span style=color:#f92672>=</span> addr<span style=color:#f92672>[</span>1<span style=color:#f92672>];</span>  
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 10.x.x.x/8  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>byte</span> SECTION_1 <span style=color:#f92672>=</span> 0x0A<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 172.16.x.x/12  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>byte</span> SECTION_2 <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> 0xAC<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>byte</span> SECTION_3 <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> 0x10<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>byte</span> SECTION_4 <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> 0x1F<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 192.168.x.x/16  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>byte</span> SECTION_5 <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> 0xC0<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>final</span> <span style=color:#66d9ef>byte</span> SECTION_6 <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> 0xA8<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>switch</span> <span style=color:#f92672>(</span>b0<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>case</span> SECTION_1<span style=color:#f92672>:</span>  
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>case</span> SECTION_2<span style=color:#f92672>:</span>  
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>b1 <span style=color:#f92672>&gt;=</span> SECTION_3 <span style=color:#f92672>&amp;&amp;</span> b1 <span style=color:#f92672>&lt;=</span> SECTION_4<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>case</span> SECTION_5<span style=color:#f92672>:</span>  
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>switch</span> <span style=color:#f92672>(</span>b1<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>case</span> SECTION_6<span style=color:#f92672>:</span>  
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>true</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>                <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span>  
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>false</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 将IPv4地址转换成字节  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *   
</span></span></span><span style=display:flex><span><span style=color:#75715e>* @param text IPv4地址  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return byte 字节  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> <span style=color:#a6e22e>textToNumericFormatV4</span><span style=color:#f92672>(</span>String text<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>text<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>()</span> <span style=color:#f92672>==</span> 0<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> bytes <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[</span>4<span style=color:#f92672>];</span>  
</span></span><span style=display:flex><span>        String<span style=color:#f92672>[]</span> elements <span style=color:#f92672>=</span> text<span style=color:#f92672>.</span><span style=color:#a6e22e>split</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;\\.&#34;</span><span style=color:#f92672>,</span> <span style=color:#f92672>-</span>1<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>long</span> l<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>int</span> i<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>switch</span> <span style=color:#f92672>(</span>elements<span style=color:#f92672>.</span><span style=color:#a6e22e>length</span><span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>case</span> 1<span style=color:#f92672>:</span>  
</span></span><span style=display:flex><span>                    l <span style=color:#f92672>=</span> Long<span style=color:#f92672>.</span><span style=color:#a6e22e>parseLong</span><span style=color:#f92672>(</span>elements<span style=color:#f92672>[</span>0<span style=color:#f92672>]);</span>  
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>((</span>l <span style=color:#f92672>&lt;</span> 0L<span style=color:#f92672>)</span> <span style=color:#f92672>||</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>&gt;</span> 4294967295L<span style=color:#f92672>))</span>  
</span></span><span style=display:flex><span>                    <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>                    bytes<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>&gt;&gt;</span> 24 <span style=color:#f92672>&amp;</span> 0xFF<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>                    bytes<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> <span style=color:#f92672>((</span>l <span style=color:#f92672>&amp;</span> 0xFFFFFF<span style=color:#f92672>)</span> <span style=color:#f92672>&gt;&gt;</span> 16 <span style=color:#f92672>&amp;</span> 0xFF<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>                    bytes<span style=color:#f92672>[</span>2<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> <span style=color:#f92672>((</span>l <span style=color:#f92672>&amp;</span> 0xFFFF<span style=color:#f92672>)</span> <span style=color:#f92672>&gt;&gt;</span> 8 <span style=color:#f92672>&amp;</span> 0xFF<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>                    bytes<span style=color:#f92672>[</span>3<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>&amp;</span> 0xFF<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>                <span style=color:#66d9ef>case</span> 2<span style=color:#f92672>:</span>  
</span></span><span style=display:flex><span>                    l <span style=color:#f92672>=</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>parseInt</span><span style=color:#f92672>(</span>elements<span style=color:#f92672>[</span>0<span style=color:#f92672>]);</span>  
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>((</span>l <span style=color:#f92672>&lt;</span> 0L<span style=color:#f92672>)</span> <span style=color:#f92672>||</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>&gt;</span> 255L<span style=color:#f92672>))</span>  
</span></span><span style=display:flex><span>                    <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>                    bytes<span style=color:#f92672>[</span>0<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>&amp;</span> 0xFF<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>                    l <span style=color:#f92672>=</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>parseInt</span><span style=color:#f92672>(</span>elements<span style=color:#f92672>[</span>1<span style=color:#f92672>]);</span>  
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>((</span>l <span style=color:#f92672>&lt;</span> 0L<span style=color:#f92672>)</span> <span style=color:#f92672>||</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>&gt;</span> 16777215L<span style=color:#f92672>))</span>  
</span></span><span style=display:flex><span>                    <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>                    bytes<span style=color:#f92672>[</span>1<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>&gt;&gt;</span> 16 <span style=color:#f92672>&amp;</span> 0xFF<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>                    bytes<span style=color:#f92672>[</span>2<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> <span style=color:#f92672>((</span>l <span style=color:#f92672>&amp;</span> 0xFFFF<span style=color:#f92672>)</span> <span style=color:#f92672>&gt;&gt;</span> 8 <span style=color:#f92672>&amp;</span> 0xFF<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>                    bytes<span style=color:#f92672>[</span>3<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>&amp;</span> 0xFF<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>                <span style=color:#66d9ef>case</span> 3<span style=color:#f92672>:</span>  
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> 2<span style=color:#f92672>;</span> <span style=color:#f92672>++</span>i<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>                    <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>                        l <span style=color:#f92672>=</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>parseInt</span><span style=color:#f92672>(</span>elements<span style=color:#f92672>[</span>i<span style=color:#f92672>]);</span>  
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>if</span> <span style=color:#f92672>((</span>l <span style=color:#f92672>&lt;</span> 0L<span style=color:#f92672>)</span> <span style=color:#f92672>||</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>&gt;</span> 255L<span style=color:#f92672>))</span>  
</span></span><span style=display:flex><span>                        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>                            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>                        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>                        bytes<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>&amp;</span> 0xFF<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>                    l <span style=color:#f92672>=</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>parseInt</span><span style=color:#f92672>(</span>elements<span style=color:#f92672>[</span>2<span style=color:#f92672>]);</span>  
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>if</span> <span style=color:#f92672>((</span>l <span style=color:#f92672>&lt;</span> 0L<span style=color:#f92672>)</span> <span style=color:#f92672>||</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>&gt;</span> 65535L<span style=color:#f92672>))</span>  
</span></span><span style=display:flex><span>                    <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>                    bytes<span style=color:#f92672>[</span>2<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>&gt;&gt;</span> 8 <span style=color:#f92672>&amp;</span> 0xFF<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>                    bytes<span style=color:#f92672>[</span>3<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>&amp;</span> 0xFF<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>                <span style=color:#66d9ef>case</span> 4<span style=color:#f92672>:</span>  
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>i <span style=color:#f92672>=</span> 0<span style=color:#f92672>;</span> i <span style=color:#f92672>&lt;</span> 4<span style=color:#f92672>;</span> <span style=color:#f92672>++</span>i<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>                    <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>                        l <span style=color:#f92672>=</span> Integer<span style=color:#f92672>.</span><span style=color:#a6e22e>parseInt</span><span style=color:#f92672>(</span>elements<span style=color:#f92672>[</span>i<span style=color:#f92672>]);</span>  
</span></span><span style=display:flex><span>                        <span style=color:#66d9ef>if</span> <span style=color:#f92672>((</span>l <span style=color:#f92672>&lt;</span> 0L<span style=color:#f92672>)</span> <span style=color:#f92672>||</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>&gt;</span> 255L<span style=color:#f92672>))</span>  
</span></span><span style=display:flex><span>                        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>                            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>                        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>                        bytes<span style=color:#f92672>[</span>i<span style=color:#f92672>]</span> <span style=color:#f92672>=</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>byte</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>int</span><span style=color:#f92672>)</span> <span style=color:#f92672>(</span>l <span style=color:#f92672>&amp;</span> 0xFF<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>                    <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>default</span><span style=color:#f92672>:</span>  
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>NumberFormatException e<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>null</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> bytes<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 获取IP地址  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *   
</span></span></span><span style=display:flex><span><span style=color:#75715e>* @return 本地IP地址  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getHostIp</span><span style=color:#f92672>()</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> InetAddress<span style=color:#f92672>.</span><span style=color:#a6e22e>getLocalHost</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getHostAddress</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>UnknownHostException e<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;127.0.0.1&#34;</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 获取主机名  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *   
</span></span></span><span style=display:flex><span><span style=color:#75715e>* @return 本地主机名  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getHostName</span><span style=color:#f92672>()</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> InetAddress<span style=color:#f92672>.</span><span style=color:#a6e22e>getLocalHost</span><span style=color:#f92672>().</span><span style=color:#a6e22e>getHostName</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>catch</span> <span style=color:#f92672>(</span>UnknownHostException e<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;未知&#34;</span><span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 从多级反向代理中获得第一个非unknown IP地址  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param ip 获得的IP地址  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return 第一个非unknown IP地址  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> String <span style=color:#a6e22e>getMultistageReverseProxyIp</span><span style=color:#f92672>(</span>String ip<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>        <span style=color:#75715e>// 多级反向代理检测  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>ip <span style=color:#f92672>!=</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>&amp;&amp;</span> ip<span style=color:#f92672>.</span><span style=color:#a6e22e>indexOf</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;,&#34;</span><span style=color:#f92672>)</span> <span style=color:#f92672>&gt;</span> 0<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>final</span> String<span style=color:#f92672>[]</span> ips <span style=color:#f92672>=</span> ip<span style=color:#f92672>.</span><span style=color:#a6e22e>trim</span><span style=color:#f92672>().</span><span style=color:#a6e22e>split</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;,&#34;</span><span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>for</span> <span style=color:#f92672>(</span>String subIp <span style=color:#f92672>:</span> ips<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>            <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span><span style=color:#66d9ef>false</span> <span style=color:#f92672>==</span> isUnknown<span style=color:#f92672>(</span>subIp<span style=color:#f92672>))</span>  
</span></span><span style=display:flex><span>                <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>                    ip <span style=color:#f92672>=</span> subIp<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>break</span><span style=color:#f92672>;</span>                <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>            <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>        <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> ip<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>    <span style=color:#75715e>/**  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * 检测给定字符串是否为未知，多用于检测HTTP请求相关  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     *  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @param checkString 被检测的字符串  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     * @return 是否未知  
</span></span></span><span style=display:flex><span><span style=color:#75715e>     */</span>  
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> <span style=color:#66d9ef>boolean</span> <span style=color:#a6e22e>isUnknown</span><span style=color:#f92672>(</span>String checkString<span style=color:#f92672>)</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span>  
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> StringUtils<span style=color:#f92672>.</span><span style=color:#a6e22e>isBlank</span><span style=color:#f92672>(</span>checkString<span style=color:#f92672>)</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;unknown&#34;</span><span style=color:#f92672>.</span><span style=color:#a6e22e>equalsIgnoreCase</span><span style=color:#f92672>(</span>checkString<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span>    <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></td></tr></table></div></div><h1 id=文件流上传>文件流上传<a hidden class=anchor aria-hidden=true href=#文件流上传>#</a></h1><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="white-space:pre;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=display:flex><span> <span style=color:#66d9ef>long</span> begin<span style=color:#f92672>=</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>currentTimeMillis</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span> InputStream fis<span style=color:#f92672>=</span>multipartFile<span style=color:#f92672>.</span><span style=color:#a6e22e>getInputStream</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span> dest <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> File<span style=color:#f92672>(</span>newFileName<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span> FileOutputStream fos<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> FileOutputStream<span style=color:#f92672>(</span>dest<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span> <span style=color:#75715e>//先定义一个字节缓冲区，减少I/O次数，提高读写效率  
</span></span></span><span style=display:flex><span><span style=color:#75715e></span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[]</span> buffer<span style=color:#f92672>=</span><span style=color:#66d9ef>new</span> <span style=color:#66d9ef>byte</span><span style=color:#f92672>[</span>10240<span style=color:#f92672>];</span>  
</span></span><span style=display:flex><span> <span style=color:#66d9ef>int</span> size<span style=color:#f92672>=</span>0<span style=color:#f92672>;</span>  
</span></span><span style=display:flex><span> <span style=color:#66d9ef>while</span><span style=color:#f92672>((</span>size<span style=color:#f92672>=</span>fis<span style=color:#f92672>.</span><span style=color:#a6e22e>read</span><span style=color:#f92672>(</span>buffer<span style=color:#f92672>))!=-</span>1<span style=color:#f92672>){</span>  
</span></span><span style=display:flex><span>     fos<span style=color:#f92672>.</span><span style=color:#a6e22e>write</span><span style=color:#f92672>(</span>buffer<span style=color:#f92672>,</span> 0<span style=color:#f92672>,</span> size<span style=color:#f92672>);</span>  
</span></span><span style=display:flex><span> <span style=color:#f92672>}</span>  
</span></span><span style=display:flex><span> fis<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span> fos<span style=color:#f92672>.</span><span style=color:#a6e22e>close</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span> <span style=color:#66d9ef>long</span> end<span style=color:#f92672>=</span>System<span style=color:#f92672>.</span><span style=color:#a6e22e>currentTimeMillis</span><span style=color:#f92672>();</span>  
</span></span><span style=display:flex><span>log<span style=color:#f92672>.</span><span style=color:#a6e22e>info</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;使用文件输入流和文件输出流实现文件的复制完毕！耗时：{} 毫秒&#34;</span><span style=color:#f92672>,(</span>end<span style=color:#f92672>-</span>begin<span style=color:#f92672>));</span>
</span></span></code></pre></td></tr></table></div></div><h1 id=cos文件上传>COS文件上传<a hidden class=anchor aria-hidden=true href=#cos文件上传>#</a></h1></div><div style="padding:10px 0;margin:20px auto;width:100%;font-size:16px;text-align:center">☕ 请我喝杯咖啡吧 ヾ(^▽^*)))
<button id=rewardButton disable=enable onclick='var qr=document.getElementById("QR");qr.style.display==="none"?qr.style.display="block":qr.style.display="none"'>
<span>打赏</span></button><div id=QR style=display:none><div id=wechat style=display:inline-block><a class=fancybox rel=group><img id=wechat_qr src=https://zpc2222.github.io/img/wechat-pay.jpg alt="WeChat Pay" style=width:280px;height:280px></a><p>微信</p></div><div id=alipay style=display:inline-block><a class=fancybox rel=group><img id=alipay_qr src=https://zpc2222.github.io/img/ali-pay.jpg alt=Alipay style=width:280px;height:280px></a><p>支付宝</p></div></div></div><footer class=post-footer><nav class=paginav><a class=prev href=https://zpc2222.github.io/posts/tech/cron%E8%A1%A8%E8%BE%BE%E5%BC%8F/><span class=title>« 上一页</span><br><span>cron表达式</span></a>
<a class=next href=https://zpc2222.github.io/posts/tech/jvm%E5%88%86%E6%9E%90/><span class=title>下一页 »</span><br><span>JVM分析</span></a></nav></footer></div><div><div class=pagination__title><span class=pagination__title-h style=font-size:20px>💬评论</span><hr></div><div id=tcomment></div><script src=https://cdn.staticfile.org/twikoo/1.6.7/twikoo.all.min.js></script><script>twikoo.init({envId:"https://vercel-zpc2222.vercel.app",el:"#tcomment",lang:"zh-CN",region:null,path:window.TWIKOO_MAGIC_PATH||window.location.pathname})</script></div></article></main><script async src=//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js></script><footer class=footer><span>Copyright
&copy;
2022-2022
<a href=https://zpc2222.github.io style=color:#939393>我的个人小站</a>
All Rights Reserved</span>
<span id=busuanzi_container><link rel=stylesheet href=//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css>总访客数: <i class="fa fa-user"></i><span id=busuanzi_value_site_uv></span>
总访问量: <i class="fa fa-eye"></i><span id=busuanzi_value_site_pv></span></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg><span id=read_progress></span></span></a>
<script>document.addEventListener("scroll",function(){const t=document.getElementById("read_progress"),n=document.documentElement.scrollHeight,s=document.documentElement.clientHeight,o=document.documentElement.scrollTop||document.body.scrollTop;t.innerText=((o/(n-s)).toFixed(2)*100).toFixed(0)})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>400||document.documentElement.scrollTop>400?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.body.addEventListener("copy",function(e){if(window.getSelection().toString()&&window.getSelection().toString().length>50){let t=e.clipboardData||window.clipboardData;if(t){e.preventDefault();let n=window.getSelection().toString()+`

————————————————
版权声明：本文为「我的个人小站」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：`+location.href,s=window.getSelection().toString()+`

————————————————
版权声明：本文为「我的个人小站」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：`+location.href;t.setData("text/html",n),t.setData("text/plain",s)}}})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="📄复制";function s(){t.innerText="👌🏻已复制!",setTimeout(()=>{t.innerText="📄复制"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){let t=e.textContent+`
————————————————
版权声明：本文为「我的个人小站」的原创文章，遵循CC 4.0 BY-SA版权协议，转载请附上原文出处链接及本声明。
原文链接：`+location.href;navigator.clipboard.writeText(t),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>